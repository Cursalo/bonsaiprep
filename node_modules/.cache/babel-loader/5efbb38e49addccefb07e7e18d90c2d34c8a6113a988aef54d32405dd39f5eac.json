{"ast":null,"code":"var _jsxFileName = \"/Users/gerardo/Downloads/Bonsaito/src/components/BonsaiTree.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { Box, Typography, Paper, useTheme } from '@mui/material';\nimport { useSpring, animated, config, useSpringRef, useChain } from 'react-spring';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Helper functions\nconst lerp = (a, b, t) => a * (1 - t) + b * t;\nconst clamp = (num, min, max) => Math.min(Math.max(num, min), max);\nconst randRange = (min, max) => Math.random() * (max - min) + min;\n\n// Helper function to get all branches (main and sub-branches) flattened into a single array\nconst getAllBranches = branches => {\n  let all_branches = [];\n  for (const branch of branches) {\n    all_branches.push(branch);\n    if (branch.subBranches && branch.subBranches.length > 0) {\n      all_branches = all_branches.concat(getAllBranches(branch.subBranches));\n    }\n  }\n  return all_branches;\n};\n\n// Define interfaces for branch and leaf objects\n\nconst BonsaiTree = ({\n  skills,\n  totalSkills,\n  showGrowthAnimation = false\n}) => {\n  _s();\n  const theme = useTheme();\n  const svgRef = useRef(null);\n  const [recentlyMastered, setRecentlyMastered] = useState([]);\n  const [showTooltip, setShowTooltip] = useState(null);\n  const [animation, setAnimation] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n  const [hoveredBranch, setHoveredBranch] = useState(null);\n\n  // Reference to track previous skills for comparison\n  const prevSkillsRef = useRef([]);\n\n  // Calculate mastery percentage\n  const masteredSkills = skills.filter(skill => skill.mastered);\n  const masteryPercentage = Math.round(masteredSkills.length / totalSkills * 100);\n\n  // Spring animation refs for chaining\n  const trunkSpringRef = useSpringRef();\n  const branchSpringRef = useSpringRef();\n  const leafSpringRef = useSpringRef();\n\n  // Spring animations\n  const percentageProps = useSpring({\n    number: masteryPercentage,\n    from: {\n      number: 0\n    },\n    config: {\n      tension: 120,\n      friction: 14\n    },\n    delay: 300\n  });\n  const trunkProps = useSpring({\n    ref: trunkSpringRef,\n    from: {\n      strokeDashoffset: 1000,\n      opacity: 0.7\n    },\n    to: {\n      strokeDashoffset: 0,\n      opacity: 1\n    },\n    config: {\n      tension: 80,\n      friction: 15,\n      duration: 1500\n    }\n  });\n  const branchProps = useSpring({\n    ref: branchSpringRef,\n    from: {\n      strokeDashoffset: 1000,\n      opacity: 0.5\n    },\n    to: {\n      strokeDashoffset: 0,\n      opacity: 1\n    },\n    config: {\n      tension: 70,\n      friction: 14,\n      duration: 1200\n    }\n  });\n  const leafProps = useSpring({\n    ref: leafSpringRef,\n    from: {\n      scale: 0,\n      opacity: 0\n    },\n    to: {\n      scale: 1,\n      opacity: 1\n    },\n    config: {\n      tension: 200,\n      friction: 20,\n      duration: 800\n    }\n  });\n\n  // Chain the animations\n  useChain(firstRender ? [trunkSpringRef, branchSpringRef, leafSpringRef] : [], firstRender ? [0, 0.5, 0.8] : []);\n  const treeContainerProps = useSpring({\n    from: {\n      opacity: 0,\n      transform: 'translateY(30px)'\n    },\n    to: {\n      opacity: 1,\n      transform: 'translateY(0px)'\n    },\n    config: config.gentle\n  });\n\n  // Group skills by category\n  const skillsByCategory = skills.reduce((acc, skill) => {\n    if (!acc[skill.category]) {\n      acc[skill.category] = [];\n    }\n    acc[skill.category].push(skill);\n    return acc;\n  }, {});\n\n  // Track skills that were recently mastered\n  useEffect(() => {\n    // Only run effect if not first render\n    if (!firstRender) {\n      const prevMasteredIds = prevSkillsRef.current.filter(skill => skill.mastered).map(skill => skill.id);\n      const currentMasteredIds = skills.filter(skill => skill.mastered).map(skill => skill.id);\n\n      // Find newly mastered skills\n      const newlyMastered = currentMasteredIds.filter(id => !prevMasteredIds.includes(id));\n      if (newlyMastered.length > 0) {\n        setRecentlyMastered(newlyMastered);\n        setAnimation(true);\n\n        // Reset animation state after animation completes\n        const timer = setTimeout(() => {\n          setAnimation(false);\n        }, 3000);\n        return () => clearTimeout(timer);\n      }\n    } else {\n      setFirstRender(false);\n    }\n    // Update reference\n    prevSkillsRef.current = [...skills];\n  }, [skills, firstRender]);\n\n  // Calculate tree health/vitality based on mastery\n  const treeVitality = {\n    // Trunk color darkens as tree matures\n    trunkBaseColor: masteryPercentage < 30 ? '#6d4c41' // Lighter brown for younger tree\n    : masteryPercentage < 70 ? '#5d4037' // Medium brown\n    : '#4e342e',\n    // Dark rich brown for mature tree\n\n    // Set trunk dimensions based on growth\n    trunkWidth: clamp(30 + masteryPercentage / 4, 30, 45),\n    trunkHeight: clamp(160 + masteryPercentage, 160, 250),\n    // Pot style based on growth\n    potWidth: clamp(100 + masteryPercentage / 3, 100, 120),\n    potHeight: clamp(45 + masteryPercentage / 10, 45, 55),\n    // Leaf colors become more vibrant with mastery\n    leafBaseColor: masteryPercentage < 30 ? '#88d498' // Light green for low mastery\n    : masteryPercentage < 60 ? '#6bcca1' // Medium green\n    : '#4fc3a8',\n    // Vibrant green for high mastery\n\n    // Overall size scaling factor\n    scale: clamp(0.85 + masteryPercentage / 100, 0.85, 1.25)\n  };\n\n  // Generate branches with a more natural, realistic pattern\n  const generateBranches = () => {\n    const categories = Object.keys(skillsByCategory);\n    const mainBranches = [];\n\n    // If no categories, return empty array\n    if (categories.length === 0) return mainBranches;\n\n    // Determine the main trunk end point (where it starts to curve)\n    const trunkEndY = 300 - treeVitality.trunkHeight * 0.8;\n    const trunkTop = {\n      x: 150,\n      y: trunkEndY\n    };\n\n    // Main branch distribution angles based on number of categories\n    const totalCategories = categories.length;\n    const baseAngles = [];\n    if (totalCategories === 1) {\n      // Single category - branch goes mostly upward\n      baseAngles.push(-Math.PI / 2);\n    } else if (totalCategories === 2) {\n      // Two categories - split left and right\n      baseAngles.push(-Math.PI / 2 - 0.4);\n      baseAngles.push(-Math.PI / 2 + 0.4);\n    } else {\n      // Distribute branches in a fan pattern\n      for (let i = 0; i < totalCategories; i++) {\n        const angle = lerp(-Math.PI / 2 - 0.8, -Math.PI / 2 + 0.8, i / (totalCategories - 1));\n        baseAngles.push(angle);\n      }\n    }\n\n    // Create main branches\n    for (let i = 0; i < categories.length; i++) {\n      const category = categories[i];\n      const skills = skillsByCategory[category];\n\n      // Skip empty categories\n      if (!skills || skills.length === 0) continue;\n\n      // Calculate angle with small random variation\n      const baseAngle = baseAngles[i];\n      const angle = baseAngle + randRange(-0.1, 0.1);\n\n      // Calculate mastery for this category\n      const categorySkills = skillsByCategory[category] || [];\n      const masteredInCategory = categorySkills.filter(s => s.mastered).length;\n      const categoryMasteryRatio = categorySkills.length > 0 ? masteredInCategory / categorySkills.length : 0;\n\n      // Set branch length based on category mastery and skill count\n      const minLength = 80 + skills.length * 3;\n      const maxLength = 120 + skills.length * 4;\n      const branchLength = lerp(minLength, maxLength, categoryMasteryRatio);\n\n      // Branch direction vector\n      const branchDirection = {\n        x: Math.cos(angle),\n        y: Math.sin(angle)\n      };\n\n      // Branch end point\n      const endPoint = {\n        x: trunkTop.x + branchDirection.x * branchLength,\n        y: trunkTop.y + branchDirection.y * branchLength\n      };\n\n      // Control points for natural curve - adjust these for different branch shapes\n      const controlPoint1 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.3,\n        y: trunkTop.y + branchDirection.y * branchLength * 0.2 - 10\n      };\n      const controlPoint2 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.7,\n        y: trunkTop.y + branchDirection.y * branchLength * 0.6 - 15\n      };\n\n      // Thickness based on mastery and size\n      const thickness = 8 * (0.7 + categoryMasteryRatio * 0.5);\n      const mainBranch = {\n        id: `branch-${i}`,\n        category,\n        start: trunkTop,\n        end: endPoint,\n        control1: controlPoint1,\n        control2: controlPoint2,\n        thickness,\n        angle,\n        masteryRatio: categoryMasteryRatio,\n        level: 0,\n        skills: [],\n        subBranches: [],\n        gradientId: `branch-${i}-gradient`\n      };\n\n      // Generate sub-branches\n      const subBranches = generateSubBranches(mainBranch, skills, 3, 1);\n      mainBranch.subBranches = subBranches;\n      mainBranches.push(mainBranch);\n    }\n    return mainBranches;\n  };\n\n  // Generate sub-branches recursively\n  const generateSubBranches = (parentBranch, skills, maxBranches, level) => {\n    if (level > 3 || skills.length === 0) return []; // Limit the recursion depth\n\n    const branches = [];\n    const numBranches = Math.min(maxBranches, skills.length);\n    const skillsPerBranch = Math.ceil(skills.length / numBranches);\n    for (let i = 0; i < numBranches; i++) {\n      // Get skills for this branch\n      const startIdx = i * skillsPerBranch;\n      const endIdx = Math.min(startIdx + skillsPerBranch, skills.length);\n      const branchSkills = skills.slice(startIdx, endIdx);\n      if (branchSkills.length === 0) continue;\n\n      // Calculate mastery for this set of skills\n      const masteredInBranch = branchSkills.filter(s => s.mastered).length;\n      const branchMasteryRatio = masteredInBranch / branchSkills.length;\n\n      // Generate the sub-branch\n      const baseAngle = parentBranch.angle;\n\n      // Alternate sides for more natural look\n      const sideAngle = i % 2 === 0 ? randRange(0.3, 0.7) : randRange(-0.7, -0.3);\n\n      // As we go deeper, branches extend more horizontally\n      const levelFactor = level * 0.2;\n      const newAngle = baseAngle + sideAngle * (1 + levelFactor);\n\n      // Calculate branch length (diminishing with level)\n      const scaleFactor = 1 - level * 0.2;\n      const branchLength = (40 + branchSkills.length * 5) * scaleFactor;\n\n      // Branch direction\n      const branchDirection = {\n        x: Math.cos(newAngle),\n        y: Math.sin(newAngle)\n      };\n\n      // For sub-branches, start from a point along the parent branch\n      const t = 0.6 + i / numBranches * 0.4; // Start point along parent branch\n      const p0 = parentBranch.start;\n      const p1 = parentBranch.control1;\n      const p2 = parentBranch.control2;\n      const p3 = parentBranch.end;\n\n      // Calculate position on the parent's bezier curve\n      const t1 = 1 - t;\n      const t1_2 = t1 * t1;\n      const t1_3 = t1_2 * t1;\n      const t_2 = t * t;\n      const t_3 = t_2 * t;\n      const startX = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n      const startY = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n      const start = {\n        x: startX,\n        y: startY\n      };\n\n      // End point\n      const end = {\n        x: start.x + branchDirection.x * branchLength,\n        y: start.y + branchDirection.y * branchLength\n      };\n\n      // Control points for natural curve\n      const control1 = {\n        x: start.x + branchDirection.x * branchLength * 0.3,\n        y: start.y + branchDirection.y * branchLength * 0.2 - 5\n      };\n      const control2 = {\n        x: start.x + branchDirection.x * branchLength * 0.7,\n        y: start.y + branchDirection.y * branchLength * 0.6 - 8\n      };\n\n      // Thickness diminishes with level\n      const thicknessScale = 1 - level * 0.25;\n      const thickness = parentBranch.thickness * 0.6 * thicknessScale;\n      const branch = {\n        id: `${parentBranch.id}-sub-${i}`,\n        category: parentBranch.category,\n        start,\n        end,\n        control1,\n        control2,\n        thickness,\n        angle: newAngle,\n        masteryRatio: branchMasteryRatio,\n        level,\n        skills: branchSkills,\n        subBranches: [],\n        gradientId: `${parentBranch.id}-sub-${i}-gradient`\n      };\n\n      // Generate further sub-branches if we haven't reached max level\n      if (level < 3 && branchSkills.length > 1) {\n        const furtherSubBranches = generateSubBranches(branch, branchSkills, Math.max(2, branchSkills.length - 1), level + 1);\n        branch.subBranches = furtherSubBranches;\n      }\n      branches.push(branch);\n    }\n    return branches;\n  };\n\n  // Generate main branches\n  const mainBranches = generateBranches();\n  const allDisplayBranches = getAllBranches(mainBranches);\n\n  // Function to render all branches recursively\n  const renderBranches = branches => {\n    return branches.flatMap((branch, index) => [/*#__PURE__*/_jsxDEV(\"g\", {\n      onMouseEnter: () => setHoveredBranch(branch.id),\n      onMouseLeave: () => setHoveredBranch(null),\n      children: [/*#__PURE__*/_jsxDEV(animated.path, {\n        id: branch.id,\n        d: `\n            M${branch.start.x}, ${branch.start.y}\n            C${branch.control1.x}, ${branch.control1.y}\n             ${branch.control2.x}, ${branch.control2.y}\n             ${branch.end.x}, ${branch.end.y}\n          `,\n        fill: \"none\",\n        stroke: `url(#${branch.gradientId})`,\n        strokeWidth: branch.thickness,\n        strokeLinecap: \"round\",\n        style: {\n          transform: hoveredBranch === branch.id ? 'scale(1.05)' : 'scale(1)',\n          transformOrigin: `${branch.start.x}px ${branch.start.y}px`,\n          transition: 'transform 0.3s ease',\n          ...branchProps\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }, this), branch.skills.map((skill, skillIndex) => {\n        const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n        return /*#__PURE__*/_jsxDEV(\"foreignObject\", {\n          id: `leaf-${skill.id}`,\n          x: leaf.x - 20,\n          y: leaf.y - 20,\n          width: 40,\n          height: 40,\n          style: {\n            overflow: 'visible',\n            transition: 'all 0.3s ease',\n            filter: leaf.isRecentlyMastered ? 'url(#leaf-glow)' : 'none',\n            transform: hoveredBranch === branch.id ? 'scale(1.1) rotate(5deg)' : 'scale(1) rotate(0deg)'\n          },\n          onMouseEnter: () => setShowTooltip(skill.id),\n          onMouseLeave: () => setShowTooltip(null),\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"40\",\n            height: \"40\",\n            viewBox: \"-20 -20 40 40\",\n            style: {\n              overflow: 'visible'\n            },\n            children: /*#__PURE__*/_jsxDEV(animated.g, {\n              transform: `rotate(${leaf.angle * 180 / Math.PI})`,\n              style: {\n                ...leafProps\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M0,-2 C3,-10 8,-15 12,-15 C18,-15 20,-8 15,0 C10,8 5,10 0,5 C-5,10 -10,8 -15,0 C-20,-8 -18,-15 -12,-15 C-8,-15 -3,-10 0,-2 Z\",\n                fill: skill.mastered ? theme.palette.primary.main : `hsl(${120 + skill.masteryLevel / 5}, ${50 + skill.masteryLevel / 2}%, ${70 - skill.masteryLevel / 3}%)`,\n                opacity: skill.mastered ? 1 : 0.6 + skill.masteryLevel / 250,\n                className: leaf.isRecentlyMastered ? 'leaf-pulse' : '',\n                transform: `scale(${leaf.size / 25})`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M0,-2 L0,5 M-8,-8 Q0,-2 8,-8\",\n                fill: \"none\",\n                stroke: skill.mastered ? `rgba(255,255,255,0.5)` : `rgba(255,255,255,0.3)`,\n                strokeWidth: \"0.8\",\n                transform: `scale(${leaf.size / 25})`,\n                opacity: 0.8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 15\n          }, this)\n        }, `leaf-${skill.id}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 13\n        }, this);\n      }), branch.subBranches && renderBranches(branch.subBranches)]\n    }, branch.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 7\n    }, this)]);\n  };\n\n  // Generate leaf coordinates for a branch\n  const generateLeafCoordinates = (branch, skill, index) => {\n    const skills = branch.skills;\n    const totalSkills = skills.length;\n\n    // Get a t-value [0-1] along the curve based on the skill index\n    // We want to distribute skills evenly\n    const t = clamp(0.3 + (index + 1) / (totalSkills + 1) * 0.7, 0.3, 0.95);\n\n    // Calculate point on the cubic bezier curve\n    const p0 = branch.start;\n    const p1 = branch.control1;\n    const p2 = branch.control2;\n    const p3 = branch.end;\n\n    // Calculate position on the cubic bezier curve\n    // Formula: P = (1-t)^3 * P0 + 3(1-t)^2 * t * P1 + 3(1-t) * t^2 * P2 + t^3 * P3\n    const t1 = 1 - t;\n    const t1_2 = t1 * t1;\n    const t1_3 = t1_2 * t1;\n    const t_2 = t * t;\n    const t_3 = t_2 * t;\n    const x = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n    const y = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n\n    // Calculate the curve tangent to decide the leaf direction\n    const tangentX = -3 * t1_2 * p0.x + 3 * t1_2 * p1.x - 6 * t1 * t * p1.x + 6 * t1 * t * p2.x - 3 * t_2 * p2.x + 3 * t_2 * p3.x;\n    const tangentY = -3 * t1_2 * p0.y + 3 * t1_2 * p1.y - 6 * t1 * t * p1.y + 6 * t1 * t * p2.y - 3 * t_2 * p2.y + 3 * t_2 * p3.y;\n\n    // Normalize the tangent\n    const tangentLength = Math.sqrt(tangentX * tangentX + tangentY * tangentY);\n    const normalizedTangentX = tangentX / tangentLength;\n    const normalizedTangentY = tangentY / tangentLength;\n\n    // Calculate perpendicular vector\n    const perpX = -normalizedTangentY;\n    const perpY = normalizedTangentX;\n\n    // Spread leaves on both sides of the branch\n    // Alternate sides for a more natural look\n    const side = index % 2 === 0 ? 1 : -1;\n\n    // Offset from the curve\n    const offset = skill.masteryLevel / 100 * 5 + 5;\n\n    // Base position on the curve\n    let baseX = x + side * perpX * offset;\n    let baseY = y + side * perpY * offset;\n\n    // Add some random variation for a more natural look\n    baseX += randRange(-3, 3);\n    baseY += randRange(-3, 3);\n\n    // Calculate leaf size based on mastery level\n    const baseSize = 7;\n    const masteryBonus = skill.mastered ? 4 : skill.masteryLevel / 25;\n    const size = baseSize + masteryBonus;\n\n    // Leaf color hue varies slightly based on mastery\n    const hue = 120 + skill.masteryLevel / 5;\n    return {\n      x: baseX,\n      y: baseY,\n      size,\n      // Add angle information for leaf orientation\n      angle: Math.atan2(perpY, perpX) + side * Math.PI / 8 + randRange(-Math.PI / 16, Math.PI / 16),\n      isRecentlyMastered: recentlyMastered.includes(skill.id) && skill.mastered,\n      hue\n    };\n  };\n\n  // Animation update\n  useEffect(() => {\n    if (!svgRef.current || mainBranches.length === 0) return;\n\n    // Skip animation if it's the first render\n    if (firstRender) return;\n    if (animation) {\n      // Add the SVG animation\n      const svg = svgRef.current;\n\n      // Animate trunk growing\n      const trunk = svg.querySelector('#tree-trunk');\n      if (trunk) {\n        trunk.classList.add('animate-grow');\n        trunk.addEventListener('animationend', () => {\n          trunk.classList.remove('animate-grow');\n        }, {\n          once: true\n        });\n      }\n\n      // Animate branches\n      mainBranches.forEach((branch, i) => {\n        const branchElement = svg.querySelector(`#${branch.id}`);\n        if (branchElement) {\n          branchElement.classList.add('animate-grow');\n          branchElement.setAttribute('style', `animation-delay: ${i * 0.2}s`);\n          branchElement.addEventListener('animationend', () => {\n            branchElement.classList.remove('animate-grow');\n            branchElement.removeAttribute('style');\n          }, {\n            once: true\n          });\n        }\n      });\n\n      // Animate leaves\n      recentlyMastered.forEach(skillId => {\n        const leafElement = svg.querySelector(`#leaf-${skillId}`);\n        if (leafElement) {\n          leafElement.classList.add('animate-leaf-grow');\n          leafElement.addEventListener('animationend', () => {\n            leafElement.classList.remove('animate-leaf-grow');\n          }, {\n            once: true\n          });\n        }\n      });\n    }\n  }, [animation, mainBranches, recentlyMastered, firstRender]);\n\n  // Render tooltip for skills\n  const renderTooltip = () => {\n    if (!showTooltip) return null;\n    const skill = skills.find(s => s.id === showTooltip);\n    if (!skill) return null;\n\n    // Find leaf position for this skill\n    let tooltipX = 0;\n    let tooltipY = 0;\n    let found = false;\n\n    // Recursive search function\n    const findSkillInBranches = branches => {\n      for (const branch of branches) {\n        const skillIndex = branch.skills.findIndex(s => s.id === skill.id);\n        if (skillIndex >= 0) {\n          const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n          tooltipX = leaf.x;\n          tooltipY = leaf.y;\n          found = true;\n          return true;\n        }\n\n        // Check sub-branches\n        if (branch.subBranches && branch.subBranches.length > 0) {\n          if (findSkillInBranches(branch.subBranches)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    findSkillInBranches(mainBranches);\n    if (!found) return null;\n    return /*#__PURE__*/_jsxDEV(\"g\", {\n      children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n        x: tooltipX - 60,\n        y: tooltipY - 50,\n        width: \"120\",\n        height: \"36\",\n        rx: \"6\",\n        ry: \"6\",\n        fill: \"rgba(255,255,255,0.95)\",\n        stroke: theme.palette.primary.main,\n        strokeWidth: \"1\",\n        filter: \"drop-shadow(0px 2px 3px rgba(0,0,0,0.2))\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n        x: tooltipX,\n        y: tooltipY - 30,\n        textAnchor: \"middle\",\n        dominantBaseline: \"middle\",\n        fill: theme.palette.text.primary,\n        fontSize: \"10\",\n        fontFamily: \"DM Sans, sans-serif\",\n        children: skill.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 699,\n        columnNumber: 9\n      }, this), skill.mastered && /*#__PURE__*/_jsxDEV(\"text\", {\n        x: tooltipX,\n        y: tooltipY - 40,\n        textAnchor: \"middle\",\n        dominantBaseline: \"middle\",\n        fill: theme.palette.success.main,\n        fontSize: \"8\",\n        fontFamily: \"DM Sans, sans-serif\",\n        fontWeight: \"bold\",\n        children: \"MASTERED\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 711,\n        columnNumber: 11\n      }, this)]\n    }, `tooltip-${skill.id}`, true, {\n      fileName: _jsxFileName,\n      lineNumber: 686,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(animated.div, {\n    style: treeContainerProps,\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      className: \"glass-morphism\",\n      sx: {\n        p: 4,\n        mb: 4,\n        position: 'relative',\n        overflow: 'hidden',\n        borderRadius: '8px',\n        background: 'linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(245,250,245,0.9))',\n        boxShadow: '0 8px 32px rgba(31,38,135,0.15)',\n        backdropFilter: 'blur(10px)',\n        border: '1px solid rgba(255,255,255,0.18)',\n        transition: 'all 0.5s ease'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        align: \"center\",\n        sx: {\n          fontFamily: 'DM Sans, sans-serif',\n          fontWeight: 'bold',\n          color: theme.palette.primary.main,\n          mb: 3\n        },\n        children: \"Your Bonsai Learning Tree\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 746,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          textAlign: 'center',\n          mb: 3,\n          animation: animation ? 'pulse 2s ease-in-out' : 'none'\n        },\n        children: [/*#__PURE__*/_jsxDEV(animated.div, {\n          style: {\n            display: 'inline-block',\n            fontSize: '2.5rem',\n            fontWeight: 'bold',\n            color: theme.palette.primary.main,\n            animation: animation ? 'colorShift 2s ease-in-out' : 'none'\n          },\n          children: percentageProps.number.to(n => `${Math.floor(n)}%`)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          sx: {\n            fontFamily: 'DM Sans, sans-serif'\n          },\n          children: \"Skills Mastered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 774,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 760,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          width: '100%',\n          height: 500,\n          position: 'relative',\n          borderRadius: 2,\n          overflow: 'hidden',\n          transition: 'all 0.5s ease'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'absolute',\n            bottom: 0,\n            left: 0,\n            width: '100%',\n            height: '40%',\n            background: 'linear-gradient(to top, rgba(232, 245, 233, 0.7) 0%, rgba(232, 245, 233, 0) 100%)',\n            zIndex: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 792,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'absolute',\n            top: 20,\n            right: 25,\n            width: 100,\n            height: 100,\n            borderRadius: '50%',\n            background: 'radial-gradient(circle, rgba(255,236,179,0.3) 0%, rgba(255,236,179,0) 70%)',\n            zIndex: 1,\n            animation: 'pulse 8s infinite ease-in-out',\n            '@keyframes pulse': {\n              '0%': {\n                opacity: 0.5,\n                transform: 'scale(1)'\n              },\n              '50%': {\n                opacity: 0.8,\n                transform: 'scale(1.1)'\n              },\n              '100%': {\n                opacity: 0.5,\n                transform: 'scale(1)'\n              }\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 803,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            width: '100%',\n            height: '100%',\n            position: 'relative',\n            zIndex: 2,\n            transform: `scale(${treeVitality.scale})`,\n            transition: 'transform 1s ease-in-out'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            ref: svgRef,\n            width: \"100%\",\n            height: \"100%\",\n            viewBox: \"0 0 300 500\",\n            overflow: \"visible\",\n            style: {\n              marginTop: '-40px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n              children: [/*#__PURE__*/_jsxDEV(\"radialGradient\", {\n                id: \"potGradient\",\n                cx: \"50%\",\n                cy: \"30%\",\n                r: \"70%\",\n                fx: \"50%\",\n                fy: \"30%\",\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: \"#8D6E63\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 840,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"90%\",\n                  stopColor: \"#5D4037\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 841,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 839,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                id: \"trunkGradient\",\n                x1: \"0%\",\n                y1: \"0%\",\n                x2: \"100%\",\n                y2: \"0%\",\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: treeVitality.trunkBaseColor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 845,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"50%\",\n                  stopColor: \"#6D4C41\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 846,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"100%\",\n                  stopColor: treeVitality.trunkBaseColor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 847,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 844,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"radialGradient\", {\n                id: \"shadowGradient\",\n                cx: \"50%\",\n                cy: \"50%\",\n                r: \"50%\",\n                fx: \"50%\",\n                fy: \"50%\",\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: \"rgba(0,0,0,0.2)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 852,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"100%\",\n                  stopColor: \"rgba(0,0,0,0)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 853,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 851,\n                columnNumber: 17\n              }, this), allDisplayBranches.map(branch => /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                id: branch.gradientId,\n                x1: \"0%\",\n                y1: \"0%\",\n                x2: \"100%\",\n                y2: \"0%\",\n                gradientUnits: \"userSpaceOnUse\",\n                gradientTransform: `rotate(${branch.angle * 180 / Math.PI})`,\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: \"#6D4C41\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 868,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"100%\",\n                  stopColor: \"#8D6E63\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 869,\n                  columnNumber: 21\n                }, this)]\n              }, branch.gradientId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 858,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(\"filter\", {\n                id: \"leaf-glow\",\n                x: \"-50%\",\n                y: \"-50%\",\n                width: \"200%\",\n                height: \"200%\",\n                children: [/*#__PURE__*/_jsxDEV(\"feGaussianBlur\", {\n                  stdDeviation: \"2\",\n                  result: \"blur\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 875,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"feComposite\", {\n                  in: \"SourceGraphic\",\n                  in2: \"blur\",\n                  operator: \"over\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 876,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 874,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n                type: \"text/css\",\n                children: `\n                    @keyframes leafGrow {\n                      0% { transform: scale(0); opacity: 0; }\n                      60% { transform: scale(1.5); opacity: 1; }\n                      100% { transform: scale(1); opacity: 1; }\n                    }\n                    \n                    @keyframes branchGrow {\n                      0% { stroke-dashoffset: 1000; }\n                      100% { stroke-dashoffset: 0; }\n                    }\n                    \n                    @keyframes pulse {\n                      0% { opacity: 0.8; transform: scale(1); }\n                      50% { opacity: 1; transform: scale(1.1); }\n                      100% { opacity: 0.8; transform: scale(1); }\n                    }\n                    \n                    @keyframes float {\n                      0% { transform: translateY(0); }\n                      50% { transform: translateY(-5px); }\n                      100% { transform: translateY(0); }\n                    }\n                    \n                    @keyframes sway {\n                      0% { transform: rotate(0deg); }\n                      25% { transform: rotate(1deg); }\n                      75% { transform: rotate(-1deg); }\n                      100% { transform: rotate(0deg); }\n                    }\n                    \n                    .animate-grow {\n                      stroke-dasharray: 1000;\n                      stroke-dashoffset: 1000;\n                      animation: branchGrow 1.5s ease-in-out forwards;\n                    }\n                    \n                    .animate-leaf-grow {\n                      animation: leafGrow 0.8s ease-out forwards;\n                    }\n                    \n                    .leaf-pulse {\n                      animation: pulse 2s infinite;\n                    }\n                    \n                    .sway-slow {\n                      transform-origin: bottom;\n                      animation: sway 8s ease-in-out infinite;\n                    }\n                    \n                    .sway-medium {\n                      transform-origin: bottom;\n                      animation: sway 6s ease-in-out infinite;\n                    }\n                    \n                    .float-animation {\n                      animation: float 5s ease-in-out infinite;\n                    }\n                  `\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 880,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 837,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n              cx: \"150\",\n              cy: 385 + treeVitality.potHeight,\n              rx: treeVitality.potWidth * 0.9,\n              ry: \"8\",\n              fill: \"url(#shadowGradient)\",\n              opacity: \"0.5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 944,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n              className: \"float-animation\",\n              children: [/*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: \"385\",\n                rx: treeVitality.potWidth,\n                ry: \"15\",\n                fill: \"#A1887F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 955,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: `\n                    M${150 - treeVitality.potWidth}, 385 \n                    L${150 - treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth}, 385\n                  `,\n                fill: \"url(#potGradient)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 962,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: 385 + treeVitality.potHeight,\n                rx: treeVitality.potWidth * 0.8,\n                ry: \"6\",\n                fill: \"#5D4037\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 971,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: \"383\",\n                rx: treeVitality.potWidth * 0.85,\n                ry: \"13\",\n                fill: \"#3E2723\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 980,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: \"382\",\n                rx: treeVitality.potWidth * 0.8,\n                ry: \"12\",\n                fill: \"#33691E\",\n                opacity: \"0.4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 987,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 954,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n              className: \"sway-slow\",\n              children: [/*#__PURE__*/_jsxDEV(animated.path, {\n                id: \"tree-trunk\",\n                d: `\n                    M${150 - treeVitality.trunkWidth * 0.4}, 385\n                    C${150 - treeVitality.trunkWidth * 0.5}, ${385 - treeVitality.trunkHeight * 0.3}\n                     ${150 + treeVitality.trunkWidth * 0.2}, ${385 - treeVitality.trunkHeight * 0.6}\n                     ${150 + treeVitality.trunkWidth * 0.1}, ${385 - treeVitality.trunkHeight * 0.7}\n                    S${150 + treeVitality.trunkWidth * 0.05}, ${385 - treeVitality.trunkHeight * 0.85}\n                     150, ${385 - treeVitality.trunkHeight}\n                  `,\n                fill: \"none\",\n                stroke: \"url(#trunkGradient)\",\n                strokeWidth: treeVitality.trunkWidth,\n                strokeLinecap: \"round\",\n                style: trunkProps\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 999,\n                columnNumber: 17\n              }, this), renderBranches(mainBranches)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 998,\n              columnNumber: 15\n            }, this), renderTooltip()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 829,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 821,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'absolute',\n            bottom: 15,\n            right: 15,\n            background: 'rgba(255,255,255,0.9)',\n            p: 1.5,\n            borderRadius: '8px',\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            backdropFilter: 'blur(8px)',\n            border: '1px solid rgba(255,255,255,0.5)',\n            zIndex: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            display: \"block\",\n            sx: {\n              fontWeight: 'bold',\n              mb: 0.5,\n              fontFamily: 'DM Sans, sans-serif'\n            },\n            children: \"Your Learning Growth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1040,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            display: \"block\",\n            sx: {\n              fontFamily: 'DM Sans, sans-serif'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              component: \"span\",\n              sx: {\n                display: 'inline-block',\n                width: 10,\n                height: 10,\n                borderRadius: '50%',\n                backgroundColor: theme.palette.primary.main,\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1056,\n              columnNumber: 15\n            }, this), \"Mastered Skills\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1051,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            display: \"block\",\n            sx: {\n              fontFamily: 'DM Sans, sans-serif'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              component: \"span\",\n              sx: {\n                display: 'inline-block',\n                width: 10,\n                height: 10,\n                borderRadius: '50%',\n                backgroundColor: treeVitality.leafBaseColor,\n                opacity: 0.7,\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1074,\n              columnNumber: 15\n            }, this), \"Skills In Progress\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1069,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1026,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 783,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        align: \"center\",\n        variant: \"body2\",\n        color: \"text.secondary\",\n        sx: {\n          mt: 2,\n          fontFamily: 'DM Sans, sans-serif',\n          animation: animation ? 'fadeIn 1s ease-in-out' : 'none'\n        },\n        children: [\"You've mastered \", masteredSkills.length, \" skills so far! Keep growing!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1091,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 730,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 729,\n    columnNumber: 5\n  }, this);\n};\n_s(BonsaiTree, \"q3Jujl/Fq+uscNOcA2yq/CAX3YQ=\", false, function () {\n  return [useTheme, useSpringRef, useSpringRef, useSpringRef, useSpring, useSpring, useSpring, useSpring, useChain, useSpring];\n});\n_c = BonsaiTree;\nexport default BonsaiTree;\nvar _c;\n$RefreshReg$(_c, \"BonsaiTree\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Box","Typography","Paper","useTheme","useSpring","animated","config","useSpringRef","useChain","jsxDEV","_jsxDEV","lerp","a","b","t","clamp","num","min","max","Math","randRange","random","getAllBranches","branches","all_branches","branch","push","subBranches","length","concat","BonsaiTree","skills","totalSkills","showGrowthAnimation","_s","theme","svgRef","recentlyMastered","setRecentlyMastered","showTooltip","setShowTooltip","animation","setAnimation","firstRender","setFirstRender","hoveredBranch","setHoveredBranch","prevSkillsRef","masteredSkills","filter","skill","mastered","masteryPercentage","round","trunkSpringRef","branchSpringRef","leafSpringRef","percentageProps","number","from","tension","friction","delay","trunkProps","ref","strokeDashoffset","opacity","to","duration","branchProps","leafProps","scale","treeContainerProps","transform","gentle","skillsByCategory","reduce","acc","category","prevMasteredIds","current","map","id","currentMasteredIds","newlyMastered","includes","timer","setTimeout","clearTimeout","treeVitality","trunkBaseColor","trunkWidth","trunkHeight","potWidth","potHeight","leafBaseColor","generateBranches","categories","Object","keys","mainBranches","trunkEndY","trunkTop","x","y","totalCategories","baseAngles","PI","i","angle","baseAngle","categorySkills","masteredInCategory","s","categoryMasteryRatio","minLength","maxLength","branchLength","branchDirection","cos","sin","endPoint","controlPoint1","controlPoint2","thickness","mainBranch","start","end","control1","control2","masteryRatio","level","gradientId","generateSubBranches","parentBranch","maxBranches","numBranches","skillsPerBranch","ceil","startIdx","endIdx","branchSkills","slice","masteredInBranch","branchMasteryRatio","sideAngle","levelFactor","newAngle","scaleFactor","p0","p1","p2","p3","t1","t1_2","t1_3","t_2","t_3","startX","startY","thicknessScale","furtherSubBranches","allDisplayBranches","renderBranches","flatMap","index","onMouseEnter","onMouseLeave","children","path","d","fill","stroke","strokeWidth","strokeLinecap","style","transformOrigin","transition","fileName","_jsxFileName","lineNumber","columnNumber","skillIndex","leaf","generateLeafCoordinates","width","height","overflow","isRecentlyMastered","viewBox","g","palette","primary","main","masteryLevel","className","size","tangentX","tangentY","tangentLength","sqrt","normalizedTangentX","normalizedTangentY","perpX","perpY","side","offset","baseX","baseY","baseSize","masteryBonus","hue","atan2","svg","trunk","querySelector","classList","add","addEventListener","remove","once","forEach","branchElement","setAttribute","removeAttribute","skillId","leafElement","renderTooltip","find","tooltipX","tooltipY","found","findSkillInBranches","findIndex","rx","ry","textAnchor","dominantBaseline","text","fontSize","fontFamily","name","success","fontWeight","div","elevation","sx","p","mb","position","borderRadius","background","boxShadow","backdropFilter","border","variant","gutterBottom","align","color","textAlign","display","n","floor","bottom","left","zIndex","top","right","marginTop","cx","cy","r","fx","fy","stopColor","x1","y1","x2","y2","gradientUnits","gradientTransform","stdDeviation","result","in","in2","operator","type","component","backgroundColor","mr","mt","_c","$RefreshReg$"],"sources":["/Users/gerardo/Downloads/Bonsaito/src/components/BonsaiTree.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { Box, Typography, Paper, useTheme, Tooltip } from '@mui/material';\nimport { useSpring, animated, config, useSpringRef, useChain } from 'react-spring';\n\ninterface Skill {\n  id: string;\n  name: string;\n  category: string;\n  mastered: boolean;\n  masteryLevel: number;\n}\n\ninterface BonsaiTreeProps {\n  skills: Skill[];\n  totalSkills: number;\n  showGrowthAnimation?: boolean;\n}\n\n// Helper functions\nconst lerp = (a: number, b: number, t: number) => a * (1 - t) + b * t;\nconst clamp = (num: number, min: number, max: number) => Math.min(Math.max(num, min), max);\nconst randRange = (min: number, max: number) => Math.random() * (max - min) + min;\n\n// Helper function to get all branches (main and sub-branches) flattened into a single array\nconst getAllBranches = (branches: Branch[]): Branch[] => {\n  let all_branches: Branch[] = [];\n  for (const branch of branches) {\n    all_branches.push(branch);\n    if (branch.subBranches && branch.subBranches.length > 0) {\n      all_branches = all_branches.concat(getAllBranches(branch.subBranches));\n    }\n  }\n  return all_branches;\n};\n\n// Define interfaces for branch and leaf objects\ninterface BranchPoint {\n  x: number;\n  y: number;\n}\n\ninterface Branch {\n  id: string;\n  category: string;\n  start: BranchPoint;\n  end: BranchPoint;\n  control1: BranchPoint;\n  control2: BranchPoint;\n  thickness: number;\n  angle: number;\n  masteryRatio: number;\n  level: number;\n  skills: Skill[];\n  subBranches: Branch[];\n  gradientId: string;\n}\n\ninterface LeafCoordinates {\n  x: number;\n  y: number;\n  size: number;\n  angle: number;\n  isRecentlyMastered: boolean;\n  hue: number;\n}\n\nconst BonsaiTree: React.FC<BonsaiTreeProps> = ({ skills, totalSkills, showGrowthAnimation = false }) => {\n  const theme = useTheme();\n  const svgRef = useRef<SVGSVGElement>(null);\n  const [recentlyMastered, setRecentlyMastered] = useState<string[]>([]);\n  const [showTooltip, setShowTooltip] = useState<string | null>(null);\n  const [animation, setAnimation] = useState<boolean>(false);\n  const [firstRender, setFirstRender] = useState<boolean>(true);\n  const [hoveredBranch, setHoveredBranch] = useState<string | null>(null);\n  \n  // Reference to track previous skills for comparison\n  const prevSkillsRef = useRef<Skill[]>([]);\n  \n  // Calculate mastery percentage\n  const masteredSkills = skills.filter(skill => skill.mastered);\n  const masteryPercentage = Math.round((masteredSkills.length / totalSkills) * 100);\n  \n  // Spring animation refs for chaining\n  const trunkSpringRef = useSpringRef();\n  const branchSpringRef = useSpringRef();\n  const leafSpringRef = useSpringRef();\n\n  // Spring animations\n  const percentageProps = useSpring({\n    number: masteryPercentage,\n    from: { number: 0 },\n    config: { tension: 120, friction: 14 },\n    delay: 300,\n  });\n\n  const trunkProps = useSpring({\n    ref: trunkSpringRef,\n    from: { strokeDashoffset: 1000, opacity: 0.7 },\n    to: { strokeDashoffset: 0, opacity: 1 },\n    config: { tension: 80, friction: 15, duration: 1500 },\n  });\n\n  const branchProps = useSpring({\n    ref: branchSpringRef,\n    from: { strokeDashoffset: 1000, opacity: 0.5 },\n    to: { strokeDashoffset: 0, opacity: 1 },\n    config: { tension: 70, friction: 14, duration: 1200 },\n  });\n\n  const leafProps = useSpring({\n    ref: leafSpringRef,\n    from: { scale: 0, opacity: 0 },\n    to: { scale: 1, opacity: 1 },\n    config: { tension: 200, friction: 20, duration: 800 },\n  });\n\n  // Chain the animations\n  useChain(\n    firstRender \n      ? [trunkSpringRef, branchSpringRef, leafSpringRef] \n      : [], \n    firstRender \n      ? [0, 0.5, 0.8] \n      : []\n  );\n\n  const treeContainerProps = useSpring({\n    from: { opacity: 0, transform: 'translateY(30px)' },\n    to: { opacity: 1, transform: 'translateY(0px)' },\n    config: config.gentle,\n  });\n\n  // Group skills by category\n  const skillsByCategory = skills.reduce((acc, skill) => {\n      if (!acc[skill.category]) {\n        acc[skill.category] = [];\n      }\n      acc[skill.category].push(skill);\n      return acc;\n    }, {} as Record<string, Skill[]>);\n\n  // Track skills that were recently mastered\n  useEffect(() => {\n    // Only run effect if not first render\n    if (!firstRender) {\n      const prevMasteredIds = prevSkillsRef.current\n        .filter(skill => skill.mastered)\n        .map(skill => skill.id);\n      \n      const currentMasteredIds = skills\n        .filter(skill => skill.mastered)\n        .map(skill => skill.id);\n      \n      // Find newly mastered skills\n      const newlyMastered = currentMasteredIds.filter(id => !prevMasteredIds.includes(id));\n      \n      if (newlyMastered.length > 0) {\n        setRecentlyMastered(newlyMastered);\n        setAnimation(true);\n        \n        // Reset animation state after animation completes\n        const timer = setTimeout(() => {\n          setAnimation(false);\n        }, 3000);\n        \n        return () => clearTimeout(timer);\n      }\n    } else {\n      setFirstRender(false);\n    }\n    // Update reference\n    prevSkillsRef.current = [...skills];\n  }, [skills, firstRender]);\n\n  // Calculate tree health/vitality based on mastery\n  const treeVitality = {\n    // Trunk color darkens as tree matures\n    trunkBaseColor: masteryPercentage < 30 \n      ? '#6d4c41' // Lighter brown for younger tree\n      : masteryPercentage < 70\n        ? '#5d4037' // Medium brown\n        : '#4e342e', // Dark rich brown for mature tree\n        \n    // Set trunk dimensions based on growth\n    trunkWidth: clamp(30 + (masteryPercentage / 4), 30, 45),\n    trunkHeight: clamp(160 + masteryPercentage, 160, 250),\n    \n    // Pot style based on growth\n    potWidth: clamp(100 + (masteryPercentage / 3), 100, 120),\n    potHeight: clamp(45 + (masteryPercentage / 10), 45, 55),\n    \n    // Leaf colors become more vibrant with mastery\n    leafBaseColor: masteryPercentage < 30 \n      ? '#88d498' // Light green for low mastery\n      : masteryPercentage < 60 \n        ? '#6bcca1' // Medium green\n        : '#4fc3a8', // Vibrant green for high mastery\n    \n    // Overall size scaling factor\n    scale: clamp(0.85 + (masteryPercentage / 100), 0.85, 1.25)\n  };\n\n  // Generate branches with a more natural, realistic pattern\n  const generateBranches = (): Branch[] => {\n    const categories = Object.keys(skillsByCategory);\n    const mainBranches: Branch[] = [];\n    \n    // If no categories, return empty array\n    if (categories.length === 0) return mainBranches;\n    \n    // Determine the main trunk end point (where it starts to curve)\n    const trunkEndY = 300 - treeVitality.trunkHeight * 0.8;\n    const trunkTop = { x: 150, y: trunkEndY };\n    \n    // Main branch distribution angles based on number of categories\n    const totalCategories = categories.length;\n    const baseAngles = [];\n    \n    if (totalCategories === 1) {\n      // Single category - branch goes mostly upward\n      baseAngles.push(-Math.PI/2);\n    } else if (totalCategories === 2) {\n      // Two categories - split left and right\n      baseAngles.push(-Math.PI/2 - 0.4);\n      baseAngles.push(-Math.PI/2 + 0.4);\n    } else {\n      // Distribute branches in a fan pattern\n      for (let i = 0; i < totalCategories; i++) {\n        const angle = lerp(-Math.PI/2 - 0.8, -Math.PI/2 + 0.8, i / (totalCategories - 1));\n        baseAngles.push(angle);\n      }\n    }\n    \n    // Create main branches\n    for (let i = 0; i < categories.length; i++) {\n      const category = categories[i];\n      const skills = skillsByCategory[category];\n      \n      // Skip empty categories\n      if (!skills || skills.length === 0) continue;\n      \n      // Calculate angle with small random variation\n      const baseAngle = baseAngles[i];\n      const angle = baseAngle + randRange(-0.1, 0.1);\n      \n      // Calculate mastery for this category\n      const categorySkills = skillsByCategory[category] || [];\n      const masteredInCategory = categorySkills.filter(s => s.mastered).length;\n      const categoryMasteryRatio = categorySkills.length > 0 \n        ? masteredInCategory / categorySkills.length \n        : 0;\n      \n      // Set branch length based on category mastery and skill count\n      const minLength = 80 + (skills.length * 3);\n      const maxLength = 120 + (skills.length * 4);\n      const branchLength = lerp(minLength, maxLength, categoryMasteryRatio);\n      \n      // Branch direction vector\n      const branchDirection = { \n        x: Math.cos(angle),\n        y: Math.sin(angle)\n      };\n      \n      // Branch end point\n      const endPoint = {\n        x: trunkTop.x + branchDirection.x * branchLength,\n        y: trunkTop.y + branchDirection.y * branchLength\n      };\n      \n      // Control points for natural curve - adjust these for different branch shapes\n      const controlPoint1 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.3,\n        y: trunkTop.y + branchDirection.y * branchLength * 0.2 - 10\n      };\n      \n      const controlPoint2 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.7, \n        y: trunkTop.y + branchDirection.y * branchLength * 0.6 - 15\n      };\n      \n      // Thickness based on mastery and size\n      const thickness = 8 * (0.7 + (categoryMasteryRatio * 0.5));\n      \n      const mainBranch: Branch = {\n        id: `branch-${i}`,\n        category,\n        start: trunkTop,\n        end: endPoint,\n        control1: controlPoint1,\n        control2: controlPoint2,\n        thickness,\n        angle,\n        masteryRatio: categoryMasteryRatio,\n        level: 0,\n        skills: [],\n        subBranches: [],\n        gradientId: `branch-${i}-gradient`,\n      };\n      \n      // Generate sub-branches\n      const subBranches = generateSubBranches(mainBranch, skills, 3, 1);\n      mainBranch.subBranches = subBranches;\n      \n      mainBranches.push(mainBranch);\n    }\n    \n    return mainBranches;\n  };\n  \n  // Generate sub-branches recursively\n  const generateSubBranches = (parentBranch: Branch, skills: Skill[], maxBranches: number, level: number): Branch[] => {\n    if (level > 3 || skills.length === 0) return []; // Limit the recursion depth\n    \n    const branches: Branch[] = [];\n    const numBranches = Math.min(maxBranches, skills.length);\n    const skillsPerBranch = Math.ceil(skills.length / numBranches);\n    \n    for (let i = 0; i < numBranches; i++) {\n      // Get skills for this branch\n      const startIdx = i * skillsPerBranch;\n      const endIdx = Math.min(startIdx + skillsPerBranch, skills.length);\n      const branchSkills = skills.slice(startIdx, endIdx);\n      \n      if (branchSkills.length === 0) continue;\n      \n      // Calculate mastery for this set of skills\n      const masteredInBranch = branchSkills.filter(s => s.mastered).length;\n      const branchMasteryRatio = masteredInBranch / branchSkills.length;\n      \n      // Generate the sub-branch\n      const baseAngle = parentBranch.angle;\n      \n      // Alternate sides for more natural look\n      const sideAngle = i % 2 === 0 ? randRange(0.3, 0.7) : randRange(-0.7, -0.3);\n      \n      // As we go deeper, branches extend more horizontally\n      const levelFactor = level * 0.2;\n      const newAngle = baseAngle + sideAngle * (1 + levelFactor);\n      \n      // Calculate branch length (diminishing with level)\n      const scaleFactor = 1 - (level * 0.2);\n      const branchLength = (40 + (branchSkills.length * 5)) * scaleFactor;\n      \n      // Branch direction\n      const branchDirection = {\n        x: Math.cos(newAngle),\n        y: Math.sin(newAngle)\n      };\n      \n      // For sub-branches, start from a point along the parent branch\n      const t = 0.6 + (i / numBranches) * 0.4; // Start point along parent branch\n      const p0 = parentBranch.start;\n      const p1 = parentBranch.control1;\n      const p2 = parentBranch.control2;\n      const p3 = parentBranch.end;\n      \n      // Calculate position on the parent's bezier curve\n      const t1 = 1 - t;\n      const t1_2 = t1 * t1;\n      const t1_3 = t1_2 * t1;\n      const t_2 = t * t;\n      const t_3 = t_2 * t;\n      \n      const startX = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n      const startY = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n      const start = { x: startX, y: startY };\n      \n      // End point\n      const end = {\n        x: start.x + branchDirection.x * branchLength,\n        y: start.y + branchDirection.y * branchLength\n      };\n      \n      // Control points for natural curve\n      const control1 = {\n        x: start.x + branchDirection.x * branchLength * 0.3,\n        y: start.y + branchDirection.y * branchLength * 0.2 - 5\n      };\n      \n      const control2 = {\n        x: start.x + branchDirection.x * branchLength * 0.7,\n        y: start.y + branchDirection.y * branchLength * 0.6 - 8\n      };\n      \n      // Thickness diminishes with level\n      const thicknessScale = 1 - (level * 0.25);\n      const thickness = parentBranch.thickness * 0.6 * thicknessScale;\n      \n      const branch: Branch = {\n        id: `${parentBranch.id}-sub-${i}`,\n        category: parentBranch.category,\n        start,\n        end,\n        control1,\n        control2,\n        thickness,\n        angle: newAngle,\n        masteryRatio: branchMasteryRatio,\n        level,\n        skills: branchSkills,\n        subBranches: [],\n        gradientId: `${parentBranch.id}-sub-${i}-gradient`,\n      };\n      \n      // Generate further sub-branches if we haven't reached max level\n      if (level < 3 && branchSkills.length > 1) {\n        const furtherSubBranches = generateSubBranches(\n          branch, \n          branchSkills, \n          Math.max(2, branchSkills.length - 1), \n          level + 1\n        );\n        branch.subBranches = furtherSubBranches;\n      }\n      \n      branches.push(branch);\n    }\n    \n    return branches;\n  };\n  \n  // Generate main branches\n  const mainBranches = generateBranches();\n  const allDisplayBranches = getAllBranches(mainBranches);\n\n  // Function to render all branches recursively\n  const renderBranches = (branches: Branch[]) => {\n    return branches.flatMap((branch, index) => [\n      <g \n        key={branch.id} \n        onMouseEnter={() => setHoveredBranch(branch.id)}\n        onMouseLeave={() => setHoveredBranch(null)}\n      >\n        <animated.path\n          id={branch.id}\n          d={`\n            M${branch.start.x}, ${branch.start.y}\n            C${branch.control1.x}, ${branch.control1.y}\n             ${branch.control2.x}, ${branch.control2.y}\n             ${branch.end.x}, ${branch.end.y}\n          `}\n          fill=\"none\"\n          stroke={`url(#${branch.gradientId})`}\n          strokeWidth={branch.thickness}\n          strokeLinecap=\"round\"\n          style={{\n            transform: hoveredBranch === branch.id \n              ? 'scale(1.05)' \n              : 'scale(1)',\n            transformOrigin: `${branch.start.x}px ${branch.start.y}px`,\n            transition: 'transform 0.3s ease',\n            ...branchProps\n          }}\n        />\n        \n        {/* Skills as leaves */}\n        {branch.skills.map((skill, skillIndex) => {\n          const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n          return (\n            <foreignObject\n              key={`leaf-${skill.id}`}\n              id={`leaf-${skill.id}`}\n              x={leaf.x - 20}\n              y={leaf.y - 20}\n              width={40}\n              height={40}\n              style={{\n                overflow: 'visible',\n                transition: 'all 0.3s ease',\n                filter: leaf.isRecentlyMastered ? 'url(#leaf-glow)' : 'none',\n                transform: hoveredBranch === branch.id \n                  ? 'scale(1.1) rotate(5deg)' \n                  : 'scale(1) rotate(0deg)',\n              }}\n              onMouseEnter={() => setShowTooltip(skill.id)}\n              onMouseLeave={() => setShowTooltip(null)}\n            >\n              <svg \n                width=\"40\" \n                height=\"40\" \n                viewBox=\"-20 -20 40 40\"\n                style={{\n                  overflow: 'visible',\n                }}\n              >\n                <animated.g \n                  transform={`rotate(${leaf.angle * 180 / Math.PI})`}\n                  style={{\n                    ...leafProps\n                  }}\n                >\n                  <path\n                    d=\"M0,-2 C3,-10 8,-15 12,-15 C18,-15 20,-8 15,0 C10,8 5,10 0,5 C-5,10 -10,8 -15,0 C-20,-8 -18,-15 -12,-15 C-8,-15 -3,-10 0,-2 Z\"\n                    fill={skill.mastered \n                      ? theme.palette.primary.main \n                      : `hsl(${120 + (skill.masteryLevel / 5)}, ${50 + skill.masteryLevel / 2}%, ${70 - skill.masteryLevel / 3}%)`\n                    }\n                    opacity={skill.mastered ? 1 : 0.6 + (skill.masteryLevel / 250)}\n                    className={leaf.isRecentlyMastered ? 'leaf-pulse' : ''}\n                    transform={`scale(${leaf.size / 25})`}\n                  />\n                  {/* Leaf vein */}\n                  <path\n                    d=\"M0,-2 L0,5 M-8,-8 Q0,-2 8,-8\"\n                    fill=\"none\"\n                    stroke={skill.mastered \n                      ? `rgba(255,255,255,0.5)` \n                      : `rgba(255,255,255,0.3)`\n                    }\n                    strokeWidth=\"0.8\"\n                    transform={`scale(${leaf.size / 25})`}\n                    opacity={0.8}\n                  />\n                </animated.g>\n              </svg>\n            </foreignObject>\n          );\n        })}\n        \n        {/* Render sub-branches recursively */}\n        {branch.subBranches && renderBranches(branch.subBranches)}\n      </g>\n    ]);\n  };\n\n  // Generate leaf coordinates for a branch\n  const generateLeafCoordinates = (branch: Branch, skill: Skill, index: number): LeafCoordinates => {\n    const skills = branch.skills;\n    const totalSkills = skills.length;\n    \n    // Get a t-value [0-1] along the curve based on the skill index\n    // We want to distribute skills evenly\n    const t = clamp(0.3 + ((index + 1) / (totalSkills + 1)) * 0.7, 0.3, 0.95);\n\n    // Calculate point on the cubic bezier curve\n    const p0 = branch.start;\n    const p1 = branch.control1;\n    const p2 = branch.control2;\n    const p3 = branch.end;\n    \n    // Calculate position on the cubic bezier curve\n    // Formula: P = (1-t)^3 * P0 + 3(1-t)^2 * t * P1 + 3(1-t) * t^2 * P2 + t^3 * P3\n    const t1 = 1 - t;\n    const t1_2 = t1 * t1;\n    const t1_3 = t1_2 * t1;\n    const t_2 = t * t;\n    const t_3 = t_2 * t;\n    \n    const x = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n    const y = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n    \n    // Calculate the curve tangent to decide the leaf direction\n    const tangentX = -3 * t1_2 * p0.x + 3 * t1_2 * p1.x - 6 * t1 * t * p1.x + \n                 6 * t1 * t * p2.x - 3 * t_2 * p2.x + 3 * t_2 * p3.x;\n    const tangentY = -3 * t1_2 * p0.y + 3 * t1_2 * p1.y - 6 * t1 * t * p1.y + \n                 6 * t1 * t * p2.y - 3 * t_2 * p2.y + 3 * t_2 * p3.y;\n    \n    // Normalize the tangent\n    const tangentLength = Math.sqrt(tangentX * tangentX + tangentY * tangentY);\n    const normalizedTangentX = tangentX / tangentLength;\n    const normalizedTangentY = tangentY / tangentLength;\n    \n    // Calculate perpendicular vector\n    const perpX = -normalizedTangentY;\n    const perpY = normalizedTangentX;\n    \n    // Spread leaves on both sides of the branch\n    // Alternate sides for a more natural look\n    const side = index % 2 === 0 ? 1 : -1;\n    \n    // Offset from the curve\n    const offset = ((skill.masteryLevel / 100) * 5) + 5;\n    \n    // Base position on the curve\n    let baseX = x + side * perpX * offset;\n    let baseY = y + side * perpY * offset;\n    \n    // Add some random variation for a more natural look\n    baseX += randRange(-3, 3);\n    baseY += randRange(-3, 3);\n    \n    // Calculate leaf size based on mastery level\n    const baseSize = 7;\n    const masteryBonus = skill.mastered ? 4 : (skill.masteryLevel / 25);\n    const size = baseSize + masteryBonus;\n\n    // Leaf color hue varies slightly based on mastery\n    const hue = 120 + (skill.masteryLevel / 5);\n    \n    return {\n      x: baseX,\n      y: baseY,\n      size,\n      // Add angle information for leaf orientation\n      angle: Math.atan2(perpY, perpX) + (side * Math.PI / 8) + randRange(-Math.PI / 16, Math.PI / 16),\n      isRecentlyMastered: recentlyMastered.includes(skill.id) && skill.mastered,\n      hue\n    };\n  };\n  \n  // Animation update\n  useEffect(() => {\n    if (!svgRef.current || mainBranches.length === 0) return;\n    \n    // Skip animation if it's the first render\n    if (firstRender) return;\n\n    if (animation) {\n      // Add the SVG animation\n      const svg = svgRef.current;\n      \n      // Animate trunk growing\n      const trunk = svg.querySelector('#tree-trunk');\n      if (trunk) {\n        trunk.classList.add('animate-grow');\n        trunk.addEventListener('animationend', () => {\n          trunk.classList.remove('animate-grow');\n        }, { once: true });\n      }\n      \n      // Animate branches\n      mainBranches.forEach((branch, i) => {\n        const branchElement = svg.querySelector(`#${branch.id}`);\n        if (branchElement) {\n          branchElement.classList.add('animate-grow');\n          branchElement.setAttribute('style', `animation-delay: ${i * 0.2}s`);\n          branchElement.addEventListener('animationend', () => {\n            branchElement.classList.remove('animate-grow');\n            branchElement.removeAttribute('style');\n          }, { once: true });\n        }\n      });\n      \n      // Animate leaves\n      recentlyMastered.forEach(skillId => {\n        const leafElement = svg.querySelector(`#leaf-${skillId}`);\n        if (leafElement) {\n          leafElement.classList.add('animate-leaf-grow');\n          leafElement.addEventListener('animationend', () => {\n            leafElement.classList.remove('animate-leaf-grow');\n          }, { once: true });\n        }\n      });\n    }\n  }, [animation, mainBranches, recentlyMastered, firstRender]);\n\n  // Render tooltip for skills\n  const renderTooltip = () => {\n    if (!showTooltip) return null;\n    \n    const skill = skills.find(s => s.id === showTooltip);\n    if (!skill) return null;\n    \n    // Find leaf position for this skill\n    let tooltipX = 0;\n    let tooltipY = 0;\n    let found = false;\n    \n    // Recursive search function\n    const findSkillInBranches = (branches: Branch[]) => {\n      for (const branch of branches) {\n        const skillIndex = branch.skills.findIndex(s => s.id === skill.id);\n        if (skillIndex >= 0) {\n          const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n          tooltipX = leaf.x;\n          tooltipY = leaf.y;\n          found = true;\n          return true;\n        }\n        \n        // Check sub-branches\n        if (branch.subBranches && branch.subBranches.length > 0) {\n          if (findSkillInBranches(branch.subBranches)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    \n    findSkillInBranches(mainBranches);\n    \n    if (!found) return null;\n    \n    return (\n      <g key={`tooltip-${skill.id}`}>\n        <rect\n          x={tooltipX - 60}\n          y={tooltipY - 50}\n          width=\"120\"\n          height=\"36\"\n          rx=\"6\"\n          ry=\"6\"\n          fill=\"rgba(255,255,255,0.95)\"\n          stroke={theme.palette.primary.main}\n          strokeWidth=\"1\"\n          filter=\"drop-shadow(0px 2px 3px rgba(0,0,0,0.2))\"\n        />\n        <text\n          x={tooltipX}\n          y={tooltipY - 30}\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n          fill={theme.palette.text.primary}\n          fontSize=\"10\"\n          fontFamily=\"DM Sans, sans-serif\"\n        >\n          {skill.name}\n        </text>\n        {skill.mastered && (\n          <text\n            x={tooltipX}\n            y={tooltipY - 40}\n            textAnchor=\"middle\"\n            dominantBaseline=\"middle\"\n            fill={theme.palette.success.main}\n            fontSize=\"8\"\n            fontFamily=\"DM Sans, sans-serif\"\n            fontWeight=\"bold\"\n          >\n            MASTERED\n          </text>\n        )}\n      </g>\n    );\n  };\n\n  return (\n    <animated.div style={treeContainerProps}>\n      <Paper \n        elevation={3} \n        className=\"glass-morphism\"\n        sx={{ \n          p: 4, \n          mb: 4, \n          position: 'relative',\n          overflow: 'hidden',\n          borderRadius: '8px',\n          background: 'linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(245,250,245,0.9))',\n          boxShadow: '0 8px 32px rgba(31,38,135,0.15)',\n          backdropFilter: 'blur(10px)',\n          border: '1px solid rgba(255,255,255,0.18)',\n          transition: 'all 0.5s ease',\n        }}\n      >\n        <Typography \n          variant=\"h5\" \n          gutterBottom \n          align=\"center\" \n          sx={{ \n            fontFamily: 'DM Sans, sans-serif',\n            fontWeight: 'bold', \n            color: theme.palette.primary.main,\n            mb: 3\n          }}\n        >\n          Your Bonsai Learning Tree\n        </Typography>\n      \n        <Box sx={{ \n          textAlign: 'center', \n          mb: 3,\n          animation: animation ? 'pulse 2s ease-in-out' : 'none',\n        }}>\n          <animated.div style={{\n            display: 'inline-block',\n            fontSize: '2.5rem',\n            fontWeight: 'bold',\n            color: theme.palette.primary.main,\n            animation: animation ? 'colorShift 2s ease-in-out' : 'none',\n          }}>\n            {percentageProps.number.to(n => `${Math.floor(n)}%`)}\n          </animated.div>\n          <Typography \n            variant=\"body2\" \n            color=\"text.secondary\"\n            sx={{ fontFamily: 'DM Sans, sans-serif' }}\n          >\n            Skills Mastered\n          </Typography>\n        </Box>\n      \n        <Box sx={{ \n          width: '100%', \n          height: 500,\n          position: 'relative',\n          borderRadius: 2,\n          overflow: 'hidden',\n          transition: 'all 0.5s ease',\n        }}>\n          {/* Background gradient */}\n          <Box sx={{\n            position: 'absolute',\n            bottom: 0,\n            left: 0,\n            width: '100%',\n            height: '40%',\n            background: 'linear-gradient(to top, rgba(232, 245, 233, 0.7) 0%, rgba(232, 245, 233, 0) 100%)',\n            zIndex: 1\n          }} />\n          \n          {/* Sun/light effect */}\n          <Box sx={{\n            position: 'absolute',\n            top: 20,\n            right: 25,\n            width: 100,\n            height: 100,\n            borderRadius: '50%',\n            background: 'radial-gradient(circle, rgba(255,236,179,0.3) 0%, rgba(255,236,179,0) 70%)',\n            zIndex: 1,\n            animation: 'pulse 8s infinite ease-in-out',\n            '@keyframes pulse': {\n              '0%': { opacity: 0.5, transform: 'scale(1)' },\n              '50%': { opacity: 0.8, transform: 'scale(1.1)' },\n              '100%': { opacity: 0.5, transform: 'scale(1)' }\n            }\n          }} />\n          \n          {/* Tree SVG */}\n          <Box sx={{\n            width: '100%',\n            height: '100%',\n            position: 'relative',\n            zIndex: 2,\n            transform: `scale(${treeVitality.scale})`,\n            transition: 'transform 1s ease-in-out',\n          }}>\n            <svg \n              ref={svgRef}\n              width=\"100%\" \n              height=\"100%\" \n              viewBox=\"0 0 300 500\" \n              overflow=\"visible\"\n              style={{ marginTop: '-40px' }}\n            >\n              <defs>\n                {/* Gradients for tree elements */}\n                <radialGradient id=\"potGradient\" cx=\"50%\" cy=\"30%\" r=\"70%\" fx=\"50%\" fy=\"30%\">\n                  <stop offset=\"0%\" stopColor=\"#8D6E63\" />\n                  <stop offset=\"90%\" stopColor=\"#5D4037\" />\n                </radialGradient>\n                \n                <linearGradient id=\"trunkGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                  <stop offset=\"0%\" stopColor={treeVitality.trunkBaseColor} />\n                  <stop offset=\"50%\" stopColor=\"#6D4C41\" />\n                  <stop offset=\"100%\" stopColor={treeVitality.trunkBaseColor} />\n                </linearGradient>\n                \n                {/* Shadow gradient */}\n                <radialGradient id=\"shadowGradient\" cx=\"50%\" cy=\"50%\" r=\"50%\" fx=\"50%\" fy=\"50%\">\n                  <stop offset=\"0%\" stopColor=\"rgba(0,0,0,0.2)\" />\n                  <stop offset=\"100%\" stopColor=\"rgba(0,0,0,0)\" />\n                </radialGradient>\n                \n                {/* Gradients for each branch */}\n                {allDisplayBranches.map((branch) => (\n                  <linearGradient \n                    key={branch.gradientId}\n                    id={branch.gradientId}\n                    x1=\"0%\" \n                    y1=\"0%\" \n                    x2=\"100%\" \n                    y2=\"0%\" \n                    gradientUnits=\"userSpaceOnUse\"\n                    gradientTransform={`rotate(${branch.angle * 180 / Math.PI})`}\n                  >\n                    <stop offset=\"0%\" stopColor=\"#6D4C41\" />\n                    <stop offset=\"100%\" stopColor=\"#8D6E63\" />\n                  </linearGradient>\n                ))}\n                \n                {/* Leaf filter for glow effect */}\n                <filter id=\"leaf-glow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n                  <feGaussianBlur stdDeviation=\"2\" result=\"blur\" />\n                  <feComposite in=\"SourceGraphic\" in2=\"blur\" operator=\"over\" />\n                </filter>\n                \n                {/* Animation keyframes */}\n                <style type=\"text/css\">\n                  {`\n                    @keyframes leafGrow {\n                      0% { transform: scale(0); opacity: 0; }\n                      60% { transform: scale(1.5); opacity: 1; }\n                      100% { transform: scale(1); opacity: 1; }\n                    }\n                    \n                    @keyframes branchGrow {\n                      0% { stroke-dashoffset: 1000; }\n                      100% { stroke-dashoffset: 0; }\n                    }\n                    \n                    @keyframes pulse {\n                      0% { opacity: 0.8; transform: scale(1); }\n                      50% { opacity: 1; transform: scale(1.1); }\n                      100% { opacity: 0.8; transform: scale(1); }\n                    }\n                    \n                    @keyframes float {\n                      0% { transform: translateY(0); }\n                      50% { transform: translateY(-5px); }\n                      100% { transform: translateY(0); }\n                    }\n                    \n                    @keyframes sway {\n                      0% { transform: rotate(0deg); }\n                      25% { transform: rotate(1deg); }\n                      75% { transform: rotate(-1deg); }\n                      100% { transform: rotate(0deg); }\n                    }\n                    \n                    .animate-grow {\n                      stroke-dasharray: 1000;\n                      stroke-dashoffset: 1000;\n                      animation: branchGrow 1.5s ease-in-out forwards;\n                    }\n                    \n                    .animate-leaf-grow {\n                      animation: leafGrow 0.8s ease-out forwards;\n                    }\n                    \n                    .leaf-pulse {\n                      animation: pulse 2s infinite;\n                    }\n                    \n                    .sway-slow {\n                      transform-origin: bottom;\n                      animation: sway 8s ease-in-out infinite;\n                    }\n                    \n                    .sway-medium {\n                      transform-origin: bottom;\n                      animation: sway 6s ease-in-out infinite;\n                    }\n                    \n                    .float-animation {\n                      animation: float 5s ease-in-out infinite;\n                    }\n                  `}\n                </style>\n              </defs>\n              \n              {/* Shadow beneath the pot */}\n              <ellipse \n                cx=\"150\" \n                cy={385 + treeVitality.potHeight} \n                rx={treeVitality.potWidth * 0.9} \n                ry=\"8\" \n                fill=\"url(#shadowGradient)\"\n                opacity=\"0.5\"\n              />\n              \n              {/* Pot/Base */}\n              <g className=\"float-animation\">\n                <ellipse \n                  cx=\"150\" \n                  cy=\"385\" \n                  rx={treeVitality.potWidth} \n                  ry=\"15\" \n                  fill=\"#A1887F\" \n                />\n                <path \n                  d={`\n                    M${150 - treeVitality.potWidth}, 385 \n                    L${150 - treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth}, 385\n                  `}\n                  fill=\"url(#potGradient)\"\n                />\n                <ellipse \n                  cx=\"150\" \n                  cy={385 + treeVitality.potHeight} \n                  rx={treeVitality.potWidth * 0.8} \n                  ry=\"6\" \n                  fill=\"#5D4037\" \n                />\n                \n                {/* Soil/moss in pot */}\n                <ellipse \n                  cx=\"150\" \n                  cy=\"383\" \n                  rx={treeVitality.potWidth * 0.85} \n                  ry=\"13\" \n                  fill=\"#3E2723\" \n                />\n                <ellipse \n                  cx=\"150\" \n                  cy=\"382\" \n                  rx={treeVitality.potWidth * 0.8} \n                  ry=\"12\" \n                  fill=\"#33691E\" \n                  opacity=\"0.4\"\n                />\n              </g>\n              \n              {/* Trunk */}\n              <g className=\"sway-slow\">\n                <animated.path\n                  id=\"tree-trunk\"\n                  d={`\n                    M${150 - treeVitality.trunkWidth * 0.4}, 385\n                    C${150 - treeVitality.trunkWidth * 0.5}, ${385 - treeVitality.trunkHeight * 0.3}\n                     ${150 + treeVitality.trunkWidth * 0.2}, ${385 - treeVitality.trunkHeight * 0.6}\n                     ${150 + treeVitality.trunkWidth * 0.1}, ${385 - treeVitality.trunkHeight * 0.7}\n                    S${150 + treeVitality.trunkWidth * 0.05}, ${385 - treeVitality.trunkHeight * 0.85}\n                     150, ${385 - treeVitality.trunkHeight}\n                  `}\n                  fill=\"none\"\n                  stroke=\"url(#trunkGradient)\"\n                  strokeWidth={treeVitality.trunkWidth}\n                  strokeLinecap=\"round\"\n                  style={trunkProps}\n                />\n                \n                {/* Branches */}\n                {renderBranches(mainBranches)}\n              </g>\n              \n              {/* Skill name tooltips */}\n              {renderTooltip()}\n            </svg>\n          </Box>\n          \n          {/* Tree legend */}\n          <Box \n            sx={{ \n              position: 'absolute', \n              bottom: 15, \n              right: 15,\n              background: 'rgba(255,255,255,0.9)', \n              p: 1.5,\n              borderRadius: '8px',\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n              backdropFilter: 'blur(8px)',\n              border: '1px solid rgba(255,255,255,0.5)',\n              zIndex: 10\n            }}\n          >\n            <Typography \n              variant=\"caption\" \n              display=\"block\" \n              sx={{ \n                fontWeight: 'bold', \n                mb: 0.5, \n                fontFamily: 'DM Sans, sans-serif'\n              }}\n            >\n              Your Learning Growth\n            </Typography>\n            <Typography \n              variant=\"caption\" \n              display=\"block\"\n              sx={{ fontFamily: 'DM Sans, sans-serif' }}\n            >\n              <Box \n                component=\"span\" \n                sx={{ \n                  display: 'inline-block', \n                  width: 10, \n                  height: 10, \n                  borderRadius: '50%', \n                  backgroundColor: theme.palette.primary.main,\n                  mr: 1\n                }}\n              />\n              Mastered Skills\n            </Typography>\n            <Typography \n              variant=\"caption\" \n              display=\"block\"\n              sx={{ fontFamily: 'DM Sans, sans-serif' }}\n            >\n              <Box \n                component=\"span\" \n                sx={{ \n                  display: 'inline-block', \n                  width: 10, \n                  height: 10, \n                  borderRadius: '50%', \n                  backgroundColor: treeVitality.leafBaseColor,\n                  opacity: 0.7,\n                  mr: 1\n                }}\n              />\n              Skills In Progress\n            </Typography>\n          </Box>\n        </Box>\n        \n        <Typography \n          align=\"center\" \n          variant=\"body2\" \n          color=\"text.secondary\" \n          sx={{ \n            mt: 2,\n            fontFamily: 'DM Sans, sans-serif',\n            animation: animation ? 'fadeIn 1s ease-in-out' : 'none'\n          }}\n        >\n          You've mastered {masteredSkills.length} skills so far! Keep growing!\n        </Typography>\n      </Paper>\n    </animated.div>\n  );\n};\n\nexport default BonsaiTree;\n\n "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,GAAG,EAAEC,UAAU,EAAEC,KAAK,EAAEC,QAAQ,QAAiB,eAAe;AACzE,SAASC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,YAAY,EAAEC,QAAQ,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAgBnF;AACA,MAAMC,IAAI,GAAGA,CAACC,CAAS,EAAEC,CAAS,EAAEC,CAAS,KAAKF,CAAC,IAAI,CAAC,GAAGE,CAAC,CAAC,GAAGD,CAAC,GAAGC,CAAC;AACrE,MAAMC,KAAK,GAAGA,CAACC,GAAW,EAAEC,GAAW,EAAEC,GAAW,KAAKC,IAAI,CAACF,GAAG,CAACE,IAAI,CAACD,GAAG,CAACF,GAAG,EAAEC,GAAG,CAAC,EAAEC,GAAG,CAAC;AAC1F,MAAME,SAAS,GAAGA,CAACH,GAAW,EAAEC,GAAW,KAAKC,IAAI,CAACE,MAAM,CAAC,CAAC,IAAIH,GAAG,GAAGD,GAAG,CAAC,GAAGA,GAAG;;AAEjF;AACA,MAAMK,cAAc,GAAIC,QAAkB,IAAe;EACvD,IAAIC,YAAsB,GAAG,EAAE;EAC/B,KAAK,MAAMC,MAAM,IAAIF,QAAQ,EAAE;IAC7BC,YAAY,CAACE,IAAI,CAACD,MAAM,CAAC;IACzB,IAAIA,MAAM,CAACE,WAAW,IAAIF,MAAM,CAACE,WAAW,CAACC,MAAM,GAAG,CAAC,EAAE;MACvDJ,YAAY,GAAGA,YAAY,CAACK,MAAM,CAACP,cAAc,CAACG,MAAM,CAACE,WAAW,CAAC,CAAC;IACxE;EACF;EACA,OAAOH,YAAY;AACrB,CAAC;;AAED;;AA+BA,MAAMM,UAAqC,GAAGA,CAAC;EAAEC,MAAM;EAAEC,WAAW;EAAEC,mBAAmB,GAAG;AAAM,CAAC,KAAK;EAAAC,EAAA;EACtG,MAAMC,KAAK,GAAGhC,QAAQ,CAAC,CAAC;EACxB,MAAMiC,MAAM,GAAGrC,MAAM,CAAgB,IAAI,CAAC;EAC1C,MAAM,CAACsC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGxC,QAAQ,CAAW,EAAE,CAAC;EACtE,MAAM,CAACyC,WAAW,EAAEC,cAAc,CAAC,GAAG1C,QAAQ,CAAgB,IAAI,CAAC;EACnE,MAAM,CAAC2C,SAAS,EAAEC,YAAY,CAAC,GAAG5C,QAAQ,CAAU,KAAK,CAAC;EAC1D,MAAM,CAAC6C,WAAW,EAAEC,cAAc,CAAC,GAAG9C,QAAQ,CAAU,IAAI,CAAC;EAC7D,MAAM,CAAC+C,aAAa,EAAEC,gBAAgB,CAAC,GAAGhD,QAAQ,CAAgB,IAAI,CAAC;;EAEvE;EACA,MAAMiD,aAAa,GAAGhD,MAAM,CAAU,EAAE,CAAC;;EAEzC;EACA,MAAMiD,cAAc,GAAGjB,MAAM,CAACkB,MAAM,CAACC,KAAK,IAAIA,KAAK,CAACC,QAAQ,CAAC;EAC7D,MAAMC,iBAAiB,GAAGjC,IAAI,CAACkC,KAAK,CAAEL,cAAc,CAACpB,MAAM,GAAGI,WAAW,GAAI,GAAG,CAAC;;EAEjF;EACA,MAAMsB,cAAc,GAAG/C,YAAY,CAAC,CAAC;EACrC,MAAMgD,eAAe,GAAGhD,YAAY,CAAC,CAAC;EACtC,MAAMiD,aAAa,GAAGjD,YAAY,CAAC,CAAC;;EAEpC;EACA,MAAMkD,eAAe,GAAGrD,SAAS,CAAC;IAChCsD,MAAM,EAAEN,iBAAiB;IACzBO,IAAI,EAAE;MAAED,MAAM,EAAE;IAAE,CAAC;IACnBpD,MAAM,EAAE;MAAEsD,OAAO,EAAE,GAAG;MAAEC,QAAQ,EAAE;IAAG,CAAC;IACtCC,KAAK,EAAE;EACT,CAAC,CAAC;EAEF,MAAMC,UAAU,GAAG3D,SAAS,CAAC;IAC3B4D,GAAG,EAAEV,cAAc;IACnBK,IAAI,EAAE;MAAEM,gBAAgB,EAAE,IAAI;MAAEC,OAAO,EAAE;IAAI,CAAC;IAC9CC,EAAE,EAAE;MAAEF,gBAAgB,EAAE,CAAC;MAAEC,OAAO,EAAE;IAAE,CAAC;IACvC5D,MAAM,EAAE;MAAEsD,OAAO,EAAE,EAAE;MAAEC,QAAQ,EAAE,EAAE;MAAEO,QAAQ,EAAE;IAAK;EACtD,CAAC,CAAC;EAEF,MAAMC,WAAW,GAAGjE,SAAS,CAAC;IAC5B4D,GAAG,EAAET,eAAe;IACpBI,IAAI,EAAE;MAAEM,gBAAgB,EAAE,IAAI;MAAEC,OAAO,EAAE;IAAI,CAAC;IAC9CC,EAAE,EAAE;MAAEF,gBAAgB,EAAE,CAAC;MAAEC,OAAO,EAAE;IAAE,CAAC;IACvC5D,MAAM,EAAE;MAAEsD,OAAO,EAAE,EAAE;MAAEC,QAAQ,EAAE,EAAE;MAAEO,QAAQ,EAAE;IAAK;EACtD,CAAC,CAAC;EAEF,MAAME,SAAS,GAAGlE,SAAS,CAAC;IAC1B4D,GAAG,EAAER,aAAa;IAClBG,IAAI,EAAE;MAAEY,KAAK,EAAE,CAAC;MAAEL,OAAO,EAAE;IAAE,CAAC;IAC9BC,EAAE,EAAE;MAAEI,KAAK,EAAE,CAAC;MAAEL,OAAO,EAAE;IAAE,CAAC;IAC5B5D,MAAM,EAAE;MAAEsD,OAAO,EAAE,GAAG;MAAEC,QAAQ,EAAE,EAAE;MAAEO,QAAQ,EAAE;IAAI;EACtD,CAAC,CAAC;;EAEF;EACA5D,QAAQ,CACNmC,WAAW,GACP,CAACW,cAAc,EAAEC,eAAe,EAAEC,aAAa,CAAC,GAChD,EAAE,EACNb,WAAW,GACP,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,GACb,EACN,CAAC;EAED,MAAM6B,kBAAkB,GAAGpE,SAAS,CAAC;IACnCuD,IAAI,EAAE;MAAEO,OAAO,EAAE,CAAC;MAAEO,SAAS,EAAE;IAAmB,CAAC;IACnDN,EAAE,EAAE;MAAED,OAAO,EAAE,CAAC;MAAEO,SAAS,EAAE;IAAkB,CAAC;IAChDnE,MAAM,EAAEA,MAAM,CAACoE;EACjB,CAAC,CAAC;;EAEF;EACA,MAAMC,gBAAgB,GAAG5C,MAAM,CAAC6C,MAAM,CAAC,CAACC,GAAG,EAAE3B,KAAK,KAAK;IACnD,IAAI,CAAC2B,GAAG,CAAC3B,KAAK,CAAC4B,QAAQ,CAAC,EAAE;MACxBD,GAAG,CAAC3B,KAAK,CAAC4B,QAAQ,CAAC,GAAG,EAAE;IAC1B;IACAD,GAAG,CAAC3B,KAAK,CAAC4B,QAAQ,CAAC,CAACpD,IAAI,CAACwB,KAAK,CAAC;IAC/B,OAAO2B,GAAG;EACZ,CAAC,EAAE,CAAC,CAA4B,CAAC;;EAEnC;EACAhF,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAAC8C,WAAW,EAAE;MAChB,MAAMoC,eAAe,GAAGhC,aAAa,CAACiC,OAAO,CAC1C/B,MAAM,CAACC,KAAK,IAAIA,KAAK,CAACC,QAAQ,CAAC,CAC/B8B,GAAG,CAAC/B,KAAK,IAAIA,KAAK,CAACgC,EAAE,CAAC;MAEzB,MAAMC,kBAAkB,GAAGpD,MAAM,CAC9BkB,MAAM,CAACC,KAAK,IAAIA,KAAK,CAACC,QAAQ,CAAC,CAC/B8B,GAAG,CAAC/B,KAAK,IAAIA,KAAK,CAACgC,EAAE,CAAC;;MAEzB;MACA,MAAME,aAAa,GAAGD,kBAAkB,CAAClC,MAAM,CAACiC,EAAE,IAAI,CAACH,eAAe,CAACM,QAAQ,CAACH,EAAE,CAAC,CAAC;MAEpF,IAAIE,aAAa,CAACxD,MAAM,GAAG,CAAC,EAAE;QAC5BU,mBAAmB,CAAC8C,aAAa,CAAC;QAClC1C,YAAY,CAAC,IAAI,CAAC;;QAElB;QACA,MAAM4C,KAAK,GAAGC,UAAU,CAAC,MAAM;UAC7B7C,YAAY,CAAC,KAAK,CAAC;QACrB,CAAC,EAAE,IAAI,CAAC;QAER,OAAO,MAAM8C,YAAY,CAACF,KAAK,CAAC;MAClC;IACF,CAAC,MAAM;MACL1C,cAAc,CAAC,KAAK,CAAC;IACvB;IACA;IACAG,aAAa,CAACiC,OAAO,GAAG,CAAC,GAAGjD,MAAM,CAAC;EACrC,CAAC,EAAE,CAACA,MAAM,EAAEY,WAAW,CAAC,CAAC;;EAEzB;EACA,MAAM8C,YAAY,GAAG;IACnB;IACAC,cAAc,EAAEtC,iBAAiB,GAAG,EAAE,GAClC,SAAS,CAAC;IAAA,EACVA,iBAAiB,GAAG,EAAE,GACpB,SAAS,CAAC;IAAA,EACV,SAAS;IAAE;;IAEjB;IACAuC,UAAU,EAAE5E,KAAK,CAAC,EAAE,GAAIqC,iBAAiB,GAAG,CAAE,EAAE,EAAE,EAAE,EAAE,CAAC;IACvDwC,WAAW,EAAE7E,KAAK,CAAC,GAAG,GAAGqC,iBAAiB,EAAE,GAAG,EAAE,GAAG,CAAC;IAErD;IACAyC,QAAQ,EAAE9E,KAAK,CAAC,GAAG,GAAIqC,iBAAiB,GAAG,CAAE,EAAE,GAAG,EAAE,GAAG,CAAC;IACxD0C,SAAS,EAAE/E,KAAK,CAAC,EAAE,GAAIqC,iBAAiB,GAAG,EAAG,EAAE,EAAE,EAAE,EAAE,CAAC;IAEvD;IACA2C,aAAa,EAAE3C,iBAAiB,GAAG,EAAE,GACjC,SAAS,CAAC;IAAA,EACVA,iBAAiB,GAAG,EAAE,GACpB,SAAS,CAAC;IAAA,EACV,SAAS;IAAE;;IAEjB;IACAmB,KAAK,EAAExD,KAAK,CAAC,IAAI,GAAIqC,iBAAiB,GAAG,GAAI,EAAE,IAAI,EAAE,IAAI;EAC3D,CAAC;;EAED;EACA,MAAM4C,gBAAgB,GAAGA,CAAA,KAAgB;IACvC,MAAMC,UAAU,GAAGC,MAAM,CAACC,IAAI,CAACxB,gBAAgB,CAAC;IAChD,MAAMyB,YAAsB,GAAG,EAAE;;IAEjC;IACA,IAAIH,UAAU,CAACrE,MAAM,KAAK,CAAC,EAAE,OAAOwE,YAAY;;IAEhD;IACA,MAAMC,SAAS,GAAG,GAAG,GAAGZ,YAAY,CAACG,WAAW,GAAG,GAAG;IACtD,MAAMU,QAAQ,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAEH;IAAU,CAAC;;IAEzC;IACA,MAAMI,eAAe,GAAGR,UAAU,CAACrE,MAAM;IACzC,MAAM8E,UAAU,GAAG,EAAE;IAErB,IAAID,eAAe,KAAK,CAAC,EAAE;MACzB;MACAC,UAAU,CAAChF,IAAI,CAAC,CAACP,IAAI,CAACwF,EAAE,GAAC,CAAC,CAAC;IAC7B,CAAC,MAAM,IAAIF,eAAe,KAAK,CAAC,EAAE;MAChC;MACAC,UAAU,CAAChF,IAAI,CAAC,CAACP,IAAI,CAACwF,EAAE,GAAC,CAAC,GAAG,GAAG,CAAC;MACjCD,UAAU,CAAChF,IAAI,CAAC,CAACP,IAAI,CAACwF,EAAE,GAAC,CAAC,GAAG,GAAG,CAAC;IACnC,CAAC,MAAM;MACL;MACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,eAAe,EAAEG,CAAC,EAAE,EAAE;QACxC,MAAMC,KAAK,GAAGlG,IAAI,CAAC,CAACQ,IAAI,CAACwF,EAAE,GAAC,CAAC,GAAG,GAAG,EAAE,CAACxF,IAAI,CAACwF,EAAE,GAAC,CAAC,GAAG,GAAG,EAAEC,CAAC,IAAIH,eAAe,GAAG,CAAC,CAAC,CAAC;QACjFC,UAAU,CAAChF,IAAI,CAACmF,KAAK,CAAC;MACxB;IACF;;IAEA;IACA,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGX,UAAU,CAACrE,MAAM,EAAEgF,CAAC,EAAE,EAAE;MAC1C,MAAM9B,QAAQ,GAAGmB,UAAU,CAACW,CAAC,CAAC;MAC9B,MAAM7E,MAAM,GAAG4C,gBAAgB,CAACG,QAAQ,CAAC;;MAEzC;MACA,IAAI,CAAC/C,MAAM,IAAIA,MAAM,CAACH,MAAM,KAAK,CAAC,EAAE;;MAEpC;MACA,MAAMkF,SAAS,GAAGJ,UAAU,CAACE,CAAC,CAAC;MAC/B,MAAMC,KAAK,GAAGC,SAAS,GAAG1F,SAAS,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC;;MAE9C;MACA,MAAM2F,cAAc,GAAGpC,gBAAgB,CAACG,QAAQ,CAAC,IAAI,EAAE;MACvD,MAAMkC,kBAAkB,GAAGD,cAAc,CAAC9D,MAAM,CAACgE,CAAC,IAAIA,CAAC,CAAC9D,QAAQ,CAAC,CAACvB,MAAM;MACxE,MAAMsF,oBAAoB,GAAGH,cAAc,CAACnF,MAAM,GAAG,CAAC,GAClDoF,kBAAkB,GAAGD,cAAc,CAACnF,MAAM,GAC1C,CAAC;;MAEL;MACA,MAAMuF,SAAS,GAAG,EAAE,GAAIpF,MAAM,CAACH,MAAM,GAAG,CAAE;MAC1C,MAAMwF,SAAS,GAAG,GAAG,GAAIrF,MAAM,CAACH,MAAM,GAAG,CAAE;MAC3C,MAAMyF,YAAY,GAAG1G,IAAI,CAACwG,SAAS,EAAEC,SAAS,EAAEF,oBAAoB,CAAC;;MAErE;MACA,MAAMI,eAAe,GAAG;QACtBf,CAAC,EAAEpF,IAAI,CAACoG,GAAG,CAACV,KAAK,CAAC;QAClBL,CAAC,EAAErF,IAAI,CAACqG,GAAG,CAACX,KAAK;MACnB,CAAC;;MAED;MACA,MAAMY,QAAQ,GAAG;QACflB,CAAC,EAAED,QAAQ,CAACC,CAAC,GAAGe,eAAe,CAACf,CAAC,GAAGc,YAAY;QAChDb,CAAC,EAAEF,QAAQ,CAACE,CAAC,GAAGc,eAAe,CAACd,CAAC,GAAGa;MACtC,CAAC;;MAED;MACA,MAAMK,aAAa,GAAG;QACpBnB,CAAC,EAAED,QAAQ,CAACC,CAAC,GAAGe,eAAe,CAACf,CAAC,GAAGc,YAAY,GAAG,GAAG;QACtDb,CAAC,EAAEF,QAAQ,CAACE,CAAC,GAAGc,eAAe,CAACd,CAAC,GAAGa,YAAY,GAAG,GAAG,GAAG;MAC3D,CAAC;MAED,MAAMM,aAAa,GAAG;QACpBpB,CAAC,EAAED,QAAQ,CAACC,CAAC,GAAGe,eAAe,CAACf,CAAC,GAAGc,YAAY,GAAG,GAAG;QACtDb,CAAC,EAAEF,QAAQ,CAACE,CAAC,GAAGc,eAAe,CAACd,CAAC,GAAGa,YAAY,GAAG,GAAG,GAAG;MAC3D,CAAC;;MAED;MACA,MAAMO,SAAS,GAAG,CAAC,IAAI,GAAG,GAAIV,oBAAoB,GAAG,GAAI,CAAC;MAE1D,MAAMW,UAAkB,GAAG;QACzB3C,EAAE,EAAE,UAAU0B,CAAC,EAAE;QACjB9B,QAAQ;QACRgD,KAAK,EAAExB,QAAQ;QACfyB,GAAG,EAAEN,QAAQ;QACbO,QAAQ,EAAEN,aAAa;QACvBO,QAAQ,EAAEN,aAAa;QACvBC,SAAS;QACTf,KAAK;QACLqB,YAAY,EAAEhB,oBAAoB;QAClCiB,KAAK,EAAE,CAAC;QACRpG,MAAM,EAAE,EAAE;QACVJ,WAAW,EAAE,EAAE;QACfyG,UAAU,EAAE,UAAUxB,CAAC;MACzB,CAAC;;MAED;MACA,MAAMjF,WAAW,GAAG0G,mBAAmB,CAACR,UAAU,EAAE9F,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;MACjE8F,UAAU,CAAClG,WAAW,GAAGA,WAAW;MAEpCyE,YAAY,CAAC1E,IAAI,CAACmG,UAAU,CAAC;IAC/B;IAEA,OAAOzB,YAAY;EACrB,CAAC;;EAED;EACA,MAAMiC,mBAAmB,GAAGA,CAACC,YAAoB,EAAEvG,MAAe,EAAEwG,WAAmB,EAAEJ,KAAa,KAAe;IACnH,IAAIA,KAAK,GAAG,CAAC,IAAIpG,MAAM,CAACH,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;;IAEjD,MAAML,QAAkB,GAAG,EAAE;IAC7B,MAAMiH,WAAW,GAAGrH,IAAI,CAACF,GAAG,CAACsH,WAAW,EAAExG,MAAM,CAACH,MAAM,CAAC;IACxD,MAAM6G,eAAe,GAAGtH,IAAI,CAACuH,IAAI,CAAC3G,MAAM,CAACH,MAAM,GAAG4G,WAAW,CAAC;IAE9D,KAAK,IAAI5B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4B,WAAW,EAAE5B,CAAC,EAAE,EAAE;MACpC;MACA,MAAM+B,QAAQ,GAAG/B,CAAC,GAAG6B,eAAe;MACpC,MAAMG,MAAM,GAAGzH,IAAI,CAACF,GAAG,CAAC0H,QAAQ,GAAGF,eAAe,EAAE1G,MAAM,CAACH,MAAM,CAAC;MAClE,MAAMiH,YAAY,GAAG9G,MAAM,CAAC+G,KAAK,CAACH,QAAQ,EAAEC,MAAM,CAAC;MAEnD,IAAIC,YAAY,CAACjH,MAAM,KAAK,CAAC,EAAE;;MAE/B;MACA,MAAMmH,gBAAgB,GAAGF,YAAY,CAAC5F,MAAM,CAACgE,CAAC,IAAIA,CAAC,CAAC9D,QAAQ,CAAC,CAACvB,MAAM;MACpE,MAAMoH,kBAAkB,GAAGD,gBAAgB,GAAGF,YAAY,CAACjH,MAAM;;MAEjE;MACA,MAAMkF,SAAS,GAAGwB,YAAY,CAACzB,KAAK;;MAEpC;MACA,MAAMoC,SAAS,GAAGrC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAGxF,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC,GAAGA,SAAS,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;;MAE3E;MACA,MAAM8H,WAAW,GAAGf,KAAK,GAAG,GAAG;MAC/B,MAAMgB,QAAQ,GAAGrC,SAAS,GAAGmC,SAAS,IAAI,CAAC,GAAGC,WAAW,CAAC;;MAE1D;MACA,MAAME,WAAW,GAAG,CAAC,GAAIjB,KAAK,GAAG,GAAI;MACrC,MAAMd,YAAY,GAAG,CAAC,EAAE,GAAIwB,YAAY,CAACjH,MAAM,GAAG,CAAE,IAAIwH,WAAW;;MAEnE;MACA,MAAM9B,eAAe,GAAG;QACtBf,CAAC,EAAEpF,IAAI,CAACoG,GAAG,CAAC4B,QAAQ,CAAC;QACrB3C,CAAC,EAAErF,IAAI,CAACqG,GAAG,CAAC2B,QAAQ;MACtB,CAAC;;MAED;MACA,MAAMrI,CAAC,GAAG,GAAG,GAAI8F,CAAC,GAAG4B,WAAW,GAAI,GAAG,CAAC,CAAC;MACzC,MAAMa,EAAE,GAAGf,YAAY,CAACR,KAAK;MAC7B,MAAMwB,EAAE,GAAGhB,YAAY,CAACN,QAAQ;MAChC,MAAMuB,EAAE,GAAGjB,YAAY,CAACL,QAAQ;MAChC,MAAMuB,EAAE,GAAGlB,YAAY,CAACP,GAAG;;MAE3B;MACA,MAAM0B,EAAE,GAAG,CAAC,GAAG3I,CAAC;MAChB,MAAM4I,IAAI,GAAGD,EAAE,GAAGA,EAAE;MACpB,MAAME,IAAI,GAAGD,IAAI,GAAGD,EAAE;MACtB,MAAMG,GAAG,GAAG9I,CAAC,GAAGA,CAAC;MACjB,MAAM+I,GAAG,GAAGD,GAAG,GAAG9I,CAAC;MAEnB,MAAMgJ,MAAM,GAAGH,IAAI,GAAGN,EAAE,CAAC9C,CAAC,GAAG,CAAC,GAAGmD,IAAI,GAAG5I,CAAC,GAAGwI,EAAE,CAAC/C,CAAC,GAAG,CAAC,GAAGkD,EAAE,GAAGG,GAAG,GAAGL,EAAE,CAAChD,CAAC,GAAGsD,GAAG,GAAGL,EAAE,CAACjD,CAAC;MACnF,MAAMwD,MAAM,GAAGJ,IAAI,GAAGN,EAAE,CAAC7C,CAAC,GAAG,CAAC,GAAGkD,IAAI,GAAG5I,CAAC,GAAGwI,EAAE,CAAC9C,CAAC,GAAG,CAAC,GAAGiD,EAAE,GAAGG,GAAG,GAAGL,EAAE,CAAC/C,CAAC,GAAGqD,GAAG,GAAGL,EAAE,CAAChD,CAAC;MACnF,MAAMsB,KAAK,GAAG;QAAEvB,CAAC,EAAEuD,MAAM;QAAEtD,CAAC,EAAEuD;MAAO,CAAC;;MAEtC;MACA,MAAMhC,GAAG,GAAG;QACVxB,CAAC,EAAEuB,KAAK,CAACvB,CAAC,GAAGe,eAAe,CAACf,CAAC,GAAGc,YAAY;QAC7Cb,CAAC,EAAEsB,KAAK,CAACtB,CAAC,GAAGc,eAAe,CAACd,CAAC,GAAGa;MACnC,CAAC;;MAED;MACA,MAAMW,QAAQ,GAAG;QACfzB,CAAC,EAAEuB,KAAK,CAACvB,CAAC,GAAGe,eAAe,CAACf,CAAC,GAAGc,YAAY,GAAG,GAAG;QACnDb,CAAC,EAAEsB,KAAK,CAACtB,CAAC,GAAGc,eAAe,CAACd,CAAC,GAAGa,YAAY,GAAG,GAAG,GAAG;MACxD,CAAC;MAED,MAAMY,QAAQ,GAAG;QACf1B,CAAC,EAAEuB,KAAK,CAACvB,CAAC,GAAGe,eAAe,CAACf,CAAC,GAAGc,YAAY,GAAG,GAAG;QACnDb,CAAC,EAAEsB,KAAK,CAACtB,CAAC,GAAGc,eAAe,CAACd,CAAC,GAAGa,YAAY,GAAG,GAAG,GAAG;MACxD,CAAC;;MAED;MACA,MAAM2C,cAAc,GAAG,CAAC,GAAI7B,KAAK,GAAG,IAAK;MACzC,MAAMP,SAAS,GAAGU,YAAY,CAACV,SAAS,GAAG,GAAG,GAAGoC,cAAc;MAE/D,MAAMvI,MAAc,GAAG;QACrByD,EAAE,EAAE,GAAGoD,YAAY,CAACpD,EAAE,QAAQ0B,CAAC,EAAE;QACjC9B,QAAQ,EAAEwD,YAAY,CAACxD,QAAQ;QAC/BgD,KAAK;QACLC,GAAG;QACHC,QAAQ;QACRC,QAAQ;QACRL,SAAS;QACTf,KAAK,EAAEsC,QAAQ;QACfjB,YAAY,EAAEc,kBAAkB;QAChCb,KAAK;QACLpG,MAAM,EAAE8G,YAAY;QACpBlH,WAAW,EAAE,EAAE;QACfyG,UAAU,EAAE,GAAGE,YAAY,CAACpD,EAAE,QAAQ0B,CAAC;MACzC,CAAC;;MAED;MACA,IAAIuB,KAAK,GAAG,CAAC,IAAIU,YAAY,CAACjH,MAAM,GAAG,CAAC,EAAE;QACxC,MAAMqI,kBAAkB,GAAG5B,mBAAmB,CAC5C5G,MAAM,EACNoH,YAAY,EACZ1H,IAAI,CAACD,GAAG,CAAC,CAAC,EAAE2H,YAAY,CAACjH,MAAM,GAAG,CAAC,CAAC,EACpCuG,KAAK,GAAG,CACV,CAAC;QACD1G,MAAM,CAACE,WAAW,GAAGsI,kBAAkB;MACzC;MAEA1I,QAAQ,CAACG,IAAI,CAACD,MAAM,CAAC;IACvB;IAEA,OAAOF,QAAQ;EACjB,CAAC;;EAED;EACA,MAAM6E,YAAY,GAAGJ,gBAAgB,CAAC,CAAC;EACvC,MAAMkE,kBAAkB,GAAG5I,cAAc,CAAC8E,YAAY,CAAC;;EAEvD;EACA,MAAM+D,cAAc,GAAI5I,QAAkB,IAAK;IAC7C,OAAOA,QAAQ,CAAC6I,OAAO,CAAC,CAAC3I,MAAM,EAAE4I,KAAK,KAAK,cACzC3J,OAAA;MAEE4J,YAAY,EAAEA,CAAA,KAAMxH,gBAAgB,CAACrB,MAAM,CAACyD,EAAE,CAAE;MAChDqF,YAAY,EAAEA,CAAA,KAAMzH,gBAAgB,CAAC,IAAI,CAAE;MAAA0H,QAAA,gBAE3C9J,OAAA,CAACL,QAAQ,CAACoK,IAAI;QACZvF,EAAE,EAAEzD,MAAM,CAACyD,EAAG;QACdwF,CAAC,EAAE;AACb,eAAejJ,MAAM,CAACqG,KAAK,CAACvB,CAAC,KAAK9E,MAAM,CAACqG,KAAK,CAACtB,CAAC;AAChD,eAAe/E,MAAM,CAACuG,QAAQ,CAACzB,CAAC,KAAK9E,MAAM,CAACuG,QAAQ,CAACxB,CAAC;AACtD,eAAe/E,MAAM,CAACwG,QAAQ,CAAC1B,CAAC,KAAK9E,MAAM,CAACwG,QAAQ,CAACzB,CAAC;AACtD,eAAe/E,MAAM,CAACsG,GAAG,CAACxB,CAAC,KAAK9E,MAAM,CAACsG,GAAG,CAACvB,CAAC;AAC5C,WAAY;QACFmE,IAAI,EAAC,MAAM;QACXC,MAAM,EAAE,QAAQnJ,MAAM,CAAC2G,UAAU,GAAI;QACrCyC,WAAW,EAAEpJ,MAAM,CAACmG,SAAU;QAC9BkD,aAAa,EAAC,OAAO;QACrBC,KAAK,EAAE;UACLtG,SAAS,EAAE5B,aAAa,KAAKpB,MAAM,CAACyD,EAAE,GAClC,aAAa,GACb,UAAU;UACd8F,eAAe,EAAE,GAAGvJ,MAAM,CAACqG,KAAK,CAACvB,CAAC,MAAM9E,MAAM,CAACqG,KAAK,CAACtB,CAAC,IAAI;UAC1DyE,UAAU,EAAE,qBAAqB;UACjC,GAAG5G;QACL;MAAE;QAAA6G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAGD5J,MAAM,CAACM,MAAM,CAACkD,GAAG,CAAC,CAAC/B,KAAK,EAAEoI,UAAU,KAAK;QACxC,MAAMC,IAAI,GAAGC,uBAAuB,CAAC/J,MAAM,EAAEyB,KAAK,EAAEoI,UAAU,CAAC;QAC/D,oBACE5K,OAAA;UAEEwE,EAAE,EAAE,QAAQhC,KAAK,CAACgC,EAAE,EAAG;UACvBqB,CAAC,EAAEgF,IAAI,CAAChF,CAAC,GAAG,EAAG;UACfC,CAAC,EAAE+E,IAAI,CAAC/E,CAAC,GAAG,EAAG;UACfiF,KAAK,EAAE,EAAG;UACVC,MAAM,EAAE,EAAG;UACXX,KAAK,EAAE;YACLY,QAAQ,EAAE,SAAS;YACnBV,UAAU,EAAE,eAAe;YAC3BhI,MAAM,EAAEsI,IAAI,CAACK,kBAAkB,GAAG,iBAAiB,GAAG,MAAM;YAC5DnH,SAAS,EAAE5B,aAAa,KAAKpB,MAAM,CAACyD,EAAE,GAClC,yBAAyB,GACzB;UACN,CAAE;UACFoF,YAAY,EAAEA,CAAA,KAAM9H,cAAc,CAACU,KAAK,CAACgC,EAAE,CAAE;UAC7CqF,YAAY,EAAEA,CAAA,KAAM/H,cAAc,CAAC,IAAI,CAAE;UAAAgI,QAAA,eAEzC9J,OAAA;YACE+K,KAAK,EAAC,IAAI;YACVC,MAAM,EAAC,IAAI;YACXG,OAAO,EAAC,eAAe;YACvBd,KAAK,EAAE;cACLY,QAAQ,EAAE;YACZ,CAAE;YAAAnB,QAAA,eAEF9J,OAAA,CAACL,QAAQ,CAACyL,CAAC;cACTrH,SAAS,EAAE,UAAU8G,IAAI,CAAC1E,KAAK,GAAG,GAAG,GAAG1F,IAAI,CAACwF,EAAE,GAAI;cACnDoE,KAAK,EAAE;gBACL,GAAGzG;cACL,CAAE;cAAAkG,QAAA,gBAEF9J,OAAA;gBACEgK,CAAC,EAAC,8HAA8H;gBAChIC,IAAI,EAAEzH,KAAK,CAACC,QAAQ,GAChBhB,KAAK,CAAC4J,OAAO,CAACC,OAAO,CAACC,IAAI,GAC1B,OAAO,GAAG,GAAI/I,KAAK,CAACgJ,YAAY,GAAG,CAAE,KAAK,EAAE,GAAGhJ,KAAK,CAACgJ,YAAY,GAAG,CAAC,MAAM,EAAE,GAAGhJ,KAAK,CAACgJ,YAAY,GAAG,CAAC,IACzG;gBACDhI,OAAO,EAAEhB,KAAK,CAACC,QAAQ,GAAG,CAAC,GAAG,GAAG,GAAID,KAAK,CAACgJ,YAAY,GAAG,GAAK;gBAC/DC,SAAS,EAAEZ,IAAI,CAACK,kBAAkB,GAAG,YAAY,GAAG,EAAG;gBACvDnH,SAAS,EAAE,SAAS8G,IAAI,CAACa,IAAI,GAAG,EAAE;cAAI;gBAAAlB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvC,CAAC,eAEF3K,OAAA;gBACEgK,CAAC,EAAC,8BAA8B;gBAChCC,IAAI,EAAC,MAAM;gBACXC,MAAM,EAAE1H,KAAK,CAACC,QAAQ,GAClB,uBAAuB,GACvB,uBACH;gBACD0H,WAAW,EAAC,KAAK;gBACjBpG,SAAS,EAAE,SAAS8G,IAAI,CAACa,IAAI,GAAG,EAAE,GAAI;gBACtClI,OAAO,EAAE;cAAI;gBAAAgH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACd,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACQ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV;QAAC,GAtDD,QAAQnI,KAAK,CAACgC,EAAE,EAAE;UAAAgG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAuDV,CAAC;MAEpB,CAAC,CAAC,EAGD5J,MAAM,CAACE,WAAW,IAAIwI,cAAc,CAAC1I,MAAM,CAACE,WAAW,CAAC;IAAA,GA3FpDF,MAAM,CAACyD,EAAE;MAAAgG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OA4Fb,CAAC,CACL,CAAC;EACJ,CAAC;;EAED;EACA,MAAMG,uBAAuB,GAAGA,CAAC/J,MAAc,EAAEyB,KAAY,EAAEmH,KAAa,KAAsB;IAChG,MAAMtI,MAAM,GAAGN,MAAM,CAACM,MAAM;IAC5B,MAAMC,WAAW,GAAGD,MAAM,CAACH,MAAM;;IAEjC;IACA;IACA,MAAMd,CAAC,GAAGC,KAAK,CAAC,GAAG,GAAI,CAACsJ,KAAK,GAAG,CAAC,KAAKrI,WAAW,GAAG,CAAC,CAAC,GAAI,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC;;IAEzE;IACA,MAAMqH,EAAE,GAAG5H,MAAM,CAACqG,KAAK;IACvB,MAAMwB,EAAE,GAAG7H,MAAM,CAACuG,QAAQ;IAC1B,MAAMuB,EAAE,GAAG9H,MAAM,CAACwG,QAAQ;IAC1B,MAAMuB,EAAE,GAAG/H,MAAM,CAACsG,GAAG;;IAErB;IACA;IACA,MAAM0B,EAAE,GAAG,CAAC,GAAG3I,CAAC;IAChB,MAAM4I,IAAI,GAAGD,EAAE,GAAGA,EAAE;IACpB,MAAME,IAAI,GAAGD,IAAI,GAAGD,EAAE;IACtB,MAAMG,GAAG,GAAG9I,CAAC,GAAGA,CAAC;IACjB,MAAM+I,GAAG,GAAGD,GAAG,GAAG9I,CAAC;IAEnB,MAAMyF,CAAC,GAAGoD,IAAI,GAAGN,EAAE,CAAC9C,CAAC,GAAG,CAAC,GAAGmD,IAAI,GAAG5I,CAAC,GAAGwI,EAAE,CAAC/C,CAAC,GAAG,CAAC,GAAGkD,EAAE,GAAGG,GAAG,GAAGL,EAAE,CAAChD,CAAC,GAAGsD,GAAG,GAAGL,EAAE,CAACjD,CAAC;IAC9E,MAAMC,CAAC,GAAGmD,IAAI,GAAGN,EAAE,CAAC7C,CAAC,GAAG,CAAC,GAAGkD,IAAI,GAAG5I,CAAC,GAAGwI,EAAE,CAAC9C,CAAC,GAAG,CAAC,GAAGiD,EAAE,GAAGG,GAAG,GAAGL,EAAE,CAAC/C,CAAC,GAAGqD,GAAG,GAAGL,EAAE,CAAChD,CAAC;;IAE9E;IACA,MAAM6F,QAAQ,GAAG,CAAC,CAAC,GAAG3C,IAAI,GAAGL,EAAE,CAAC9C,CAAC,GAAG,CAAC,GAAGmD,IAAI,GAAGJ,EAAE,CAAC/C,CAAC,GAAG,CAAC,GAAGkD,EAAE,GAAG3I,CAAC,GAAGwI,EAAE,CAAC/C,CAAC,GAC1D,CAAC,GAAGkD,EAAE,GAAG3I,CAAC,GAAGyI,EAAE,CAAChD,CAAC,GAAG,CAAC,GAAGqD,GAAG,GAAGL,EAAE,CAAChD,CAAC,GAAG,CAAC,GAAGqD,GAAG,GAAGJ,EAAE,CAACjD,CAAC;IAChE,MAAM+F,QAAQ,GAAG,CAAC,CAAC,GAAG5C,IAAI,GAAGL,EAAE,CAAC7C,CAAC,GAAG,CAAC,GAAGkD,IAAI,GAAGJ,EAAE,CAAC9C,CAAC,GAAG,CAAC,GAAGiD,EAAE,GAAG3I,CAAC,GAAGwI,EAAE,CAAC9C,CAAC,GAC1D,CAAC,GAAGiD,EAAE,GAAG3I,CAAC,GAAGyI,EAAE,CAAC/C,CAAC,GAAG,CAAC,GAAGoD,GAAG,GAAGL,EAAE,CAAC/C,CAAC,GAAG,CAAC,GAAGoD,GAAG,GAAGJ,EAAE,CAAChD,CAAC;;IAEhE;IACA,MAAM+F,aAAa,GAAGpL,IAAI,CAACqL,IAAI,CAACH,QAAQ,GAAGA,QAAQ,GAAGC,QAAQ,GAAGA,QAAQ,CAAC;IAC1E,MAAMG,kBAAkB,GAAGJ,QAAQ,GAAGE,aAAa;IACnD,MAAMG,kBAAkB,GAAGJ,QAAQ,GAAGC,aAAa;;IAEnD;IACA,MAAMI,KAAK,GAAG,CAACD,kBAAkB;IACjC,MAAME,KAAK,GAAGH,kBAAkB;;IAEhC;IACA;IACA,MAAMI,IAAI,GAAGxC,KAAK,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;;IAErC;IACA,MAAMyC,MAAM,GAAK5J,KAAK,CAACgJ,YAAY,GAAG,GAAG,GAAI,CAAC,GAAI,CAAC;;IAEnD;IACA,IAAIa,KAAK,GAAGxG,CAAC,GAAGsG,IAAI,GAAGF,KAAK,GAAGG,MAAM;IACrC,IAAIE,KAAK,GAAGxG,CAAC,GAAGqG,IAAI,GAAGD,KAAK,GAAGE,MAAM;;IAErC;IACAC,KAAK,IAAI3L,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IACzB4L,KAAK,IAAI5L,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;;IAEzB;IACA,MAAM6L,QAAQ,GAAG,CAAC;IAClB,MAAMC,YAAY,GAAGhK,KAAK,CAACC,QAAQ,GAAG,CAAC,GAAID,KAAK,CAACgJ,YAAY,GAAG,EAAG;IACnE,MAAME,IAAI,GAAGa,QAAQ,GAAGC,YAAY;;IAEpC;IACA,MAAMC,GAAG,GAAG,GAAG,GAAIjK,KAAK,CAACgJ,YAAY,GAAG,CAAE;IAE1C,OAAO;MACL3F,CAAC,EAAEwG,KAAK;MACRvG,CAAC,EAAEwG,KAAK;MACRZ,IAAI;MACJ;MACAvF,KAAK,EAAE1F,IAAI,CAACiM,KAAK,CAACR,KAAK,EAAED,KAAK,CAAC,GAAIE,IAAI,GAAG1L,IAAI,CAACwF,EAAE,GAAG,CAAE,GAAGvF,SAAS,CAAC,CAACD,IAAI,CAACwF,EAAE,GAAG,EAAE,EAAExF,IAAI,CAACwF,EAAE,GAAG,EAAE,CAAC;MAC/FiF,kBAAkB,EAAEvJ,gBAAgB,CAACgD,QAAQ,CAACnC,KAAK,CAACgC,EAAE,CAAC,IAAIhC,KAAK,CAACC,QAAQ;MACzEgK;IACF,CAAC;EACH,CAAC;;EAED;EACAtN,SAAS,CAAC,MAAM;IACd,IAAI,CAACuC,MAAM,CAAC4C,OAAO,IAAIoB,YAAY,CAACxE,MAAM,KAAK,CAAC,EAAE;;IAElD;IACA,IAAIe,WAAW,EAAE;IAEjB,IAAIF,SAAS,EAAE;MACb;MACA,MAAM4K,GAAG,GAAGjL,MAAM,CAAC4C,OAAO;;MAE1B;MACA,MAAMsI,KAAK,GAAGD,GAAG,CAACE,aAAa,CAAC,aAAa,CAAC;MAC9C,IAAID,KAAK,EAAE;QACTA,KAAK,CAACE,SAAS,CAACC,GAAG,CAAC,cAAc,CAAC;QACnCH,KAAK,CAACI,gBAAgB,CAAC,cAAc,EAAE,MAAM;UAC3CJ,KAAK,CAACE,SAAS,CAACG,MAAM,CAAC,cAAc,CAAC;QACxC,CAAC,EAAE;UAAEC,IAAI,EAAE;QAAK,CAAC,CAAC;MACpB;;MAEA;MACAxH,YAAY,CAACyH,OAAO,CAAC,CAACpM,MAAM,EAAEmF,CAAC,KAAK;QAClC,MAAMkH,aAAa,GAAGT,GAAG,CAACE,aAAa,CAAC,IAAI9L,MAAM,CAACyD,EAAE,EAAE,CAAC;QACxD,IAAI4I,aAAa,EAAE;UACjBA,aAAa,CAACN,SAAS,CAACC,GAAG,CAAC,cAAc,CAAC;UAC3CK,aAAa,CAACC,YAAY,CAAC,OAAO,EAAE,oBAAoBnH,CAAC,GAAG,GAAG,GAAG,CAAC;UACnEkH,aAAa,CAACJ,gBAAgB,CAAC,cAAc,EAAE,MAAM;YACnDI,aAAa,CAACN,SAAS,CAACG,MAAM,CAAC,cAAc,CAAC;YAC9CG,aAAa,CAACE,eAAe,CAAC,OAAO,CAAC;UACxC,CAAC,EAAE;YAAEJ,IAAI,EAAE;UAAK,CAAC,CAAC;QACpB;MACF,CAAC,CAAC;;MAEF;MACAvL,gBAAgB,CAACwL,OAAO,CAACI,OAAO,IAAI;QAClC,MAAMC,WAAW,GAAGb,GAAG,CAACE,aAAa,CAAC,SAASU,OAAO,EAAE,CAAC;QACzD,IAAIC,WAAW,EAAE;UACfA,WAAW,CAACV,SAAS,CAACC,GAAG,CAAC,mBAAmB,CAAC;UAC9CS,WAAW,CAACR,gBAAgB,CAAC,cAAc,EAAE,MAAM;YACjDQ,WAAW,CAACV,SAAS,CAACG,MAAM,CAAC,mBAAmB,CAAC;UACnD,CAAC,EAAE;YAAEC,IAAI,EAAE;UAAK,CAAC,CAAC;QACpB;MACF,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACnL,SAAS,EAAE2D,YAAY,EAAE/D,gBAAgB,EAAEM,WAAW,CAAC,CAAC;;EAE5D;EACA,MAAMwL,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI,CAAC5L,WAAW,EAAE,OAAO,IAAI;IAE7B,MAAMW,KAAK,GAAGnB,MAAM,CAACqM,IAAI,CAACnH,CAAC,IAAIA,CAAC,CAAC/B,EAAE,KAAK3C,WAAW,CAAC;IACpD,IAAI,CAACW,KAAK,EAAE,OAAO,IAAI;;IAEvB;IACA,IAAImL,QAAQ,GAAG,CAAC;IAChB,IAAIC,QAAQ,GAAG,CAAC;IAChB,IAAIC,KAAK,GAAG,KAAK;;IAEjB;IACA,MAAMC,mBAAmB,GAAIjN,QAAkB,IAAK;MAClD,KAAK,MAAME,MAAM,IAAIF,QAAQ,EAAE;QAC7B,MAAM+J,UAAU,GAAG7J,MAAM,CAACM,MAAM,CAAC0M,SAAS,CAACxH,CAAC,IAAIA,CAAC,CAAC/B,EAAE,KAAKhC,KAAK,CAACgC,EAAE,CAAC;QAClE,IAAIoG,UAAU,IAAI,CAAC,EAAE;UACnB,MAAMC,IAAI,GAAGC,uBAAuB,CAAC/J,MAAM,EAAEyB,KAAK,EAAEoI,UAAU,CAAC;UAC/D+C,QAAQ,GAAG9C,IAAI,CAAChF,CAAC;UACjB+H,QAAQ,GAAG/C,IAAI,CAAC/E,CAAC;UACjB+H,KAAK,GAAG,IAAI;UACZ,OAAO,IAAI;QACb;;QAEA;QACA,IAAI9M,MAAM,CAACE,WAAW,IAAIF,MAAM,CAACE,WAAW,CAACC,MAAM,GAAG,CAAC,EAAE;UACvD,IAAI4M,mBAAmB,CAAC/M,MAAM,CAACE,WAAW,CAAC,EAAE;YAC3C,OAAO,IAAI;UACb;QACF;MACF;MACA,OAAO,KAAK;IACd,CAAC;IAED6M,mBAAmB,CAACpI,YAAY,CAAC;IAEjC,IAAI,CAACmI,KAAK,EAAE,OAAO,IAAI;IAEvB,oBACE7N,OAAA;MAAA8J,QAAA,gBACE9J,OAAA;QACE6F,CAAC,EAAE8H,QAAQ,GAAG,EAAG;QACjB7H,CAAC,EAAE8H,QAAQ,GAAG,EAAG;QACjB7C,KAAK,EAAC,KAAK;QACXC,MAAM,EAAC,IAAI;QACXgD,EAAE,EAAC,GAAG;QACNC,EAAE,EAAC,GAAG;QACNhE,IAAI,EAAC,wBAAwB;QAC7BC,MAAM,EAAEzI,KAAK,CAAC4J,OAAO,CAACC,OAAO,CAACC,IAAK;QACnCpB,WAAW,EAAC,GAAG;QACf5H,MAAM,EAAC;MAA0C;QAAAiI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClD,CAAC,eACF3K,OAAA;QACE6F,CAAC,EAAE8H,QAAS;QACZ7H,CAAC,EAAE8H,QAAQ,GAAG,EAAG;QACjBM,UAAU,EAAC,QAAQ;QACnBC,gBAAgB,EAAC,QAAQ;QACzBlE,IAAI,EAAExI,KAAK,CAAC4J,OAAO,CAAC+C,IAAI,CAAC9C,OAAQ;QACjC+C,QAAQ,EAAC,IAAI;QACbC,UAAU,EAAC,qBAAqB;QAAAxE,QAAA,EAE/BtH,KAAK,CAAC+L;MAAI;QAAA/D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACP,CAAC,EACNnI,KAAK,CAACC,QAAQ,iBACbzC,OAAA;QACE6F,CAAC,EAAE8H,QAAS;QACZ7H,CAAC,EAAE8H,QAAQ,GAAG,EAAG;QACjBM,UAAU,EAAC,QAAQ;QACnBC,gBAAgB,EAAC,QAAQ;QACzBlE,IAAI,EAAExI,KAAK,CAAC4J,OAAO,CAACmD,OAAO,CAACjD,IAAK;QACjC8C,QAAQ,EAAC,GAAG;QACZC,UAAU,EAAC,qBAAqB;QAChCG,UAAU,EAAC,MAAM;QAAA3E,QAAA,EAClB;MAED;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CACP;IAAA,GArCK,WAAWnI,KAAK,CAACgC,EAAE,EAAE;MAAAgG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAsC1B,CAAC;EAER,CAAC;EAED,oBACE3K,OAAA,CAACL,QAAQ,CAAC+O,GAAG;IAACrE,KAAK,EAAEvG,kBAAmB;IAAAgG,QAAA,eACtC9J,OAAA,CAACR,KAAK;MACJmP,SAAS,EAAE,CAAE;MACblD,SAAS,EAAC,gBAAgB;MAC1BmD,EAAE,EAAE;QACFC,CAAC,EAAE,CAAC;QACJC,EAAE,EAAE,CAAC;QACLC,QAAQ,EAAE,UAAU;QACpB9D,QAAQ,EAAE,QAAQ;QAClB+D,YAAY,EAAE,KAAK;QACnBC,UAAU,EAAE,0EAA0E;QACtFC,SAAS,EAAE,iCAAiC;QAC5CC,cAAc,EAAE,YAAY;QAC5BC,MAAM,EAAE,kCAAkC;QAC1C7E,UAAU,EAAE;MACd,CAAE;MAAAT,QAAA,gBAEF9J,OAAA,CAACT,UAAU;QACT8P,OAAO,EAAC,IAAI;QACZC,YAAY;QACZC,KAAK,EAAC,QAAQ;QACdX,EAAE,EAAE;UACFN,UAAU,EAAE,qBAAqB;UACjCG,UAAU,EAAE,MAAM;UAClBe,KAAK,EAAE/N,KAAK,CAAC4J,OAAO,CAACC,OAAO,CAACC,IAAI;UACjCuD,EAAE,EAAE;QACN,CAAE;QAAAhF,QAAA,EACH;MAED;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,eAEb3K,OAAA,CAACV,GAAG;QAACsP,EAAE,EAAE;UACPa,SAAS,EAAE,QAAQ;UACnBX,EAAE,EAAE,CAAC;UACL/M,SAAS,EAAEA,SAAS,GAAG,sBAAsB,GAAG;QAClD,CAAE;QAAA+H,QAAA,gBACA9J,OAAA,CAACL,QAAQ,CAAC+O,GAAG;UAACrE,KAAK,EAAE;YACnBqF,OAAO,EAAE,cAAc;YACvBrB,QAAQ,EAAE,QAAQ;YAClBI,UAAU,EAAE,MAAM;YAClBe,KAAK,EAAE/N,KAAK,CAAC4J,OAAO,CAACC,OAAO,CAACC,IAAI;YACjCxJ,SAAS,EAAEA,SAAS,GAAG,2BAA2B,GAAG;UACvD,CAAE;UAAA+H,QAAA,EACC/G,eAAe,CAACC,MAAM,CAACS,EAAE,CAACkM,CAAC,IAAI,GAAGlP,IAAI,CAACmP,KAAK,CAACD,CAAC,CAAC,GAAG;QAAC;UAAAnF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxC,CAAC,eACf3K,OAAA,CAACT,UAAU;UACT8P,OAAO,EAAC,OAAO;UACfG,KAAK,EAAC,gBAAgB;UACtBZ,EAAE,EAAE;YAAEN,UAAU,EAAE;UAAsB,CAAE;UAAAxE,QAAA,EAC3C;QAED;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CAAC,eAEN3K,OAAA,CAACV,GAAG;QAACsP,EAAE,EAAE;UACP7D,KAAK,EAAE,MAAM;UACbC,MAAM,EAAE,GAAG;UACX+D,QAAQ,EAAE,UAAU;UACpBC,YAAY,EAAE,CAAC;UACf/D,QAAQ,EAAE,QAAQ;UAClBV,UAAU,EAAE;QACd,CAAE;QAAAT,QAAA,gBAEA9J,OAAA,CAACV,GAAG;UAACsP,EAAE,EAAE;YACPG,QAAQ,EAAE,UAAU;YACpBc,MAAM,EAAE,CAAC;YACTC,IAAI,EAAE,CAAC;YACP/E,KAAK,EAAE,MAAM;YACbC,MAAM,EAAE,KAAK;YACbiE,UAAU,EAAE,mFAAmF;YAC/Fc,MAAM,EAAE;UACV;QAAE;UAAAvF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAGL3K,OAAA,CAACV,GAAG;UAACsP,EAAE,EAAE;YACPG,QAAQ,EAAE,UAAU;YACpBiB,GAAG,EAAE,EAAE;YACPC,KAAK,EAAE,EAAE;YACTlF,KAAK,EAAE,GAAG;YACVC,MAAM,EAAE,GAAG;YACXgE,YAAY,EAAE,KAAK;YACnBC,UAAU,EAAE,4EAA4E;YACxFc,MAAM,EAAE,CAAC;YACThO,SAAS,EAAE,+BAA+B;YAC1C,kBAAkB,EAAE;cAClB,IAAI,EAAE;gBAAEyB,OAAO,EAAE,GAAG;gBAAEO,SAAS,EAAE;cAAW,CAAC;cAC7C,KAAK,EAAE;gBAAEP,OAAO,EAAE,GAAG;gBAAEO,SAAS,EAAE;cAAa,CAAC;cAChD,MAAM,EAAE;gBAAEP,OAAO,EAAE,GAAG;gBAAEO,SAAS,EAAE;cAAW;YAChD;UACF;QAAE;UAAAyG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAGL3K,OAAA,CAACV,GAAG;UAACsP,EAAE,EAAE;YACP7D,KAAK,EAAE,MAAM;YACbC,MAAM,EAAE,MAAM;YACd+D,QAAQ,EAAE,UAAU;YACpBgB,MAAM,EAAE,CAAC;YACThM,SAAS,EAAE,SAASgB,YAAY,CAAClB,KAAK,GAAG;YACzC0G,UAAU,EAAE;UACd,CAAE;UAAAT,QAAA,eACA9J,OAAA;YACEsD,GAAG,EAAE5B,MAAO;YACZqJ,KAAK,EAAC,MAAM;YACZC,MAAM,EAAC,MAAM;YACbG,OAAO,EAAC,aAAa;YACrBF,QAAQ,EAAC,SAAS;YAClBZ,KAAK,EAAE;cAAE6F,SAAS,EAAE;YAAQ,CAAE;YAAApG,QAAA,gBAE9B9J,OAAA;cAAA8J,QAAA,gBAEE9J,OAAA;gBAAgBwE,EAAE,EAAC,aAAa;gBAAC2L,EAAE,EAAC,KAAK;gBAACC,EAAE,EAAC,KAAK;gBAACC,CAAC,EAAC,KAAK;gBAACC,EAAE,EAAC,KAAK;gBAACC,EAAE,EAAC,KAAK;gBAAAzG,QAAA,gBAC1E9J,OAAA;kBAAMoM,MAAM,EAAC,IAAI;kBAACoE,SAAS,EAAC;gBAAS;kBAAAhG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACxC3K,OAAA;kBAAMoM,MAAM,EAAC,KAAK;kBAACoE,SAAS,EAAC;gBAAS;kBAAAhG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3B,CAAC,eAEjB3K,OAAA;gBAAgBwE,EAAE,EAAC,eAAe;gBAACiM,EAAE,EAAC,IAAI;gBAACC,EAAE,EAAC,IAAI;gBAACC,EAAE,EAAC,MAAM;gBAACC,EAAE,EAAC,IAAI;gBAAA9G,QAAA,gBAClE9J,OAAA;kBAAMoM,MAAM,EAAC,IAAI;kBAACoE,SAAS,EAAEzL,YAAY,CAACC;gBAAe;kBAAAwF,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAC5D3K,OAAA;kBAAMoM,MAAM,EAAC,KAAK;kBAACoE,SAAS,EAAC;gBAAS;kBAAAhG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACzC3K,OAAA;kBAAMoM,MAAM,EAAC,MAAM;kBAACoE,SAAS,EAAEzL,YAAY,CAACC;gBAAe;kBAAAwF,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChD,CAAC,eAGjB3K,OAAA;gBAAgBwE,EAAE,EAAC,gBAAgB;gBAAC2L,EAAE,EAAC,KAAK;gBAACC,EAAE,EAAC,KAAK;gBAACC,CAAC,EAAC,KAAK;gBAACC,EAAE,EAAC,KAAK;gBAACC,EAAE,EAAC,KAAK;gBAAAzG,QAAA,gBAC7E9J,OAAA;kBAAMoM,MAAM,EAAC,IAAI;kBAACoE,SAAS,EAAC;gBAAiB;kBAAAhG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAChD3K,OAAA;kBAAMoM,MAAM,EAAC,MAAM;kBAACoE,SAAS,EAAC;gBAAe;kBAAAhG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClC,CAAC,EAGhBnB,kBAAkB,CAACjF,GAAG,CAAExD,MAAM,iBAC7Bf,OAAA;gBAEEwE,EAAE,EAAEzD,MAAM,CAAC2G,UAAW;gBACtB+I,EAAE,EAAC,IAAI;gBACPC,EAAE,EAAC,IAAI;gBACPC,EAAE,EAAC,MAAM;gBACTC,EAAE,EAAC,IAAI;gBACPC,aAAa,EAAC,gBAAgB;gBAC9BC,iBAAiB,EAAE,UAAU/P,MAAM,CAACoF,KAAK,GAAG,GAAG,GAAG1F,IAAI,CAACwF,EAAE,GAAI;gBAAA6D,QAAA,gBAE7D9J,OAAA;kBAAMoM,MAAM,EAAC,IAAI;kBAACoE,SAAS,EAAC;gBAAS;kBAAAhG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACxC3K,OAAA;kBAAMoM,MAAM,EAAC,MAAM;kBAACoE,SAAS,EAAC;gBAAS;kBAAAhG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC;cAAA,GAVrC5J,MAAM,CAAC2G,UAAU;gBAAA8C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAWR,CACjB,CAAC,eAGF3K,OAAA;gBAAQwE,EAAE,EAAC,WAAW;gBAACqB,CAAC,EAAC,MAAM;gBAACC,CAAC,EAAC,MAAM;gBAACiF,KAAK,EAAC,MAAM;gBAACC,MAAM,EAAC,MAAM;gBAAAlB,QAAA,gBACjE9J,OAAA;kBAAgB+Q,YAAY,EAAC,GAAG;kBAACC,MAAM,EAAC;gBAAM;kBAAAxG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACjD3K,OAAA;kBAAaiR,EAAE,EAAC,eAAe;kBAACC,GAAG,EAAC,MAAM;kBAACC,QAAQ,EAAC;gBAAM;kBAAA3G,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvD,CAAC,eAGT3K,OAAA;gBAAOoR,IAAI,EAAC,UAAU;gBAAAtH,QAAA,EACnB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;cAAmB;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC,eAGP3K,OAAA;cACEmQ,EAAE,EAAC,KAAK;cACRC,EAAE,EAAE,GAAG,GAAGrL,YAAY,CAACK,SAAU;cACjC4I,EAAE,EAAEjJ,YAAY,CAACI,QAAQ,GAAG,GAAI;cAChC8I,EAAE,EAAC,GAAG;cACNhE,IAAI,EAAC,sBAAsB;cAC3BzG,OAAO,EAAC;YAAK;cAAAgH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACd,CAAC,eAGF3K,OAAA;cAAGyL,SAAS,EAAC,iBAAiB;cAAA3B,QAAA,gBAC5B9J,OAAA;gBACEmQ,EAAE,EAAC,KAAK;gBACRC,EAAE,EAAC,KAAK;gBACRpC,EAAE,EAAEjJ,YAAY,CAACI,QAAS;gBAC1B8I,EAAE,EAAC,IAAI;gBACPhE,IAAI,EAAC;cAAS;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACf,CAAC,eACF3K,OAAA;gBACEgK,CAAC,EAAE;AACrB,uBAAuB,GAAG,GAAGjF,YAAY,CAACI,QAAQ;AAClD,uBAAuB,GAAG,GAAGJ,YAAY,CAACI,QAAQ,GAAG,GAAG,KAAK,GAAG,GAAGJ,YAAY,CAACK,SAAS;AACzF,uBAAuB,GAAG,GAAGL,YAAY,CAACI,QAAQ,GAAG,GAAG,KAAK,GAAG,GAAGJ,YAAY,CAACK,SAAS;AACzF,uBAAuB,GAAG,GAAGL,YAAY,CAACI,QAAQ;AAClD,mBAAoB;gBACF8E,IAAI,EAAC;cAAmB;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzB,CAAC,eACF3K,OAAA;gBACEmQ,EAAE,EAAC,KAAK;gBACRC,EAAE,EAAE,GAAG,GAAGrL,YAAY,CAACK,SAAU;gBACjC4I,EAAE,EAAEjJ,YAAY,CAACI,QAAQ,GAAG,GAAI;gBAChC8I,EAAE,EAAC,GAAG;gBACNhE,IAAI,EAAC;cAAS;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACf,CAAC,eAGF3K,OAAA;gBACEmQ,EAAE,EAAC,KAAK;gBACRC,EAAE,EAAC,KAAK;gBACRpC,EAAE,EAAEjJ,YAAY,CAACI,QAAQ,GAAG,IAAK;gBACjC8I,EAAE,EAAC,IAAI;gBACPhE,IAAI,EAAC;cAAS;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACf,CAAC,eACF3K,OAAA;gBACEmQ,EAAE,EAAC,KAAK;gBACRC,EAAE,EAAC,KAAK;gBACRpC,EAAE,EAAEjJ,YAAY,CAACI,QAAQ,GAAG,GAAI;gBAChC8I,EAAE,EAAC,IAAI;gBACPhE,IAAI,EAAC,SAAS;gBACdzG,OAAO,EAAC;cAAK;gBAAAgH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACd,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eAGJ3K,OAAA;cAAGyL,SAAS,EAAC,WAAW;cAAA3B,QAAA,gBACtB9J,OAAA,CAACL,QAAQ,CAACoK,IAAI;gBACZvF,EAAE,EAAC,YAAY;gBACfwF,CAAC,EAAE;AACrB,uBAAuB,GAAG,GAAGjF,YAAY,CAACE,UAAU,GAAG,GAAG;AAC1D,uBAAuB,GAAG,GAAGF,YAAY,CAACE,UAAU,GAAG,GAAG,KAAK,GAAG,GAAGF,YAAY,CAACG,WAAW,GAAG,GAAG;AACnG,uBAAuB,GAAG,GAAGH,YAAY,CAACE,UAAU,GAAG,GAAG,KAAK,GAAG,GAAGF,YAAY,CAACG,WAAW,GAAG,GAAG;AACnG,uBAAuB,GAAG,GAAGH,YAAY,CAACE,UAAU,GAAG,GAAG,KAAK,GAAG,GAAGF,YAAY,CAACG,WAAW,GAAG,GAAG;AACnG,uBAAuB,GAAG,GAAGH,YAAY,CAACE,UAAU,GAAG,IAAI,KAAK,GAAG,GAAGF,YAAY,CAACG,WAAW,GAAG,IAAI;AACrG,4BAA4B,GAAG,GAAGH,YAAY,CAACG,WAAW;AAC1D,mBAAoB;gBACF+E,IAAI,EAAC,MAAM;gBACXC,MAAM,EAAC,qBAAqB;gBAC5BC,WAAW,EAAEpF,YAAY,CAACE,UAAW;gBACrCmF,aAAa,EAAC,OAAO;gBACrBC,KAAK,EAAEhH;cAAW;gBAAAmH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACnB,CAAC,EAGDlB,cAAc,CAAC/D,YAAY,CAAC;YAAA;cAAA8E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5B,CAAC,EAGH8C,aAAa,CAAC,CAAC;UAAA;YAAAjD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACb;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAGN3K,OAAA,CAACV,GAAG;UACFsP,EAAE,EAAE;YACFG,QAAQ,EAAE,UAAU;YACpBc,MAAM,EAAE,EAAE;YACVI,KAAK,EAAE,EAAE;YACThB,UAAU,EAAE,uBAAuB;YACnCJ,CAAC,EAAE,GAAG;YACNG,YAAY,EAAE,KAAK;YACnBE,SAAS,EAAE,2BAA2B;YACtCC,cAAc,EAAE,WAAW;YAC3BC,MAAM,EAAE,iCAAiC;YACzCW,MAAM,EAAE;UACV,CAAE;UAAAjG,QAAA,gBAEF9J,OAAA,CAACT,UAAU;YACT8P,OAAO,EAAC,SAAS;YACjBK,OAAO,EAAC,OAAO;YACfd,EAAE,EAAE;cACFH,UAAU,EAAE,MAAM;cAClBK,EAAE,EAAE,GAAG;cACPR,UAAU,EAAE;YACd,CAAE;YAAAxE,QAAA,EACH;UAED;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eACb3K,OAAA,CAACT,UAAU;YACT8P,OAAO,EAAC,SAAS;YACjBK,OAAO,EAAC,OAAO;YACfd,EAAE,EAAE;cAAEN,UAAU,EAAE;YAAsB,CAAE;YAAAxE,QAAA,gBAE1C9J,OAAA,CAACV,GAAG;cACF+R,SAAS,EAAC,MAAM;cAChBzC,EAAE,EAAE;gBACFc,OAAO,EAAE,cAAc;gBACvB3E,KAAK,EAAE,EAAE;gBACTC,MAAM,EAAE,EAAE;gBACVgE,YAAY,EAAE,KAAK;gBACnBsC,eAAe,EAAE7P,KAAK,CAAC4J,OAAO,CAACC,OAAO,CAACC,IAAI;gBAC3CgG,EAAE,EAAE;cACN;YAAE;cAAA/G,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,mBAEJ;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eACb3K,OAAA,CAACT,UAAU;YACT8P,OAAO,EAAC,SAAS;YACjBK,OAAO,EAAC,OAAO;YACfd,EAAE,EAAE;cAAEN,UAAU,EAAE;YAAsB,CAAE;YAAAxE,QAAA,gBAE1C9J,OAAA,CAACV,GAAG;cACF+R,SAAS,EAAC,MAAM;cAChBzC,EAAE,EAAE;gBACFc,OAAO,EAAE,cAAc;gBACvB3E,KAAK,EAAE,EAAE;gBACTC,MAAM,EAAE,EAAE;gBACVgE,YAAY,EAAE,KAAK;gBACnBsC,eAAe,EAAEvM,YAAY,CAACM,aAAa;gBAC3C7B,OAAO,EAAE,GAAG;gBACZ+N,EAAE,EAAE;cACN;YAAE;cAAA/G,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,sBAEJ;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAEN3K,OAAA,CAACT,UAAU;QACTgQ,KAAK,EAAC,QAAQ;QACdF,OAAO,EAAC,OAAO;QACfG,KAAK,EAAC,gBAAgB;QACtBZ,EAAE,EAAE;UACF4C,EAAE,EAAE,CAAC;UACLlD,UAAU,EAAE,qBAAqB;UACjCvM,SAAS,EAAEA,SAAS,GAAG,uBAAuB,GAAG;QACnD,CAAE;QAAA+H,QAAA,GACH,kBACiB,EAACxH,cAAc,CAACpB,MAAM,EAAC,+BACzC;MAAA;QAAAsJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACI,CAAC;AAEnB,CAAC;AAACnJ,EAAA,CA/gCIJ,UAAqC;EAAA,QAC3B3B,QAAQ,EAgBCI,YAAY,EACXA,YAAY,EACdA,YAAY,EAGVH,SAAS,EAOdA,SAAS,EAORA,SAAS,EAOXA,SAAS,EAQ3BI,QAAQ,EASmBJ,SAAS;AAAA;AAAA+R,EAAA,GA5DhCrQ,UAAqC;AAihC3C,eAAeA,UAAU;AAAC,IAAAqQ,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
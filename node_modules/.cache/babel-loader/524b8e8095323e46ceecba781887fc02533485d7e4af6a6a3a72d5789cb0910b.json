{"ast":null,"code":"var _jsxFileName = \"/Users/gerardo/Downloads/Bonsaito/src/components/BonsaiTree.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { Box, Typography, Paper, useTheme } from '@mui/material';\nimport { useSpring, animated, config, useSpringRef, useChain } from 'react-spring';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Helper functions\nconst lerp = (a, b, t) => a * (1 - t) + b * t;\nconst clamp = (num, min, max) => Math.min(Math.max(num, min), max);\nconst randRange = (min, max) => Math.random() * (max - min) + min;\n\n// Define interfaces for branch and leaf objects\n\nconst BonsaiTree = ({\n  skills,\n  totalSkills,\n  showGrowthAnimation = false\n}) => {\n  _s();\n  const theme = useTheme();\n  const svgRef = useRef(null);\n  const [recentlyMastered, setRecentlyMastered] = useState([]);\n  const [showTooltip, setShowTooltip] = useState(null);\n  const [animation, setAnimation] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n  const [hoveredBranch, setHoveredBranch] = useState(null);\n\n  // Reference to track previous skills for comparison\n  const prevSkillsRef = useRef([]);\n\n  // Calculate mastery percentage\n  const masteredSkills = skills.filter(skill => skill.mastered);\n  const masteryPercentage = Math.round(masteredSkills.length / totalSkills * 100);\n\n  // Spring animation refs for chaining\n  const trunkSpringRef = useSpringRef();\n  const branchSpringRef = useSpringRef();\n  const leafSpringRef = useSpringRef();\n\n  // Spring animations\n  const percentageProps = useSpring({\n    number: masteryPercentage,\n    from: {\n      number: 0\n    },\n    config: {\n      tension: 120,\n      friction: 14\n    },\n    delay: 300\n  });\n  const trunkProps = useSpring({\n    ref: trunkSpringRef,\n    from: {\n      strokeDashoffset: 1000,\n      opacity: 0.7\n    },\n    to: {\n      strokeDashoffset: 0,\n      opacity: 1\n    },\n    config: {\n      tension: 80,\n      friction: 15,\n      duration: 1500\n    }\n  });\n  const branchProps = useSpring({\n    ref: branchSpringRef,\n    from: {\n      strokeDashoffset: 1000,\n      opacity: 0.5\n    },\n    to: {\n      strokeDashoffset: 0,\n      opacity: 1\n    },\n    config: {\n      tension: 70,\n      friction: 14,\n      duration: 1200\n    }\n  });\n  const leafProps = useSpring({\n    ref: leafSpringRef,\n    from: {\n      scale: 0,\n      opacity: 0\n    },\n    to: {\n      scale: 1,\n      opacity: 1\n    },\n    config: {\n      tension: 200,\n      friction: 20,\n      duration: 800\n    }\n  });\n\n  // Chain the animations\n  useChain(firstRender ? [trunkSpringRef, branchSpringRef, leafSpringRef] : [], firstRender ? [0, 0.5, 0.8] : []);\n  const treeContainerProps = useSpring({\n    from: {\n      opacity: 0,\n      transform: 'translateY(30px)'\n    },\n    to: {\n      opacity: 1,\n      transform: 'translateY(0px)'\n    },\n    config: config.gentle\n  });\n\n  // Group skills by category\n  const skillsByCategory = skills.reduce((acc, skill) => {\n    if (!acc[skill.category]) {\n      acc[skill.category] = [];\n    }\n    acc[skill.category].push(skill);\n    return acc;\n  }, {});\n\n  // Track skills that were recently mastered\n  useEffect(() => {\n    // Only run effect if not first render\n    if (!firstRender) {\n      const prevMasteredIds = prevSkillsRef.current.filter(skill => skill.mastered).map(skill => skill.id);\n      const currentMasteredIds = skills.filter(skill => skill.mastered).map(skill => skill.id);\n\n      // Find newly mastered skills\n      const newlyMastered = currentMasteredIds.filter(id => !prevMasteredIds.includes(id));\n      if (newlyMastered.length > 0) {\n        setRecentlyMastered(newlyMastered);\n        setAnimation(true);\n\n        // Reset animation state after animation completes\n        const timer = setTimeout(() => {\n          setAnimation(false);\n        }, 3000);\n        return () => clearTimeout(timer);\n      }\n    } else {\n      setFirstRender(false);\n    }\n    // Update reference\n    prevSkillsRef.current = [...skills];\n  }, [skills, firstRender]);\n\n  // Calculate tree health/vitality based on mastery\n  const treeVitality = {\n    // Trunk color darkens as tree matures\n    trunkBaseColor: masteryPercentage < 30 ? '#6d4c41' // Lighter brown for younger tree\n    : masteryPercentage < 70 ? '#5d4037' // Medium brown\n    : '#4e342e',\n    // Dark rich brown for mature tree\n\n    // Set trunk dimensions based on growth\n    trunkWidth: clamp(30 + masteryPercentage / 4, 30, 45),\n    trunkHeight: clamp(160 + masteryPercentage, 160, 250),\n    // Pot style based on growth\n    potWidth: clamp(100 + masteryPercentage / 3, 100, 120),\n    potHeight: clamp(45 + masteryPercentage / 10, 45, 55),\n    // Leaf colors become more vibrant with mastery\n    leafBaseColor: masteryPercentage < 30 ? '#88d498' // Light green for low mastery\n    : masteryPercentage < 60 ? '#6bcca1' // Medium green\n    : '#4fc3a8',\n    // Vibrant green for high mastery\n\n    // Overall size scaling factor\n    scale: clamp(0.85 + masteryPercentage / 100, 0.85, 1.25)\n  };\n\n  // Generate branches with a more natural, realistic pattern\n  const generateBranches = () => {\n    const categories = Object.keys(skillsByCategory);\n    const mainBranches = [];\n\n    // If no categories, return empty array\n    if (categories.length === 0) return mainBranches;\n\n    // Determine the main trunk end point (where it starts to curve)\n    const trunkEndY = 300 - treeVitality.trunkHeight * 0.8;\n    const trunkTop = {\n      x: 150,\n      y: trunkEndY\n    };\n\n    // Main branch distribution angles based on number of categories\n    const totalCategories = categories.length;\n    const baseAngles = [];\n    if (totalCategories === 1) {\n      // Single category - branch goes mostly upward\n      baseAngles.push(-Math.PI / 2);\n    } else if (totalCategories === 2) {\n      // Two categories - split left and right\n      baseAngles.push(-Math.PI / 2 - 0.4);\n      baseAngles.push(-Math.PI / 2 + 0.4);\n    } else {\n      // Distribute branches in a fan pattern\n      for (let i = 0; i < totalCategories; i++) {\n        const angle = lerp(-Math.PI / 2 - 0.8, -Math.PI / 2 + 0.8, i / (totalCategories - 1));\n        baseAngles.push(angle);\n      }\n    }\n\n    // Create main branches\n    for (let i = 0; i < categories.length; i++) {\n      const category = categories[i];\n      const skills = skillsByCategory[category];\n\n      // Skip empty categories\n      if (!skills || skills.length === 0) continue;\n\n      // Calculate angle with small random variation\n      const baseAngle = baseAngles[i];\n      const angle = baseAngle + randRange(-0.1, 0.1);\n\n      // Calculate mastery for this category\n      const categorySkills = skillsByCategory[category] || [];\n      const masteredInCategory = categorySkills.filter(s => s.mastered).length;\n      const categoryMasteryRatio = categorySkills.length > 0 ? masteredInCategory / categorySkills.length : 0;\n\n      // Set branch length based on category mastery and skill count\n      const minLength = 80 + skills.length * 3;\n      const maxLength = 120 + skills.length * 4;\n      const branchLength = lerp(minLength, maxLength, categoryMasteryRatio);\n\n      // Branch direction vector\n      const branchDirection = {\n        x: Math.cos(angle),\n        y: Math.sin(angle)\n      };\n\n      // Branch end point\n      const endPoint = {\n        x: trunkTop.x + branchDirection.x * branchLength,\n        y: trunkTop.y + branchDirection.y * branchLength\n      };\n\n      // Control points for natural curve - adjust these for different branch shapes\n      const controlPoint1 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.3,\n        y: trunkTop.y + branchDirection.y * branchLength * 0.2 - 10\n      };\n      const controlPoint2 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.7,\n        y: trunkTop.y + branchDirection.y * branchLength * 0.6 - 15\n      };\n\n      // Thickness based on mastery and size\n      const thickness = 8 * (0.7 + categoryMasteryRatio * 0.5);\n      const mainBranch = {\n        id: `branch-${i}`,\n        category,\n        start: trunkTop,\n        end: endPoint,\n        control1: controlPoint1,\n        control2: controlPoint2,\n        thickness,\n        angle,\n        masteryRatio: categoryMasteryRatio,\n        level: 0,\n        skills: [],\n        subBranches: []\n      };\n\n      // Generate sub-branches\n      const subBranches = generateSubBranches(mainBranch, skills, 3, 1);\n      mainBranch.subBranches = subBranches;\n      mainBranches.push(mainBranch);\n    }\n    return mainBranches;\n  };\n\n  // Generate sub-branches recursively\n  const generateSubBranches = (parentBranch, skills, maxBranches, level) => {\n    if (level > 3 || skills.length === 0) return []; // Limit the recursion depth\n\n    const branches = [];\n    const numBranches = Math.min(maxBranches, skills.length);\n    const skillsPerBranch = Math.ceil(skills.length / numBranches);\n    for (let i = 0; i < numBranches; i++) {\n      // Get skills for this branch\n      const startIdx = i * skillsPerBranch;\n      const endIdx = Math.min(startIdx + skillsPerBranch, skills.length);\n      const branchSkills = skills.slice(startIdx, endIdx);\n      if (branchSkills.length === 0) continue;\n\n      // Calculate mastery for this set of skills\n      const masteredInBranch = branchSkills.filter(s => s.mastered).length;\n      const branchMasteryRatio = masteredInBranch / branchSkills.length;\n\n      // Generate the sub-branch\n      const baseAngle = parentBranch.angle;\n\n      // Alternate sides for more natural look\n      const sideAngle = i % 2 === 0 ? randRange(0.3, 0.7) : randRange(-0.7, -0.3);\n\n      // As we go deeper, branches extend more horizontally\n      const levelFactor = level * 0.2;\n      const newAngle = baseAngle + sideAngle * (1 + levelFactor);\n\n      // Calculate branch length (diminishing with level)\n      const scaleFactor = 1 - level * 0.2;\n      const branchLength = (40 + branchSkills.length * 5) * scaleFactor;\n\n      // Branch direction\n      const branchDirection = {\n        x: Math.cos(newAngle),\n        y: Math.sin(newAngle)\n      };\n\n      // For sub-branches, start from a point along the parent branch\n      const t = 0.6 + i / numBranches * 0.4; // Start point along parent branch\n      const p0 = parentBranch.start;\n      const p1 = parentBranch.control1;\n      const p2 = parentBranch.control2;\n      const p3 = parentBranch.end;\n\n      // Calculate position on the parent's bezier curve\n      const t1 = 1 - t;\n      const t1_2 = t1 * t1;\n      const t1_3 = t1_2 * t1;\n      const t_2 = t * t;\n      const t_3 = t_2 * t;\n      const startX = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n      const startY = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n      const start = {\n        x: startX,\n        y: startY\n      };\n\n      // End point\n      const end = {\n        x: start.x + branchDirection.x * branchLength,\n        y: start.y + branchDirection.y * branchLength\n      };\n\n      // Control points for natural curve\n      const control1 = {\n        x: start.x + branchDirection.x * branchLength * 0.3,\n        y: start.y + branchDirection.y * branchLength * 0.2 - 5\n      };\n      const control2 = {\n        x: start.x + branchDirection.x * branchLength * 0.7,\n        y: start.y + branchDirection.y * branchLength * 0.6 - 8\n      };\n\n      // Thickness diminishes with level\n      const thicknessScale = 1 - level * 0.25;\n      const thickness = parentBranch.thickness * 0.6 * thicknessScale;\n      const branch = {\n        id: `${parentBranch.id}-sub-${i}`,\n        category: parentBranch.category,\n        start,\n        end,\n        control1,\n        control2,\n        thickness,\n        angle: newAngle,\n        masteryRatio: branchMasteryRatio,\n        level,\n        skills: branchSkills,\n        subBranches: []\n      };\n\n      // Generate further sub-branches if we haven't reached max level\n      if (level < 3 && branchSkills.length > 1) {\n        const furtherSubBranches = generateSubBranches(branch, branchSkills, Math.max(2, branchSkills.length - 1), level + 1);\n        branch.subBranches = furtherSubBranches;\n      }\n      branches.push(branch);\n    }\n    return branches;\n  };\n\n  // Generate main branches\n  const mainBranches = generateBranches();\n\n  // Function to render all branches recursively\n  const renderBranches = branches => {\n    return branches.flatMap((branch, index) => [/*#__PURE__*/_jsxDEV(\"g\", {\n      onMouseEnter: () => setHoveredBranch(branch.id),\n      onMouseLeave: () => setHoveredBranch(null),\n      children: [/*#__PURE__*/_jsxDEV(animated.path, {\n        id: branch.id,\n        d: `\n            M${branch.start.x}, ${branch.start.y}\n            C${branch.control1.x}, ${branch.control1.y}\n             ${branch.control2.x}, ${branch.control2.y}\n             ${branch.end.x}, ${branch.end.y}\n          `,\n        fill: \"none\",\n        stroke: `url(#branchGradient-${index})`,\n        strokeWidth: branch.thickness,\n        strokeLinecap: \"round\",\n        style: {\n          transform: hoveredBranch === branch.id ? 'scale(1.05)' : 'scale(1)',\n          transformOrigin: `${branch.start.x}px ${branch.start.y}px`,\n          transition: 'transform 0.3s ease',\n          ...branchProps\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this), branch.skills.map((skill, skillIndex) => {\n        const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n        return /*#__PURE__*/_jsxDEV(\"foreignObject\", {\n          id: `leaf-${skill.id}`,\n          x: leaf.x - 20,\n          y: leaf.y - 20,\n          width: 40,\n          height: 40,\n          style: {\n            overflow: 'visible',\n            transition: 'all 0.3s ease',\n            filter: leaf.isRecentlyMastered ? 'url(#leaf-glow)' : 'none',\n            transform: hoveredBranch === branch.id ? 'scale(1.1) rotate(5deg)' : 'scale(1) rotate(0deg)'\n          },\n          onMouseEnter: () => setShowTooltip(skill.id),\n          onMouseLeave: () => setShowTooltip(null),\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"40\",\n            height: \"40\",\n            viewBox: \"-20 -20 40 40\",\n            style: {\n              overflow: 'visible'\n            },\n            children: /*#__PURE__*/_jsxDEV(animated.g, {\n              transform: `rotate(${leaf.angle * 180 / Math.PI})`,\n              style: {\n                ...leafProps\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M0,-2 C3,-10 8,-15 12,-15 C18,-15 20,-8 15,0 C10,8 5,10 0,5 C-5,10 -10,8 -15,0 C-20,-8 -18,-15 -12,-15 C-8,-15 -3,-10 0,-2 Z\",\n                fill: skill.mastered ? theme.palette.primary.main : `hsl(${120 + skill.masteryLevel / 5}, ${50 + skill.masteryLevel / 2}%, ${70 - skill.masteryLevel / 3}%)`,\n                opacity: skill.mastered ? 1 : 0.6 + skill.masteryLevel / 250,\n                className: leaf.isRecentlyMastered ? 'leaf-pulse' : '',\n                transform: `scale(${leaf.size / 25})`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M0,-2 L0,5 M-8,-8 Q0,-2 8,-8\",\n                fill: \"none\",\n                stroke: skill.mastered ? `rgba(255,255,255,0.5)` : `rgba(255,255,255,0.3)`,\n                strokeWidth: \"0.8\",\n                transform: `scale(${leaf.size / 25})`,\n                opacity: 0.8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 15\n          }, this)\n        }, `leaf-${skill.id}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 13\n        }, this);\n      }), branch.subBranches && renderBranches(branch.subBranches)]\n    }, branch.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 7\n    }, this)]);\n  };\n\n  // Generate leaf coordinates for a branch\n  const generateLeafCoordinates = (branch, skill, index) => {\n    const skills = branch.skills;\n    const totalSkills = skills.length;\n\n    // Get a t-value [0-1] along the curve based on the skill index\n    // We want to distribute skills evenly\n    const t = clamp(0.3 + (index + 1) / (totalSkills + 1) * 0.7, 0.3, 0.95);\n\n    // Calculate point on the cubic bezier curve\n    const p0 = branch.start;\n    const p1 = branch.control1;\n    const p2 = branch.control2;\n    const p3 = branch.end;\n\n    // Calculate position on the cubic bezier curve\n    // Formula: P = (1-t)^3 * P0 + 3(1-t)^2 * t * P1 + 3(1-t) * t^2 * P2 + t^3 * P3\n    const t1 = 1 - t;\n    const t1_2 = t1 * t1;\n    const t1_3 = t1_2 * t1;\n    const t_2 = t * t;\n    const t_3 = t_2 * t;\n    const x = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n    const y = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n\n    // Calculate the curve tangent to decide the leaf direction\n    const tangentX = -3 * t1_2 * p0.x + 3 * t1_2 * p1.x - 6 * t1 * t * p1.x + 6 * t1 * t * p2.x - 3 * t_2 * p2.x + 3 * t_2 * p3.x;\n    const tangentY = -3 * t1_2 * p0.y + 3 * t1_2 * p1.y - 6 * t1 * t * p1.y + 6 * t1 * t * p2.y - 3 * t_2 * p2.y + 3 * t_2 * p3.y;\n\n    // Normalize the tangent\n    const tangentLength = Math.sqrt(tangentX * tangentX + tangentY * tangentY);\n    const normalizedTangentX = tangentX / tangentLength;\n    const normalizedTangentY = tangentY / tangentLength;\n\n    // Calculate perpendicular vector\n    const perpX = -normalizedTangentY;\n    const perpY = normalizedTangentX;\n\n    // Spread leaves on both sides of the branch\n    // Alternate sides for a more natural look\n    const side = index % 2 === 0 ? 1 : -1;\n\n    // Offset from the curve\n    const offset = skill.masteryLevel / 100 * 5 + 5;\n\n    // Base position on the curve\n    let baseX = x + side * perpX * offset;\n    let baseY = y + side * perpY * offset;\n\n    // Add some random variation for a more natural look\n    baseX += randRange(-3, 3);\n    baseY += randRange(-3, 3);\n\n    // Calculate leaf size based on mastery level\n    const baseSize = 7;\n    const masteryBonus = skill.mastered ? 4 : skill.masteryLevel / 25;\n    const size = baseSize + masteryBonus;\n\n    // Leaf color hue varies slightly based on mastery\n    const hue = 120 + skill.masteryLevel / 5;\n    return {\n      x: baseX,\n      y: baseY,\n      size,\n      // Add angle information for leaf orientation\n      angle: Math.atan2(perpY, perpX) + side * Math.PI / 8 + randRange(-Math.PI / 16, Math.PI / 16),\n      isRecentlyMastered: recentlyMastered.includes(skill.id) && skill.mastered,\n      hue\n    };\n  };\n\n  // Animation update\n  useEffect(() => {\n    if (!svgRef.current || mainBranches.length === 0) return;\n\n    // Skip animation if it's the first render\n    if (firstRender) return;\n    if (animation) {\n      // Add the SVG animation\n      const svg = svgRef.current;\n\n      // Animate trunk growing\n      const trunk = svg.querySelector('#tree-trunk');\n      if (trunk) {\n        trunk.classList.add('animate-grow');\n        trunk.addEventListener('animationend', () => {\n          trunk.classList.remove('animate-grow');\n        }, {\n          once: true\n        });\n      }\n\n      // Animate branches\n      mainBranches.forEach((branch, i) => {\n        const branchElement = svg.querySelector(`#${branch.id}`);\n        if (branchElement) {\n          branchElement.classList.add('animate-grow');\n          branchElement.setAttribute('style', `animation-delay: ${i * 0.2}s`);\n          branchElement.addEventListener('animationend', () => {\n            branchElement.classList.remove('animate-grow');\n            branchElement.removeAttribute('style');\n          }, {\n            once: true\n          });\n        }\n      });\n\n      // Animate leaves\n      recentlyMastered.forEach(skillId => {\n        const leafElement = svg.querySelector(`#leaf-${skillId}`);\n        if (leafElement) {\n          leafElement.classList.add('animate-leaf-grow');\n          leafElement.addEventListener('animationend', () => {\n            leafElement.classList.remove('animate-leaf-grow');\n          }, {\n            once: true\n          });\n        }\n      });\n    }\n  }, [animation, mainBranches, recentlyMastered, firstRender]);\n\n  // Render tooltip for skills\n  const renderTooltip = () => {\n    if (!showTooltip) return null;\n    const skill = skills.find(s => s.id === showTooltip);\n    if (!skill) return null;\n\n    // Find leaf position for this skill\n    let tooltipX = 0;\n    let tooltipY = 0;\n    let found = false;\n\n    // Recursive search function\n    const findSkillInBranches = branches => {\n      for (const branch of branches) {\n        const skillIndex = branch.skills.findIndex(s => s.id === skill.id);\n        if (skillIndex >= 0) {\n          const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n          tooltipX = leaf.x;\n          tooltipY = leaf.y;\n          found = true;\n          return true;\n        }\n\n        // Check sub-branches\n        if (branch.subBranches && branch.subBranches.length > 0) {\n          if (findSkillInBranches(branch.subBranches)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    findSkillInBranches(mainBranches);\n    if (!found) return null;\n    return /*#__PURE__*/_jsxDEV(\"g\", {\n      children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n        x: tooltipX - 60,\n        y: tooltipY - 50,\n        width: \"120\",\n        height: \"36\",\n        rx: \"6\",\n        ry: \"6\",\n        fill: \"rgba(255,255,255,0.95)\",\n        stroke: theme.palette.primary.main,\n        strokeWidth: \"1\",\n        filter: \"drop-shadow(0px 2px 3px rgba(0,0,0,0.2))\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n        x: tooltipX,\n        y: tooltipY - 30,\n        textAnchor: \"middle\",\n        dominantBaseline: \"middle\",\n        fill: theme.palette.text.primary,\n        fontSize: \"10\",\n        fontFamily: \"DM Sans, sans-serif\",\n        children: skill.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 683,\n        columnNumber: 9\n      }, this), skill.mastered && /*#__PURE__*/_jsxDEV(\"text\", {\n        x: tooltipX,\n        y: tooltipY - 40,\n        textAnchor: \"middle\",\n        dominantBaseline: \"middle\",\n        fill: theme.palette.success.main,\n        fontSize: \"8\",\n        fontFamily: \"DM Sans, sans-serif\",\n        fontWeight: \"bold\",\n        children: \"MASTERED\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 11\n      }, this)]\n    }, `tooltip-${skill.id}`, true, {\n      fileName: _jsxFileName,\n      lineNumber: 670,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(animated.div, {\n    style: treeContainerProps,\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      className: \"glass-morphism\",\n      sx: {\n        p: 4,\n        mb: 4,\n        position: 'relative',\n        overflow: 'hidden',\n        borderRadius: '8px',\n        background: 'linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(245,250,245,0.9))',\n        boxShadow: '0 8px 32px rgba(31,38,135,0.15)',\n        backdropFilter: 'blur(10px)',\n        border: '1px solid rgba(255,255,255,0.18)',\n        transition: 'all 0.5s ease'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        align: \"center\",\n        sx: {\n          fontFamily: 'DM Sans, sans-serif',\n          fontWeight: 'bold',\n          color: theme.palette.primary.main,\n          mb: 3\n        },\n        children: \"Your Bonsai Learning Tree\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 730,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          textAlign: 'center',\n          mb: 3,\n          animation: animation ? 'pulse 2s ease-in-out' : 'none'\n        },\n        children: [/*#__PURE__*/_jsxDEV(animated.div, {\n          style: {\n            display: 'inline-block',\n            fontSize: '2.5rem',\n            fontWeight: 'bold',\n            color: theme.palette.primary.main,\n            animation: animation ? 'colorShift 2s ease-in-out' : 'none'\n          },\n          children: percentageProps.number.to(n => `${Math.floor(n)}%`)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          sx: {\n            fontFamily: 'DM Sans, sans-serif'\n          },\n          children: \"Skills Mastered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 758,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 744,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          width: '100%',\n          height: 500,\n          position: 'relative',\n          borderRadius: 2,\n          overflow: 'hidden',\n          transition: 'all 0.5s ease'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'absolute',\n            bottom: 0,\n            left: 0,\n            width: '100%',\n            height: '40%',\n            background: 'linear-gradient(to top, rgba(232, 245, 233, 0.7) 0%, rgba(232, 245, 233, 0) 100%)',\n            zIndex: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 776,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'absolute',\n            top: 20,\n            right: 25,\n            width: 100,\n            height: 100,\n            borderRadius: '50%',\n            background: 'radial-gradient(circle, rgba(255,236,179,0.3) 0%, rgba(255,236,179,0) 70%)',\n            zIndex: 1,\n            animation: 'pulse 8s infinite ease-in-out',\n            '@keyframes pulse': {\n              '0%': {\n                opacity: 0.5,\n                transform: 'scale(1)'\n              },\n              '50%': {\n                opacity: 0.8,\n                transform: 'scale(1.1)'\n              },\n              '100%': {\n                opacity: 0.5,\n                transform: 'scale(1)'\n              }\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 787,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            width: '100%',\n            height: '100%',\n            position: 'relative',\n            zIndex: 2,\n            transform: `scale(${treeVitality.scale})`,\n            transition: 'transform 1s ease-in-out'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            ref: svgRef,\n            width: \"100%\",\n            height: \"100%\",\n            viewBox: \"0 0 300 500\",\n            overflow: \"visible\",\n            style: {\n              marginTop: '-40px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n              children: [/*#__PURE__*/_jsxDEV(\"radialGradient\", {\n                id: \"potGradient\",\n                cx: \"50%\",\n                cy: \"30%\",\n                r: \"70%\",\n                fx: \"50%\",\n                fy: \"30%\",\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: \"#8D6E63\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 824,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"90%\",\n                  stopColor: \"#5D4037\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 825,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 823,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                id: \"trunkGradient\",\n                x1: \"0%\",\n                y1: \"0%\",\n                x2: \"100%\",\n                y2: \"0%\",\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: treeVitality.trunkBaseColor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 829,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"50%\",\n                  stopColor: \"#6D4C41\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 830,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"100%\",\n                  stopColor: treeVitality.trunkBaseColor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 831,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 828,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"radialGradient\", {\n                id: \"shadowGradient\",\n                cx: \"50%\",\n                cy: \"50%\",\n                r: \"50%\",\n                fx: \"50%\",\n                fy: \"50%\",\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: \"rgba(0,0,0,0.2)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 836,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"100%\",\n                  stopColor: \"rgba(0,0,0,0)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 837,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 835,\n                columnNumber: 17\n              }, this), mainBranches.map((branch, i) => /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                id: `branchGradient-${i}`,\n                x1: \"0%\",\n                y1: \"0%\",\n                x2: \"100%\",\n                y2: \"0%\",\n                gradientUnits: \"userSpaceOnUse\",\n                gradientTransform: `rotate(${branch.angle * 180 / Math.PI})`,\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: \"#6D4C41\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 852,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"100%\",\n                  stopColor: \"#8D6E63\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 853,\n                  columnNumber: 21\n                }, this)]\n              }, `branch-gradient-${i}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 842,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(\"filter\", {\n                id: \"leaf-glow\",\n                x: \"-50%\",\n                y: \"-50%\",\n                width: \"200%\",\n                height: \"200%\",\n                children: [/*#__PURE__*/_jsxDEV(\"feGaussianBlur\", {\n                  stdDeviation: \"2\",\n                  result: \"blur\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 859,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"feComposite\", {\n                  in: \"SourceGraphic\",\n                  in2: \"blur\",\n                  operator: \"over\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 860,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 858,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n                type: \"text/css\",\n                children: `\n                    @keyframes leafGrow {\n                      0% { transform: scale(0); opacity: 0; }\n                      60% { transform: scale(1.5); opacity: 1; }\n                      100% { transform: scale(1); opacity: 1; }\n                    }\n                    \n                    @keyframes branchGrow {\n                      0% { stroke-dashoffset: 1000; }\n                      100% { stroke-dashoffset: 0; }\n                    }\n                    \n                    @keyframes pulse {\n                      0% { opacity: 0.8; transform: scale(1); }\n                      50% { opacity: 1; transform: scale(1.1); }\n                      100% { opacity: 0.8; transform: scale(1); }\n                    }\n                    \n                    @keyframes float {\n                      0% { transform: translateY(0); }\n                      50% { transform: translateY(-5px); }\n                      100% { transform: translateY(0); }\n                    }\n                    \n                    @keyframes sway {\n                      0% { transform: rotate(0deg); }\n                      25% { transform: rotate(1deg); }\n                      75% { transform: rotate(-1deg); }\n                      100% { transform: rotate(0deg); }\n                    }\n                    \n                    .animate-grow {\n                      stroke-dasharray: 1000;\n                      stroke-dashoffset: 1000;\n                      animation: branchGrow 1.5s ease-in-out forwards;\n                    }\n                    \n                    .animate-leaf-grow {\n                      animation: leafGrow 0.8s ease-out forwards;\n                    }\n                    \n                    .leaf-pulse {\n                      animation: pulse 2s infinite;\n                    }\n                    \n                    .sway-slow {\n                      transform-origin: bottom;\n                      animation: sway 8s ease-in-out infinite;\n                    }\n                    \n                    .sway-medium {\n                      transform-origin: bottom;\n                      animation: sway 6s ease-in-out infinite;\n                    }\n                    \n                    .float-animation {\n                      animation: float 5s ease-in-out infinite;\n                    }\n                  `\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 864,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 821,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n              cx: \"150\",\n              cy: 385 + treeVitality.potHeight,\n              rx: treeVitality.potWidth * 0.9,\n              ry: \"8\",\n              fill: \"url(#shadowGradient)\",\n              opacity: \"0.5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 928,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n              className: \"float-animation\",\n              children: [/*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: \"385\",\n                rx: treeVitality.potWidth,\n                ry: \"15\",\n                fill: \"#A1887F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 939,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: `\n                    M${150 - treeVitality.potWidth}, 385 \n                    L${150 - treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth}, 385\n                  `,\n                fill: \"url(#potGradient)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 946,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: 385 + treeVitality.potHeight,\n                rx: treeVitality.potWidth * 0.8,\n                ry: \"6\",\n                fill: \"#5D4037\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 955,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: \"383\",\n                rx: treeVitality.potWidth * 0.85,\n                ry: \"13\",\n                fill: \"#3E2723\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 964,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: \"382\",\n                rx: treeVitality.potWidth * 0.8,\n                ry: \"12\",\n                fill: \"#33691E\",\n                opacity: \"0.4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 971,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 938,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n              className: \"sway-slow\",\n              children: [/*#__PURE__*/_jsxDEV(animated.path, {\n                id: \"tree-trunk\",\n                d: `\n                    M${150 - treeVitality.trunkWidth * 0.4}, 385\n                    C${150 - treeVitality.trunkWidth * 0.5}, ${385 - treeVitality.trunkHeight * 0.3}\n                     ${150 + treeVitality.trunkWidth * 0.2}, ${385 - treeVitality.trunkHeight * 0.7}\n                     150, ${385 - treeVitality.trunkHeight}\n                  `,\n                fill: \"none\",\n                stroke: \"url(#trunkGradient)\",\n                strokeWidth: treeVitality.trunkWidth,\n                strokeLinecap: \"round\",\n                style: trunkProps\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 983,\n                columnNumber: 17\n              }, this), renderBranches(mainBranches)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 982,\n              columnNumber: 15\n            }, this), renderTooltip()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 813,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 805,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'absolute',\n            bottom: 15,\n            right: 15,\n            background: 'rgba(255,255,255,0.9)',\n            p: 1.5,\n            borderRadius: '8px',\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            backdropFilter: 'blur(8px)',\n            border: '1px solid rgba(255,255,255,0.5)',\n            zIndex: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            display: \"block\",\n            sx: {\n              fontWeight: 'bold',\n              mb: 0.5,\n              fontFamily: 'DM Sans, sans-serif'\n            },\n            children: \"Your Learning Growth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1022,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            display: \"block\",\n            sx: {\n              fontFamily: 'DM Sans, sans-serif'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              component: \"span\",\n              sx: {\n                display: 'inline-block',\n                width: 10,\n                height: 10,\n                borderRadius: '50%',\n                backgroundColor: theme.palette.primary.main,\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1038,\n              columnNumber: 15\n            }, this), \"Mastered Skills\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1033,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            display: \"block\",\n            sx: {\n              fontFamily: 'DM Sans, sans-serif'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              component: \"span\",\n              sx: {\n                display: 'inline-block',\n                width: 10,\n                height: 10,\n                borderRadius: '50%',\n                backgroundColor: treeVitality.leafBaseColor,\n                opacity: 0.7,\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1056,\n              columnNumber: 15\n            }, this), \"Skills In Progress\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1051,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1008,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 767,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        align: \"center\",\n        variant: \"body2\",\n        color: \"text.secondary\",\n        sx: {\n          mt: 2,\n          fontFamily: 'DM Sans, sans-serif',\n          animation: animation ? 'fadeIn 1s ease-in-out' : 'none'\n        },\n        children: [\"You've mastered \", masteredSkills.length, \" skills so far! Keep growing!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1073,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 714,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 713,\n    columnNumber: 5\n  }, this);\n};\n_s(BonsaiTree, \"q3Jujl/Fq+uscNOcA2yq/CAX3YQ=\", false, function () {\n  return [useTheme, useSpringRef, useSpringRef, useSpringRef, useSpring, useSpring, useSpring, useSpring, useChain, useSpring];\n});\n_c = BonsaiTree;\nexport default BonsaiTree;\nvar _c;\n$RefreshReg$(_c, \"BonsaiTree\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Box","Typography","Paper","useTheme","useSpring","animated","config","useSpringRef","useChain","jsxDEV","_jsxDEV","lerp","a","b","t","clamp","num","min","max","Math","randRange","random","BonsaiTree","skills","totalSkills","showGrowthAnimation","_s","theme","svgRef","recentlyMastered","setRecentlyMastered","showTooltip","setShowTooltip","animation","setAnimation","firstRender","setFirstRender","hoveredBranch","setHoveredBranch","prevSkillsRef","masteredSkills","filter","skill","mastered","masteryPercentage","round","length","trunkSpringRef","branchSpringRef","leafSpringRef","percentageProps","number","from","tension","friction","delay","trunkProps","ref","strokeDashoffset","opacity","to","duration","branchProps","leafProps","scale","treeContainerProps","transform","gentle","skillsByCategory","reduce","acc","category","push","prevMasteredIds","current","map","id","currentMasteredIds","newlyMastered","includes","timer","setTimeout","clearTimeout","treeVitality","trunkBaseColor","trunkWidth","trunkHeight","potWidth","potHeight","leafBaseColor","generateBranches","categories","Object","keys","mainBranches","trunkEndY","trunkTop","x","y","totalCategories","baseAngles","PI","i","angle","baseAngle","categorySkills","masteredInCategory","s","categoryMasteryRatio","minLength","maxLength","branchLength","branchDirection","cos","sin","endPoint","controlPoint1","controlPoint2","thickness","mainBranch","start","end","control1","control2","masteryRatio","level","subBranches","generateSubBranches","parentBranch","maxBranches","branches","numBranches","skillsPerBranch","ceil","startIdx","endIdx","branchSkills","slice","masteredInBranch","branchMasteryRatio","sideAngle","levelFactor","newAngle","scaleFactor","p0","p1","p2","p3","t1","t1_2","t1_3","t_2","t_3","startX","startY","thicknessScale","branch","furtherSubBranches","renderBranches","flatMap","index","onMouseEnter","onMouseLeave","children","path","d","fill","stroke","strokeWidth","strokeLinecap","style","transformOrigin","transition","fileName","_jsxFileName","lineNumber","columnNumber","skillIndex","leaf","generateLeafCoordinates","width","height","overflow","isRecentlyMastered","viewBox","g","palette","primary","main","masteryLevel","className","size","tangentX","tangentY","tangentLength","sqrt","normalizedTangentX","normalizedTangentY","perpX","perpY","side","offset","baseX","baseY","baseSize","masteryBonus","hue","atan2","svg","trunk","querySelector","classList","add","addEventListener","remove","once","forEach","branchElement","setAttribute","removeAttribute","skillId","leafElement","renderTooltip","find","tooltipX","tooltipY","found","findSkillInBranches","findIndex","rx","ry","textAnchor","dominantBaseline","text","fontSize","fontFamily","name","success","fontWeight","div","elevation","sx","p","mb","position","borderRadius","background","boxShadow","backdropFilter","border","variant","gutterBottom","align","color","textAlign","display","n","floor","bottom","left","zIndex","top","right","marginTop","cx","cy","r","fx","fy","stopColor","x1","y1","x2","y2","gradientUnits","gradientTransform","stdDeviation","result","in","in2","operator","type","component","backgroundColor","mr","mt","_c","$RefreshReg$"],"sources":["/Users/gerardo/Downloads/Bonsaito/src/components/BonsaiTree.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { Box, Typography, Paper, useTheme, Tooltip } from '@mui/material';\nimport { useSpring, animated, config, useSpringRef, useChain } from 'react-spring';\n\ninterface Skill {\n  id: string;\n  name: string;\n  category: string;\n  mastered: boolean;\n  masteryLevel: number;\n}\n\ninterface BonsaiTreeProps {\n  skills: Skill[];\n  totalSkills: number;\n  showGrowthAnimation?: boolean;\n}\n\n// Helper functions\nconst lerp = (a: number, b: number, t: number) => a * (1 - t) + b * t;\nconst clamp = (num: number, min: number, max: number) => Math.min(Math.max(num, min), max);\nconst randRange = (min: number, max: number) => Math.random() * (max - min) + min;\n\n// Define interfaces for branch and leaf objects\ninterface BranchPoint {\n  x: number;\n  y: number;\n}\n\ninterface Branch {\n  id: string;\n  category: string;\n  start: BranchPoint;\n  end: BranchPoint;\n  control1: BranchPoint;\n  control2: BranchPoint;\n  thickness: number;\n  angle: number;\n  masteryRatio: number;\n  level: number;\n  skills: Skill[];\n  subBranches: Branch[];\n}\n\ninterface LeafCoordinates {\n  x: number;\n  y: number;\n  size: number;\n  angle: number;\n  isRecentlyMastered: boolean;\n  hue: number;\n}\n\nconst BonsaiTree: React.FC<BonsaiTreeProps> = ({ skills, totalSkills, showGrowthAnimation = false }) => {\n  const theme = useTheme();\n  const svgRef = useRef<SVGSVGElement>(null);\n  const [recentlyMastered, setRecentlyMastered] = useState<string[]>([]);\n  const [showTooltip, setShowTooltip] = useState<string | null>(null);\n  const [animation, setAnimation] = useState<boolean>(false);\n  const [firstRender, setFirstRender] = useState<boolean>(true);\n  const [hoveredBranch, setHoveredBranch] = useState<string | null>(null);\n  \n  // Reference to track previous skills for comparison\n  const prevSkillsRef = useRef<Skill[]>([]);\n  \n  // Calculate mastery percentage\n  const masteredSkills = skills.filter(skill => skill.mastered);\n  const masteryPercentage = Math.round((masteredSkills.length / totalSkills) * 100);\n  \n  // Spring animation refs for chaining\n  const trunkSpringRef = useSpringRef();\n  const branchSpringRef = useSpringRef();\n  const leafSpringRef = useSpringRef();\n\n  // Spring animations\n  const percentageProps = useSpring({\n    number: masteryPercentage,\n    from: { number: 0 },\n    config: { tension: 120, friction: 14 },\n    delay: 300,\n  });\n\n  const trunkProps = useSpring({\n    ref: trunkSpringRef,\n    from: { strokeDashoffset: 1000, opacity: 0.7 },\n    to: { strokeDashoffset: 0, opacity: 1 },\n    config: { tension: 80, friction: 15, duration: 1500 },\n  });\n\n  const branchProps = useSpring({\n    ref: branchSpringRef,\n    from: { strokeDashoffset: 1000, opacity: 0.5 },\n    to: { strokeDashoffset: 0, opacity: 1 },\n    config: { tension: 70, friction: 14, duration: 1200 },\n  });\n\n  const leafProps = useSpring({\n    ref: leafSpringRef,\n    from: { scale: 0, opacity: 0 },\n    to: { scale: 1, opacity: 1 },\n    config: { tension: 200, friction: 20, duration: 800 },\n  });\n\n  // Chain the animations\n  useChain(\n    firstRender \n      ? [trunkSpringRef, branchSpringRef, leafSpringRef] \n      : [], \n    firstRender \n      ? [0, 0.5, 0.8] \n      : []\n  );\n\n  const treeContainerProps = useSpring({\n    from: { opacity: 0, transform: 'translateY(30px)' },\n    to: { opacity: 1, transform: 'translateY(0px)' },\n    config: config.gentle,\n  });\n\n  // Group skills by category\n  const skillsByCategory = skills.reduce((acc, skill) => {\n      if (!acc[skill.category]) {\n        acc[skill.category] = [];\n      }\n      acc[skill.category].push(skill);\n      return acc;\n    }, {} as Record<string, Skill[]>);\n\n  // Track skills that were recently mastered\n  useEffect(() => {\n    // Only run effect if not first render\n    if (!firstRender) {\n      const prevMasteredIds = prevSkillsRef.current\n        .filter(skill => skill.mastered)\n        .map(skill => skill.id);\n      \n      const currentMasteredIds = skills\n        .filter(skill => skill.mastered)\n        .map(skill => skill.id);\n      \n      // Find newly mastered skills\n      const newlyMastered = currentMasteredIds.filter(id => !prevMasteredIds.includes(id));\n      \n      if (newlyMastered.length > 0) {\n        setRecentlyMastered(newlyMastered);\n        setAnimation(true);\n        \n        // Reset animation state after animation completes\n        const timer = setTimeout(() => {\n          setAnimation(false);\n        }, 3000);\n        \n        return () => clearTimeout(timer);\n      }\n    } else {\n      setFirstRender(false);\n    }\n    // Update reference\n    prevSkillsRef.current = [...skills];\n  }, [skills, firstRender]);\n\n  // Calculate tree health/vitality based on mastery\n  const treeVitality = {\n    // Trunk color darkens as tree matures\n    trunkBaseColor: masteryPercentage < 30 \n      ? '#6d4c41' // Lighter brown for younger tree\n      : masteryPercentage < 70\n        ? '#5d4037' // Medium brown\n        : '#4e342e', // Dark rich brown for mature tree\n        \n    // Set trunk dimensions based on growth\n    trunkWidth: clamp(30 + (masteryPercentage / 4), 30, 45),\n    trunkHeight: clamp(160 + masteryPercentage, 160, 250),\n    \n    // Pot style based on growth\n    potWidth: clamp(100 + (masteryPercentage / 3), 100, 120),\n    potHeight: clamp(45 + (masteryPercentage / 10), 45, 55),\n    \n    // Leaf colors become more vibrant with mastery\n    leafBaseColor: masteryPercentage < 30 \n      ? '#88d498' // Light green for low mastery\n      : masteryPercentage < 60 \n        ? '#6bcca1' // Medium green\n        : '#4fc3a8', // Vibrant green for high mastery\n    \n    // Overall size scaling factor\n    scale: clamp(0.85 + (masteryPercentage / 100), 0.85, 1.25)\n  };\n\n  // Generate branches with a more natural, realistic pattern\n  const generateBranches = (): Branch[] => {\n    const categories = Object.keys(skillsByCategory);\n    const mainBranches: Branch[] = [];\n    \n    // If no categories, return empty array\n    if (categories.length === 0) return mainBranches;\n    \n    // Determine the main trunk end point (where it starts to curve)\n    const trunkEndY = 300 - treeVitality.trunkHeight * 0.8;\n    const trunkTop = { x: 150, y: trunkEndY };\n    \n    // Main branch distribution angles based on number of categories\n    const totalCategories = categories.length;\n    const baseAngles = [];\n    \n    if (totalCategories === 1) {\n      // Single category - branch goes mostly upward\n      baseAngles.push(-Math.PI/2);\n    } else if (totalCategories === 2) {\n      // Two categories - split left and right\n      baseAngles.push(-Math.PI/2 - 0.4);\n      baseAngles.push(-Math.PI/2 + 0.4);\n    } else {\n      // Distribute branches in a fan pattern\n      for (let i = 0; i < totalCategories; i++) {\n        const angle = lerp(-Math.PI/2 - 0.8, -Math.PI/2 + 0.8, i / (totalCategories - 1));\n        baseAngles.push(angle);\n      }\n    }\n    \n    // Create main branches\n    for (let i = 0; i < categories.length; i++) {\n      const category = categories[i];\n      const skills = skillsByCategory[category];\n      \n      // Skip empty categories\n      if (!skills || skills.length === 0) continue;\n      \n      // Calculate angle with small random variation\n      const baseAngle = baseAngles[i];\n      const angle = baseAngle + randRange(-0.1, 0.1);\n      \n      // Calculate mastery for this category\n      const categorySkills = skillsByCategory[category] || [];\n      const masteredInCategory = categorySkills.filter(s => s.mastered).length;\n      const categoryMasteryRatio = categorySkills.length > 0 \n        ? masteredInCategory / categorySkills.length \n        : 0;\n      \n      // Set branch length based on category mastery and skill count\n      const minLength = 80 + (skills.length * 3);\n      const maxLength = 120 + (skills.length * 4);\n      const branchLength = lerp(minLength, maxLength, categoryMasteryRatio);\n      \n      // Branch direction vector\n      const branchDirection = { \n        x: Math.cos(angle),\n        y: Math.sin(angle)\n      };\n      \n      // Branch end point\n      const endPoint = {\n        x: trunkTop.x + branchDirection.x * branchLength,\n        y: trunkTop.y + branchDirection.y * branchLength\n      };\n      \n      // Control points for natural curve - adjust these for different branch shapes\n      const controlPoint1 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.3,\n        y: trunkTop.y + branchDirection.y * branchLength * 0.2 - 10\n      };\n      \n      const controlPoint2 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.7, \n        y: trunkTop.y + branchDirection.y * branchLength * 0.6 - 15\n      };\n      \n      // Thickness based on mastery and size\n      const thickness = 8 * (0.7 + (categoryMasteryRatio * 0.5));\n      \n      const mainBranch: Branch = {\n        id: `branch-${i}`,\n        category,\n        start: trunkTop,\n        end: endPoint,\n        control1: controlPoint1,\n        control2: controlPoint2,\n        thickness,\n        angle,\n        masteryRatio: categoryMasteryRatio,\n        level: 0,\n        skills: [],\n        subBranches: []\n      };\n      \n      // Generate sub-branches\n      const subBranches = generateSubBranches(mainBranch, skills, 3, 1);\n      mainBranch.subBranches = subBranches;\n      \n      mainBranches.push(mainBranch);\n    }\n    \n    return mainBranches;\n  };\n  \n  // Generate sub-branches recursively\n  const generateSubBranches = (parentBranch: Branch, skills: Skill[], maxBranches: number, level: number): Branch[] => {\n    if (level > 3 || skills.length === 0) return []; // Limit the recursion depth\n    \n    const branches: Branch[] = [];\n    const numBranches = Math.min(maxBranches, skills.length);\n    const skillsPerBranch = Math.ceil(skills.length / numBranches);\n    \n    for (let i = 0; i < numBranches; i++) {\n      // Get skills for this branch\n      const startIdx = i * skillsPerBranch;\n      const endIdx = Math.min(startIdx + skillsPerBranch, skills.length);\n      const branchSkills = skills.slice(startIdx, endIdx);\n      \n      if (branchSkills.length === 0) continue;\n      \n      // Calculate mastery for this set of skills\n      const masteredInBranch = branchSkills.filter(s => s.mastered).length;\n      const branchMasteryRatio = masteredInBranch / branchSkills.length;\n      \n      // Generate the sub-branch\n      const baseAngle = parentBranch.angle;\n      \n      // Alternate sides for more natural look\n      const sideAngle = i % 2 === 0 ? randRange(0.3, 0.7) : randRange(-0.7, -0.3);\n      \n      // As we go deeper, branches extend more horizontally\n      const levelFactor = level * 0.2;\n      const newAngle = baseAngle + sideAngle * (1 + levelFactor);\n      \n      // Calculate branch length (diminishing with level)\n      const scaleFactor = 1 - (level * 0.2);\n      const branchLength = (40 + (branchSkills.length * 5)) * scaleFactor;\n      \n      // Branch direction\n      const branchDirection = {\n        x: Math.cos(newAngle),\n        y: Math.sin(newAngle)\n      };\n      \n      // For sub-branches, start from a point along the parent branch\n      const t = 0.6 + (i / numBranches) * 0.4; // Start point along parent branch\n      const p0 = parentBranch.start;\n      const p1 = parentBranch.control1;\n      const p2 = parentBranch.control2;\n      const p3 = parentBranch.end;\n      \n      // Calculate position on the parent's bezier curve\n      const t1 = 1 - t;\n      const t1_2 = t1 * t1;\n      const t1_3 = t1_2 * t1;\n      const t_2 = t * t;\n      const t_3 = t_2 * t;\n      \n      const startX = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n      const startY = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n      const start = { x: startX, y: startY };\n      \n      // End point\n      const end = {\n        x: start.x + branchDirection.x * branchLength,\n        y: start.y + branchDirection.y * branchLength\n      };\n      \n      // Control points for natural curve\n      const control1 = {\n        x: start.x + branchDirection.x * branchLength * 0.3,\n        y: start.y + branchDirection.y * branchLength * 0.2 - 5\n      };\n      \n      const control2 = {\n        x: start.x + branchDirection.x * branchLength * 0.7,\n        y: start.y + branchDirection.y * branchLength * 0.6 - 8\n      };\n      \n      // Thickness diminishes with level\n      const thicknessScale = 1 - (level * 0.25);\n      const thickness = parentBranch.thickness * 0.6 * thicknessScale;\n      \n      const branch: Branch = {\n        id: `${parentBranch.id}-sub-${i}`,\n        category: parentBranch.category,\n        start,\n        end,\n        control1,\n        control2,\n        thickness,\n        angle: newAngle,\n        masteryRatio: branchMasteryRatio,\n        level,\n        skills: branchSkills,\n        subBranches: []\n      };\n      \n      // Generate further sub-branches if we haven't reached max level\n      if (level < 3 && branchSkills.length > 1) {\n        const furtherSubBranches = generateSubBranches(\n          branch, \n          branchSkills, \n          Math.max(2, branchSkills.length - 1), \n          level + 1\n        );\n        branch.subBranches = furtherSubBranches;\n      }\n      \n      branches.push(branch);\n    }\n    \n    return branches;\n  };\n  \n  // Generate main branches\n  const mainBranches = generateBranches();\n\n  // Function to render all branches recursively\n  const renderBranches = (branches: Branch[]) => {\n    return branches.flatMap((branch, index) => [\n      <g \n        key={branch.id} \n        onMouseEnter={() => setHoveredBranch(branch.id)}\n        onMouseLeave={() => setHoveredBranch(null)}\n      >\n        <animated.path\n          id={branch.id}\n          d={`\n            M${branch.start.x}, ${branch.start.y}\n            C${branch.control1.x}, ${branch.control1.y}\n             ${branch.control2.x}, ${branch.control2.y}\n             ${branch.end.x}, ${branch.end.y}\n          `}\n          fill=\"none\"\n          stroke={`url(#branchGradient-${index})`}\n          strokeWidth={branch.thickness}\n          strokeLinecap=\"round\"\n          style={{\n            transform: hoveredBranch === branch.id \n              ? 'scale(1.05)' \n              : 'scale(1)',\n            transformOrigin: `${branch.start.x}px ${branch.start.y}px`,\n            transition: 'transform 0.3s ease',\n            ...branchProps\n          }}\n        />\n        \n        {/* Skills as leaves */}\n        {branch.skills.map((skill, skillIndex) => {\n          const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n          return (\n            <foreignObject\n              key={`leaf-${skill.id}`}\n              id={`leaf-${skill.id}`}\n              x={leaf.x - 20}\n              y={leaf.y - 20}\n              width={40}\n              height={40}\n              style={{\n                overflow: 'visible',\n                transition: 'all 0.3s ease',\n                filter: leaf.isRecentlyMastered ? 'url(#leaf-glow)' : 'none',\n                transform: hoveredBranch === branch.id \n                  ? 'scale(1.1) rotate(5deg)' \n                  : 'scale(1) rotate(0deg)',\n              }}\n              onMouseEnter={() => setShowTooltip(skill.id)}\n              onMouseLeave={() => setShowTooltip(null)}\n            >\n              <svg \n                width=\"40\" \n                height=\"40\" \n                viewBox=\"-20 -20 40 40\"\n                style={{\n                  overflow: 'visible',\n                }}\n              >\n                <animated.g \n                  transform={`rotate(${leaf.angle * 180 / Math.PI})`}\n                  style={{\n                    ...leafProps\n                  }}\n                >\n                  <path\n                    d=\"M0,-2 C3,-10 8,-15 12,-15 C18,-15 20,-8 15,0 C10,8 5,10 0,5 C-5,10 -10,8 -15,0 C-20,-8 -18,-15 -12,-15 C-8,-15 -3,-10 0,-2 Z\"\n                    fill={skill.mastered \n                      ? theme.palette.primary.main \n                      : `hsl(${120 + (skill.masteryLevel / 5)}, ${50 + skill.masteryLevel / 2}%, ${70 - skill.masteryLevel / 3}%)`\n                    }\n                    opacity={skill.mastered ? 1 : 0.6 + (skill.masteryLevel / 250)}\n                    className={leaf.isRecentlyMastered ? 'leaf-pulse' : ''}\n                    transform={`scale(${leaf.size / 25})`}\n                  />\n                  {/* Leaf vein */}\n                  <path\n                    d=\"M0,-2 L0,5 M-8,-8 Q0,-2 8,-8\"\n                    fill=\"none\"\n                    stroke={skill.mastered \n                      ? `rgba(255,255,255,0.5)` \n                      : `rgba(255,255,255,0.3)`\n                    }\n                    strokeWidth=\"0.8\"\n                    transform={`scale(${leaf.size / 25})`}\n                    opacity={0.8}\n                  />\n                </animated.g>\n              </svg>\n            </foreignObject>\n          );\n        })}\n        \n        {/* Render sub-branches recursively */}\n        {branch.subBranches && renderBranches(branch.subBranches)}\n      </g>\n    ]);\n  };\n\n  // Generate leaf coordinates for a branch\n  const generateLeafCoordinates = (branch: Branch, skill: Skill, index: number): LeafCoordinates => {\n    const skills = branch.skills;\n    const totalSkills = skills.length;\n    \n    // Get a t-value [0-1] along the curve based on the skill index\n    // We want to distribute skills evenly\n    const t = clamp(0.3 + ((index + 1) / (totalSkills + 1)) * 0.7, 0.3, 0.95);\n\n    // Calculate point on the cubic bezier curve\n    const p0 = branch.start;\n    const p1 = branch.control1;\n    const p2 = branch.control2;\n    const p3 = branch.end;\n    \n    // Calculate position on the cubic bezier curve\n    // Formula: P = (1-t)^3 * P0 + 3(1-t)^2 * t * P1 + 3(1-t) * t^2 * P2 + t^3 * P3\n    const t1 = 1 - t;\n    const t1_2 = t1 * t1;\n    const t1_3 = t1_2 * t1;\n    const t_2 = t * t;\n    const t_3 = t_2 * t;\n    \n    const x = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n    const y = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n    \n    // Calculate the curve tangent to decide the leaf direction\n    const tangentX = -3 * t1_2 * p0.x + 3 * t1_2 * p1.x - 6 * t1 * t * p1.x + \n                 6 * t1 * t * p2.x - 3 * t_2 * p2.x + 3 * t_2 * p3.x;\n    const tangentY = -3 * t1_2 * p0.y + 3 * t1_2 * p1.y - 6 * t1 * t * p1.y + \n                 6 * t1 * t * p2.y - 3 * t_2 * p2.y + 3 * t_2 * p3.y;\n    \n    // Normalize the tangent\n    const tangentLength = Math.sqrt(tangentX * tangentX + tangentY * tangentY);\n    const normalizedTangentX = tangentX / tangentLength;\n    const normalizedTangentY = tangentY / tangentLength;\n    \n    // Calculate perpendicular vector\n    const perpX = -normalizedTangentY;\n    const perpY = normalizedTangentX;\n    \n    // Spread leaves on both sides of the branch\n    // Alternate sides for a more natural look\n    const side = index % 2 === 0 ? 1 : -1;\n    \n    // Offset from the curve\n    const offset = ((skill.masteryLevel / 100) * 5) + 5;\n    \n    // Base position on the curve\n    let baseX = x + side * perpX * offset;\n    let baseY = y + side * perpY * offset;\n    \n    // Add some random variation for a more natural look\n    baseX += randRange(-3, 3);\n    baseY += randRange(-3, 3);\n    \n    // Calculate leaf size based on mastery level\n    const baseSize = 7;\n    const masteryBonus = skill.mastered ? 4 : (skill.masteryLevel / 25);\n    const size = baseSize + masteryBonus;\n\n    // Leaf color hue varies slightly based on mastery\n    const hue = 120 + (skill.masteryLevel / 5);\n    \n    return {\n      x: baseX,\n      y: baseY,\n      size,\n      // Add angle information for leaf orientation\n      angle: Math.atan2(perpY, perpX) + (side * Math.PI / 8) + randRange(-Math.PI / 16, Math.PI / 16),\n      isRecentlyMastered: recentlyMastered.includes(skill.id) && skill.mastered,\n      hue\n    };\n  };\n  \n  // Animation update\n  useEffect(() => {\n    if (!svgRef.current || mainBranches.length === 0) return;\n    \n    // Skip animation if it's the first render\n    if (firstRender) return;\n\n    if (animation) {\n      // Add the SVG animation\n      const svg = svgRef.current;\n      \n      // Animate trunk growing\n      const trunk = svg.querySelector('#tree-trunk');\n      if (trunk) {\n        trunk.classList.add('animate-grow');\n        trunk.addEventListener('animationend', () => {\n          trunk.classList.remove('animate-grow');\n        }, { once: true });\n      }\n      \n      // Animate branches\n      mainBranches.forEach((branch, i) => {\n        const branchElement = svg.querySelector(`#${branch.id}`);\n        if (branchElement) {\n          branchElement.classList.add('animate-grow');\n          branchElement.setAttribute('style', `animation-delay: ${i * 0.2}s`);\n          branchElement.addEventListener('animationend', () => {\n            branchElement.classList.remove('animate-grow');\n            branchElement.removeAttribute('style');\n          }, { once: true });\n        }\n      });\n      \n      // Animate leaves\n      recentlyMastered.forEach(skillId => {\n        const leafElement = svg.querySelector(`#leaf-${skillId}`);\n        if (leafElement) {\n          leafElement.classList.add('animate-leaf-grow');\n          leafElement.addEventListener('animationend', () => {\n            leafElement.classList.remove('animate-leaf-grow');\n          }, { once: true });\n        }\n      });\n    }\n  }, [animation, mainBranches, recentlyMastered, firstRender]);\n\n  // Render tooltip for skills\n  const renderTooltip = () => {\n    if (!showTooltip) return null;\n    \n    const skill = skills.find(s => s.id === showTooltip);\n    if (!skill) return null;\n    \n    // Find leaf position for this skill\n    let tooltipX = 0;\n    let tooltipY = 0;\n    let found = false;\n    \n    // Recursive search function\n    const findSkillInBranches = (branches: Branch[]) => {\n      for (const branch of branches) {\n        const skillIndex = branch.skills.findIndex(s => s.id === skill.id);\n        if (skillIndex >= 0) {\n          const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n          tooltipX = leaf.x;\n          tooltipY = leaf.y;\n          found = true;\n          return true;\n        }\n        \n        // Check sub-branches\n        if (branch.subBranches && branch.subBranches.length > 0) {\n          if (findSkillInBranches(branch.subBranches)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    \n    findSkillInBranches(mainBranches);\n    \n    if (!found) return null;\n    \n    return (\n      <g key={`tooltip-${skill.id}`}>\n        <rect\n          x={tooltipX - 60}\n          y={tooltipY - 50}\n          width=\"120\"\n          height=\"36\"\n          rx=\"6\"\n          ry=\"6\"\n          fill=\"rgba(255,255,255,0.95)\"\n          stroke={theme.palette.primary.main}\n          strokeWidth=\"1\"\n          filter=\"drop-shadow(0px 2px 3px rgba(0,0,0,0.2))\"\n        />\n        <text\n          x={tooltipX}\n          y={tooltipY - 30}\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n          fill={theme.palette.text.primary}\n          fontSize=\"10\"\n          fontFamily=\"DM Sans, sans-serif\"\n        >\n          {skill.name}\n        </text>\n        {skill.mastered && (\n          <text\n            x={tooltipX}\n            y={tooltipY - 40}\n            textAnchor=\"middle\"\n            dominantBaseline=\"middle\"\n            fill={theme.palette.success.main}\n            fontSize=\"8\"\n            fontFamily=\"DM Sans, sans-serif\"\n            fontWeight=\"bold\"\n          >\n            MASTERED\n          </text>\n        )}\n      </g>\n    );\n  };\n\n  return (\n    <animated.div style={treeContainerProps}>\n      <Paper \n        elevation={3} \n        className=\"glass-morphism\"\n        sx={{ \n          p: 4, \n          mb: 4, \n          position: 'relative',\n          overflow: 'hidden',\n          borderRadius: '8px',\n          background: 'linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(245,250,245,0.9))',\n          boxShadow: '0 8px 32px rgba(31,38,135,0.15)',\n          backdropFilter: 'blur(10px)',\n          border: '1px solid rgba(255,255,255,0.18)',\n          transition: 'all 0.5s ease',\n        }}\n      >\n        <Typography \n          variant=\"h5\" \n          gutterBottom \n          align=\"center\" \n          sx={{ \n            fontFamily: 'DM Sans, sans-serif',\n            fontWeight: 'bold', \n            color: theme.palette.primary.main,\n            mb: 3\n          }}\n        >\n          Your Bonsai Learning Tree\n        </Typography>\n      \n        <Box sx={{ \n          textAlign: 'center', \n          mb: 3,\n          animation: animation ? 'pulse 2s ease-in-out' : 'none',\n        }}>\n          <animated.div style={{\n            display: 'inline-block',\n            fontSize: '2.5rem',\n            fontWeight: 'bold',\n            color: theme.palette.primary.main,\n            animation: animation ? 'colorShift 2s ease-in-out' : 'none',\n          }}>\n            {percentageProps.number.to(n => `${Math.floor(n)}%`)}\n          </animated.div>\n          <Typography \n            variant=\"body2\" \n            color=\"text.secondary\"\n            sx={{ fontFamily: 'DM Sans, sans-serif' }}\n          >\n            Skills Mastered\n          </Typography>\n        </Box>\n      \n        <Box sx={{ \n          width: '100%', \n          height: 500,\n          position: 'relative',\n          borderRadius: 2,\n          overflow: 'hidden',\n          transition: 'all 0.5s ease',\n        }}>\n          {/* Background gradient */}\n          <Box sx={{\n            position: 'absolute',\n            bottom: 0,\n            left: 0,\n            width: '100%',\n            height: '40%',\n            background: 'linear-gradient(to top, rgba(232, 245, 233, 0.7) 0%, rgba(232, 245, 233, 0) 100%)',\n            zIndex: 1\n          }} />\n          \n          {/* Sun/light effect */}\n          <Box sx={{\n            position: 'absolute',\n            top: 20,\n            right: 25,\n            width: 100,\n            height: 100,\n            borderRadius: '50%',\n            background: 'radial-gradient(circle, rgba(255,236,179,0.3) 0%, rgba(255,236,179,0) 70%)',\n            zIndex: 1,\n            animation: 'pulse 8s infinite ease-in-out',\n            '@keyframes pulse': {\n              '0%': { opacity: 0.5, transform: 'scale(1)' },\n              '50%': { opacity: 0.8, transform: 'scale(1.1)' },\n              '100%': { opacity: 0.5, transform: 'scale(1)' }\n            }\n          }} />\n          \n          {/* Tree SVG */}\n          <Box sx={{\n            width: '100%',\n            height: '100%',\n            position: 'relative',\n            zIndex: 2,\n            transform: `scale(${treeVitality.scale})`,\n            transition: 'transform 1s ease-in-out',\n          }}>\n            <svg \n              ref={svgRef}\n              width=\"100%\" \n              height=\"100%\" \n              viewBox=\"0 0 300 500\" \n              overflow=\"visible\"\n              style={{ marginTop: '-40px' }}\n            >\n              <defs>\n                {/* Gradients for tree elements */}\n                <radialGradient id=\"potGradient\" cx=\"50%\" cy=\"30%\" r=\"70%\" fx=\"50%\" fy=\"30%\">\n                  <stop offset=\"0%\" stopColor=\"#8D6E63\" />\n                  <stop offset=\"90%\" stopColor=\"#5D4037\" />\n                </radialGradient>\n                \n                <linearGradient id=\"trunkGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                  <stop offset=\"0%\" stopColor={treeVitality.trunkBaseColor} />\n                  <stop offset=\"50%\" stopColor=\"#6D4C41\" />\n                  <stop offset=\"100%\" stopColor={treeVitality.trunkBaseColor} />\n                </linearGradient>\n                \n                {/* Shadow gradient */}\n                <radialGradient id=\"shadowGradient\" cx=\"50%\" cy=\"50%\" r=\"50%\" fx=\"50%\" fy=\"50%\">\n                  <stop offset=\"0%\" stopColor=\"rgba(0,0,0,0.2)\" />\n                  <stop offset=\"100%\" stopColor=\"rgba(0,0,0,0)\" />\n                </radialGradient>\n                \n                {/* Gradients for each branch */}\n                {mainBranches.map((branch, i) => (\n                  <linearGradient \n                    key={`branch-gradient-${i}`}\n                    id={`branchGradient-${i}`} \n                    x1=\"0%\" \n                    y1=\"0%\" \n                    x2=\"100%\" \n                    y2=\"0%\" \n                    gradientUnits=\"userSpaceOnUse\"\n                    gradientTransform={`rotate(${branch.angle * 180 / Math.PI})`}\n                  >\n                    <stop offset=\"0%\" stopColor=\"#6D4C41\" />\n                    <stop offset=\"100%\" stopColor=\"#8D6E63\" />\n                  </linearGradient>\n                ))}\n                \n                {/* Leaf filter for glow effect */}\n                <filter id=\"leaf-glow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n                  <feGaussianBlur stdDeviation=\"2\" result=\"blur\" />\n                  <feComposite in=\"SourceGraphic\" in2=\"blur\" operator=\"over\" />\n                </filter>\n                \n                {/* Animation keyframes */}\n                <style type=\"text/css\">\n                  {`\n                    @keyframes leafGrow {\n                      0% { transform: scale(0); opacity: 0; }\n                      60% { transform: scale(1.5); opacity: 1; }\n                      100% { transform: scale(1); opacity: 1; }\n                    }\n                    \n                    @keyframes branchGrow {\n                      0% { stroke-dashoffset: 1000; }\n                      100% { stroke-dashoffset: 0; }\n                    }\n                    \n                    @keyframes pulse {\n                      0% { opacity: 0.8; transform: scale(1); }\n                      50% { opacity: 1; transform: scale(1.1); }\n                      100% { opacity: 0.8; transform: scale(1); }\n                    }\n                    \n                    @keyframes float {\n                      0% { transform: translateY(0); }\n                      50% { transform: translateY(-5px); }\n                      100% { transform: translateY(0); }\n                    }\n                    \n                    @keyframes sway {\n                      0% { transform: rotate(0deg); }\n                      25% { transform: rotate(1deg); }\n                      75% { transform: rotate(-1deg); }\n                      100% { transform: rotate(0deg); }\n                    }\n                    \n                    .animate-grow {\n                      stroke-dasharray: 1000;\n                      stroke-dashoffset: 1000;\n                      animation: branchGrow 1.5s ease-in-out forwards;\n                    }\n                    \n                    .animate-leaf-grow {\n                      animation: leafGrow 0.8s ease-out forwards;\n                    }\n                    \n                    .leaf-pulse {\n                      animation: pulse 2s infinite;\n                    }\n                    \n                    .sway-slow {\n                      transform-origin: bottom;\n                      animation: sway 8s ease-in-out infinite;\n                    }\n                    \n                    .sway-medium {\n                      transform-origin: bottom;\n                      animation: sway 6s ease-in-out infinite;\n                    }\n                    \n                    .float-animation {\n                      animation: float 5s ease-in-out infinite;\n                    }\n                  `}\n                </style>\n              </defs>\n              \n              {/* Shadow beneath the pot */}\n              <ellipse \n                cx=\"150\" \n                cy={385 + treeVitality.potHeight} \n                rx={treeVitality.potWidth * 0.9} \n                ry=\"8\" \n                fill=\"url(#shadowGradient)\"\n                opacity=\"0.5\"\n              />\n              \n              {/* Pot/Base */}\n              <g className=\"float-animation\">\n                <ellipse \n                  cx=\"150\" \n                  cy=\"385\" \n                  rx={treeVitality.potWidth} \n                  ry=\"15\" \n                  fill=\"#A1887F\" \n                />\n                <path \n                  d={`\n                    M${150 - treeVitality.potWidth}, 385 \n                    L${150 - treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth}, 385\n                  `}\n                  fill=\"url(#potGradient)\"\n                />\n                <ellipse \n                  cx=\"150\" \n                  cy={385 + treeVitality.potHeight} \n                  rx={treeVitality.potWidth * 0.8} \n                  ry=\"6\" \n                  fill=\"#5D4037\" \n                />\n                \n                {/* Soil/moss in pot */}\n                <ellipse \n                  cx=\"150\" \n                  cy=\"383\" \n                  rx={treeVitality.potWidth * 0.85} \n                  ry=\"13\" \n                  fill=\"#3E2723\" \n                />\n                <ellipse \n                  cx=\"150\" \n                  cy=\"382\" \n                  rx={treeVitality.potWidth * 0.8} \n                  ry=\"12\" \n                  fill=\"#33691E\" \n                  opacity=\"0.4\"\n                />\n              </g>\n              \n              {/* Trunk */}\n              <g className=\"sway-slow\">\n                <animated.path\n                  id=\"tree-trunk\"\n                  d={`\n                    M${150 - treeVitality.trunkWidth * 0.4}, 385\n                    C${150 - treeVitality.trunkWidth * 0.5}, ${385 - treeVitality.trunkHeight * 0.3}\n                     ${150 + treeVitality.trunkWidth * 0.2}, ${385 - treeVitality.trunkHeight * 0.7}\n                     150, ${385 - treeVitality.trunkHeight}\n                  `}\n                  fill=\"none\"\n                  stroke=\"url(#trunkGradient)\"\n                  strokeWidth={treeVitality.trunkWidth}\n                  strokeLinecap=\"round\"\n                  style={trunkProps}\n                />\n                \n                {/* Branches */}\n                {renderBranches(mainBranches)}\n              </g>\n              \n              {/* Skill name tooltips */}\n              {renderTooltip()}\n            </svg>\n          </Box>\n          \n          {/* Tree legend */}\n          <Box \n            sx={{ \n              position: 'absolute', \n              bottom: 15, \n              right: 15,\n              background: 'rgba(255,255,255,0.9)', \n              p: 1.5,\n              borderRadius: '8px',\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n              backdropFilter: 'blur(8px)',\n              border: '1px solid rgba(255,255,255,0.5)',\n              zIndex: 10\n            }}\n          >\n            <Typography \n              variant=\"caption\" \n              display=\"block\" \n              sx={{ \n                fontWeight: 'bold', \n                mb: 0.5, \n                fontFamily: 'DM Sans, sans-serif'\n              }}\n            >\n              Your Learning Growth\n            </Typography>\n            <Typography \n              variant=\"caption\" \n              display=\"block\"\n              sx={{ fontFamily: 'DM Sans, sans-serif' }}\n            >\n              <Box \n                component=\"span\" \n                sx={{ \n                  display: 'inline-block', \n                  width: 10, \n                  height: 10, \n                  borderRadius: '50%', \n                  backgroundColor: theme.palette.primary.main,\n                  mr: 1\n                }}\n              />\n              Mastered Skills\n            </Typography>\n            <Typography \n              variant=\"caption\" \n              display=\"block\"\n              sx={{ fontFamily: 'DM Sans, sans-serif' }}\n            >\n              <Box \n                component=\"span\" \n                sx={{ \n                  display: 'inline-block', \n                  width: 10, \n                  height: 10, \n                  borderRadius: '50%', \n                  backgroundColor: treeVitality.leafBaseColor,\n                  opacity: 0.7,\n                  mr: 1\n                }}\n              />\n              Skills In Progress\n            </Typography>\n          </Box>\n        </Box>\n        \n        <Typography \n          align=\"center\" \n          variant=\"body2\" \n          color=\"text.secondary\" \n          sx={{ \n            mt: 2,\n            fontFamily: 'DM Sans, sans-serif',\n            animation: animation ? 'fadeIn 1s ease-in-out' : 'none'\n          }}\n        >\n          You've mastered {masteredSkills.length} skills so far! Keep growing!\n        </Typography>\n      </Paper>\n    </animated.div>\n  );\n};\n\nexport default BonsaiTree;\n\n "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
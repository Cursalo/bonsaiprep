{"ast":null,"code":"var _jsxFileName = \"/Users/gerardo/Downloads/Bonsaito/src/components/BonsaiTree.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { Box, Typography, Paper, useTheme } from '@mui/material';\nimport { useSpring, animated, config, useSpringRef, useChain } from 'react-spring';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Helper functions\nconst lerp = (a, b, t) => a * (1 - t) + b * t;\nconst clamp = (num, min, max) => Math.min(Math.max(num, min), max);\nconst randRange = (min, max) => Math.random() * (max - min) + min;\n\n// Helper function to get all branches (main and sub-branches) flattened into a single array\nconst getAllBranches = branches => {\n  let all_branches = [];\n  for (const branch of branches) {\n    all_branches.push(branch);\n    if (branch.subBranches && branch.subBranches.length > 0) {\n      all_branches = all_branches.concat(getAllBranches(branch.subBranches));\n    }\n  }\n  return all_branches;\n};\n\n// Define interfaces for branch and leaf objects\n\nconst BonsaiTree = ({\n  skills,\n  totalSkills,\n  showGrowthAnimation = false\n}) => {\n  _s();\n  const theme = useTheme();\n  const svgRef = useRef(null);\n  const [recentlyMastered, setRecentlyMastered] = useState([]);\n  const [showTooltip, setShowTooltip] = useState(null);\n  const [animation, setAnimation] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n  const [hoveredBranch, setHoveredBranch] = useState(null);\n\n  // Reference to track previous skills for comparison\n  const prevSkillsRef = useRef([]);\n\n  // Group skills by category\n  const skillsByCategory = skills.reduce((acc, skill) => {\n    if (!acc[skill.category]) {\n      acc[skill.category] = [];\n    }\n    acc[skill.category].push(skill);\n    return acc;\n  }, {});\n\n  // Calculate mastery percentage\n  const masteredSkills = skills.filter(skill => skill.mastered);\n  const masteryPercentage = Math.round(masteredSkills.length / totalSkills * 100);\n\n  // Spring animation refs for chaining\n  const trunkSpringRef = useSpringRef();\n  const branchSpringRef = useSpringRef();\n  const leafSpringRef = useSpringRef();\n\n  // Spring animations\n  const percentageProps = useSpring({\n    number: masteryPercentage,\n    from: {\n      number: 0\n    },\n    config: {\n      tension: 120,\n      friction: 14\n    },\n    delay: 300\n  });\n  const trunkProps = useSpring({\n    ref: trunkSpringRef,\n    from: {\n      strokeDashoffset: 1000,\n      opacity: 0.7\n    },\n    to: {\n      strokeDashoffset: 0,\n      opacity: 1\n    },\n    config: {\n      tension: 80,\n      friction: 15,\n      duration: 1500\n    }\n  });\n  const branchProps = useSpring({\n    ref: branchSpringRef,\n    from: {\n      strokeDashoffset: 1000,\n      opacity: 0.5\n    },\n    to: {\n      strokeDashoffset: 0,\n      opacity: 1\n    },\n    config: {\n      tension: 70,\n      friction: 14,\n      duration: 1200\n    }\n  });\n  const leafProps = useSpring({\n    ref: leafSpringRef,\n    from: {\n      scale: 0,\n      opacity: 0\n    },\n    to: {\n      scale: 1,\n      opacity: 1\n    },\n    config: {\n      tension: 200,\n      friction: 20,\n      duration: 800\n    }\n  });\n\n  // Chain the animations\n  useChain(firstRender ? [trunkSpringRef, branchSpringRef, leafSpringRef] : [], firstRender ? [0, 0.5, 0.8] : []);\n  const treeContainerProps = useSpring({\n    from: {\n      opacity: 0,\n      transform: 'translateY(30px)'\n    },\n    to: {\n      opacity: 1,\n      transform: 'translateY(0px)'\n    },\n    config: config.gentle\n  });\n\n  // Calculate tree health/vitality based on mastery\n  const treeVitality = {\n    // Trunk color darkens as tree matures\n    trunkBaseColor: masteryPercentage < 30 ? '#6d4c41' // Lighter brown for younger tree\n    : masteryPercentage < 70 ? '#5d4037' // Medium brown\n    : '#4e342e',\n    // Dark rich brown for mature tree\n\n    // Set trunk dimensions based on growth\n    trunkWidth: clamp(30 + masteryPercentage / 4, 30, 45),\n    trunkHeight: clamp(160 + masteryPercentage, 160, 250),\n    // Pot style based on growth\n    potWidth: clamp(100 + masteryPercentage / 3, 100, 120),\n    potHeight: clamp(45 + masteryPercentage / 10, 45, 55),\n    // Leaf colors become more vibrant with mastery\n    leafBaseColor: masteryPercentage < 30 ? '#88d498' // Light green for low mastery\n    : masteryPercentage < 60 ? '#6bcca1' // Medium green\n    : '#4fc3a8',\n    // Vibrant green for high mastery\n\n    // Overall size scaling factor\n    scale: clamp(0.85 + masteryPercentage / 100, 0.85, 1.25)\n  };\n\n  // Generate branches with a more natural, realistic pattern\n  const generateBranches = () => {\n    const categories = Object.keys(skillsByCategory);\n    const mainBranches = [];\n\n    // If no categories, return empty array\n    if (categories.length === 0) return mainBranches;\n\n    // Determine the main trunk end point (where it starts to curve)\n    const trunkEndY = 300 - treeVitality.trunkHeight * 0.8;\n    const trunkTop = {\n      x: 150,\n      y: trunkEndY\n    };\n\n    // Main branch distribution angles based on number of categories\n    const totalCategories = categories.length;\n    const baseAngles = [];\n    if (totalCategories === 1) {\n      // Single category - branch goes mostly upward\n      baseAngles.push(-Math.PI / 2);\n    } else if (totalCategories === 2) {\n      // Two categories - split left and right with asymmetry\n      baseAngles.push(-Math.PI / 2 - 0.5);\n      baseAngles.push(-Math.PI / 2 + 0.3);\n    } else {\n      // Distribute branches in a natural, asymmetric pattern\n      // Traditional bonsai often has branches at Golden ratio points\n      // We'll create a more natural distribution with intentional gaps\n\n      // First create a basic distribution\n      for (let i = 0; i < totalCategories; i++) {\n        // Introduce some natural clustering rather than even distribution\n        const position = i / (totalCategories - 1);\n        // Apply non-linear transformation for more natural spacing\n        let angle;\n        if (position < 0.4) {\n          // Cluster more branches on the left side (traditional bonsai aesthetic)\n          angle = lerp(-Math.PI / 2 - 0.9, -Math.PI / 2 - 0.2, position / 0.4);\n        } else if (position > 0.6) {\n          // Some branches on the right\n          angle = lerp(-Math.PI / 2 + 0.1, -Math.PI / 2 + 0.7, (position - 0.6) / 0.4);\n        } else {\n          // Few branches directly upward\n          angle = lerp(-Math.PI / 2 - 0.2, -Math.PI / 2 + 0.1, (position - 0.4) / 0.2);\n        }\n        baseAngles.push(angle);\n      }\n    }\n\n    // Create main branches\n    for (let i = 0; i < categories.length; i++) {\n      const category = categories[i];\n      const skills = skillsByCategory[category];\n\n      // Skip empty categories\n      if (!skills || skills.length === 0) continue;\n\n      // Calculate angle with small random variation\n      const baseAngle = baseAngles[i];\n      const angle = baseAngle + randRange(-0.15, 0.15);\n\n      // Calculate mastery for this category\n      const categorySkills = skillsByCategory[category] || [];\n      const masteredInCategory = categorySkills.filter(s => s.mastered).length;\n      const categoryMasteryRatio = categorySkills.length > 0 ? masteredInCategory / categorySkills.length : 0;\n\n      // Set branch length based on category mastery and skill count\n      const minLength = 80 + skills.length * 3;\n      const maxLength = 120 + skills.length * 4;\n      const branchLength = lerp(minLength, maxLength, categoryMasteryRatio);\n\n      // Branch direction vector\n      const branchDirection = {\n        x: Math.cos(angle),\n        y: Math.sin(angle)\n      };\n\n      // Branch end point\n      const endPoint = {\n        x: trunkTop.x + branchDirection.x * branchLength,\n        y: trunkTop.y + branchDirection.y * branchLength\n      };\n\n      // Control points for natural curve - more variation for realistic bonsai shapes\n      // Bonsai branches often have more dramatic curves and character\n      const curveFactor = randRange(0.8, 1.2); // Variation in curve intensity\n      const verticalBias = randRange(-20, -5); // Varied vertical offset for natural curves\n\n      const controlPoint1 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.3 * curveFactor,\n        y: trunkTop.y + branchDirection.y * branchLength * 0.2 + verticalBias\n      };\n      const controlPoint2 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.7 * curveFactor,\n        y: trunkTop.y + branchDirection.y * branchLength * 0.6 + verticalBias * 0.7\n      };\n\n      // Thickness based on mastery and size with more taper\n      const thickness = 6 * (0.7 + categoryMasteryRatio * 0.5);\n      const mainBranch = {\n        id: `branch-${i}`,\n        category,\n        start: trunkTop,\n        end: endPoint,\n        control1: controlPoint1,\n        control2: controlPoint2,\n        thickness,\n        angle,\n        masteryRatio: categoryMasteryRatio,\n        level: 0,\n        skills: [],\n        subBranches: [],\n        gradientId: `branch-${i}-gradient`\n      };\n\n      // Generate sub-branches\n      const subBranches = generateSubBranches(mainBranch, skills, 3, 1);\n      mainBranch.subBranches = subBranches;\n      mainBranches.push(mainBranch);\n    }\n    return mainBranches;\n  };\n\n  // Generate sub-branches recursively\n  const generateSubBranches = (parentBranch, skills, maxBranches, level) => {\n    if (level > 3 || skills.length === 0) return []; // Limit the recursion depth\n\n    const branches = [];\n    const numBranches = Math.min(maxBranches, skills.length);\n    const skillsPerBranch = Math.ceil(skills.length / numBranches);\n    for (let i = 0; i < numBranches; i++) {\n      // Get skills for this branch\n      const startIdx = i * skillsPerBranch;\n      const endIdx = Math.min(startIdx + skillsPerBranch, skills.length);\n      const branchSkills = skills.slice(startIdx, endIdx);\n      if (branchSkills.length === 0) continue;\n\n      // Calculate mastery for this set of skills\n      const masteredInBranch = branchSkills.filter(s => s.mastered).length;\n      const branchMasteryRatio = masteredInBranch / branchSkills.length;\n\n      // Generate the sub-branch\n      const baseAngle = parentBranch.angle;\n\n      // Alternate sides for more natural look\n      const sideAngle = i % 2 === 0 ? randRange(0.3, 0.7) : randRange(-0.7, -0.3);\n\n      // As we go deeper, branches extend more horizontally\n      const levelFactor = level * 0.2;\n      const newAngle = baseAngle + sideAngle * (1 + levelFactor);\n\n      // Calculate branch length (diminishing with level)\n      const scaleFactor = 1 - level * 0.2;\n      const branchLength = (40 + branchSkills.length * 5) * scaleFactor;\n\n      // Branch direction\n      const branchDirection = {\n        x: Math.cos(newAngle),\n        y: Math.sin(newAngle)\n      };\n\n      // For sub-branches, start from a point along the parent branch\n      const t = 0.6 + i / numBranches * 0.4; // Start point along parent branch\n      const p0 = parentBranch.start;\n      const p1 = parentBranch.control1;\n      const p2 = parentBranch.control2;\n      const p3 = parentBranch.end;\n\n      // Calculate position on the parent's bezier curve\n      const t1 = 1 - t;\n      const t1_2 = t1 * t1;\n      const t1_3 = t1_2 * t1;\n      const t_2 = t * t;\n      const t_3 = t_2 * t;\n      const startX = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n      const startY = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n      const start = {\n        x: startX,\n        y: startY\n      };\n\n      // End point\n      const end = {\n        x: start.x + branchDirection.x * branchLength,\n        y: start.y + branchDirection.y * branchLength\n      };\n\n      // Control points for natural curve\n      const control1 = {\n        x: start.x + branchDirection.x * branchLength * 0.3,\n        y: start.y + branchDirection.y * branchLength * 0.2 - 5\n      };\n      const control2 = {\n        x: start.x + branchDirection.x * branchLength * 0.7,\n        y: start.y + branchDirection.y * branchLength * 0.6 - 8\n      };\n\n      // Thickness diminishes with level\n      const thicknessScale = 1 - level * 0.25;\n      const thickness = parentBranch.thickness * 0.6 * thicknessScale;\n      const branch = {\n        id: `${parentBranch.id}-sub-${i}`,\n        category: parentBranch.category,\n        start,\n        end,\n        control1,\n        control2,\n        thickness,\n        angle: newAngle,\n        masteryRatio: branchMasteryRatio,\n        level,\n        skills: branchSkills,\n        subBranches: [],\n        gradientId: `${parentBranch.id}-sub-${i}-gradient`\n      };\n\n      // Generate further sub-branches if we haven't reached max level\n      if (level < 3 && branchSkills.length > 1) {\n        const furtherSubBranches = generateSubBranches(branch, branchSkills, Math.max(2, branchSkills.length - 1), level + 1);\n        branch.subBranches = furtherSubBranches;\n      }\n      branches.push(branch);\n    }\n    return branches;\n  };\n\n  // Generate main branches\n  const mainBranches = generateBranches();\n  const allDisplayBranches = getAllBranches(mainBranches);\n\n  // Function to render all branches recursively\n  const renderBranches = branches => {\n    return branches.flatMap((branch, index) => [/*#__PURE__*/_jsxDEV(\"g\", {\n      onMouseEnter: () => setHoveredBranch(branch.id),\n      onMouseLeave: () => setHoveredBranch(null),\n      children: [/*#__PURE__*/_jsxDEV(animated.path, {\n        id: branch.id,\n        d: `\n            M${branch.start.x}, ${branch.start.y}\n            C${branch.control1.x}, ${branch.control1.y}\n             ${branch.control2.x}, ${branch.control2.y}\n             ${branch.end.x}, ${branch.end.y}\n          `,\n        fill: \"none\",\n        stroke: `url(#${branch.gradientId})`,\n        strokeWidth: branch.thickness,\n        strokeLinecap: \"round\",\n        style: {\n          transform: hoveredBranch === branch.id ? 'scale(1.05)' : 'scale(1)',\n          transformOrigin: `${branch.start.x}px ${branch.start.y}px`,\n          transition: 'transform 0.3s ease',\n          ...branchProps\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this), branch.skills.map((skill, skillIndex) => {\n        const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n        return /*#__PURE__*/_jsxDEV(\"foreignObject\", {\n          id: `leaf-${skill.id}`,\n          x: leaf.x - 20,\n          y: leaf.y - 20,\n          width: 40,\n          height: 40,\n          style: {\n            overflow: 'visible',\n            transition: 'all 0.3s ease',\n            filter: leaf.isRecentlyMastered ? 'url(#leaf-glow)' : 'none',\n            transform: hoveredBranch === branch.id ? 'scale(1.1) rotate(5deg)' : 'scale(1) rotate(0deg)'\n          },\n          onMouseEnter: () => setShowTooltip(skill.id),\n          onMouseLeave: () => setShowTooltip(null),\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"40\",\n            height: \"40\",\n            viewBox: \"-20 -20 40 40\",\n            style: {\n              overflow: 'visible'\n            },\n            children: /*#__PURE__*/_jsxDEV(animated.g, {\n              transform: `rotate(${leaf.angle * 180 / Math.PI})`,\n              style: {\n                ...leafProps\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M0,-2 C3,-10 8,-15 12,-15 C18,-15 20,-8 15,0 C10,8 5,10 0,5 C-5,10 -10,8 -15,0 C-20,-8 -18,-15 -12,-15 C-8,-15 -3,-10 0,-2 Z\",\n                fill: skill.mastered ? theme.palette.primary.main : `hsl(${120 + skill.masteryLevel / 5}, ${50 + skill.masteryLevel / 2}%, ${70 - skill.masteryLevel / 3}%)`,\n                opacity: skill.mastered ? 1 : 0.6 + skill.masteryLevel / 250,\n                className: leaf.isRecentlyMastered ? 'leaf-pulse' : '',\n                transform: `scale(${leaf.size / 25})`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M0,-2 L0,5 M-8,-8 Q0,-2 8,-8\",\n                fill: \"none\",\n                stroke: skill.mastered ? `rgba(255,255,255,0.5)` : `rgba(255,255,255,0.3)`,\n                strokeWidth: \"0.8\",\n                transform: `scale(${leaf.size / 25})`,\n                opacity: 0.8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 15\n          }, this)\n        }, `leaf-${skill.id}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 13\n        }, this);\n      }), branch.subBranches && renderBranches(branch.subBranches)]\n    }, branch.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 7\n    }, this)]);\n  };\n\n  // Generate leaf coordinates for a branch\n  const generateLeafCoordinates = (branch, skill, index) => {\n    const skills = branch.skills;\n    const totalSkills = skills.length;\n\n    // Get a t-value [0-1] along the curve based on the skill index\n    // We want to distribute skills evenly\n    const t = clamp(0.3 + (index + 1) / (totalSkills + 1) * 0.7, 0.3, 0.95);\n\n    // Calculate point on the cubic bezier curve\n    const p0 = branch.start;\n    const p1 = branch.control1;\n    const p2 = branch.control2;\n    const p3 = branch.end;\n\n    // Calculate position on the cubic bezier curve\n    // Formula: P = (1-t)^3 * P0 + 3(1-t)^2 * t * P1 + 3(1-t) * t^2 * P2 + t^3 * P3\n    const t1 = 1 - t;\n    const t1_2 = t1 * t1;\n    const t1_3 = t1_2 * t1;\n    const t_2 = t * t;\n    const t_3 = t_2 * t;\n    const x = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n    const y = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n\n    // Calculate the curve tangent to decide the leaf direction\n    const tangentX = -3 * t1_2 * p0.x + 3 * t1_2 * p1.x - 6 * t1 * t * p1.x + 6 * t1 * t * p2.x - 3 * t_2 * p2.x + 3 * t_2 * p3.x;\n    const tangentY = -3 * t1_2 * p0.y + 3 * t1_2 * p1.y - 6 * t1 * t * p1.y + 6 * t1 * t * p2.y - 3 * t_2 * p2.y + 3 * t_2 * p3.y;\n\n    // Normalize the tangent\n    const tangentLength = Math.sqrt(tangentX * tangentX + tangentY * tangentY);\n    const normalizedTangentX = tangentX / tangentLength;\n    const normalizedTangentY = tangentY / tangentLength;\n\n    // Calculate perpendicular vector\n    const perpX = -normalizedTangentY;\n    const perpY = normalizedTangentX;\n\n    // Spread leaves on both sides of the branch\n    // Alternate sides for a more natural look\n    const side = index % 2 === 0 ? 1 : -1;\n\n    // Offset from the curve\n    const offset = skill.masteryLevel / 100 * 5 + 5;\n\n    // Base position on the curve\n    let baseX = x + side * perpX * offset;\n    let baseY = y + side * perpY * offset;\n\n    // Add some random variation for a more natural look\n    baseX += randRange(-3, 3);\n    baseY += randRange(-3, 3);\n\n    // Calculate leaf size based on mastery level\n    const baseSize = 7;\n    const masteryBonus = skill.mastered ? 4 : skill.masteryLevel / 25;\n    const size = baseSize + masteryBonus;\n\n    // Leaf color hue varies slightly based on mastery\n    const hue = 120 + skill.masteryLevel / 5;\n    return {\n      x: baseX,\n      y: baseY,\n      size,\n      // Add angle information for leaf orientation\n      angle: Math.atan2(perpY, perpX) + side * Math.PI / 8 + randRange(-Math.PI / 16, Math.PI / 16),\n      isRecentlyMastered: recentlyMastered.includes(skill.id) && skill.mastered,\n      hue\n    };\n  };\n\n  // Animation update\n  useEffect(() => {\n    if (!svgRef.current || mainBranches.length === 0) return;\n\n    // Skip animation if it's the first render\n    if (firstRender) return;\n    if (animation) {\n      // Add the SVG animation\n      const svg = svgRef.current;\n\n      // Animate trunk growing\n      const trunk = svg.querySelector('#tree-trunk');\n      if (trunk) {\n        trunk.classList.add('animate-grow');\n        trunk.addEventListener('animationend', () => {\n          trunk.classList.remove('animate-grow');\n        }, {\n          once: true\n        });\n      }\n\n      // Animate branches\n      mainBranches.forEach((branch, i) => {\n        const branchElement = svg.querySelector(`#${branch.id}`);\n        if (branchElement) {\n          branchElement.classList.add('animate-grow');\n          branchElement.setAttribute('style', `animation-delay: ${i * 0.2}s`);\n          branchElement.addEventListener('animationend', () => {\n            branchElement.classList.remove('animate-grow');\n            branchElement.removeAttribute('style');\n          }, {\n            once: true\n          });\n        }\n      });\n\n      // Animate leaves\n      recentlyMastered.forEach(skillId => {\n        const leafElement = svg.querySelector(`#leaf-${skillId}`);\n        if (leafElement) {\n          leafElement.classList.add('animate-leaf-grow');\n          leafElement.addEventListener('animationend', () => {\n            leafElement.classList.remove('animate-leaf-grow');\n          }, {\n            once: true\n          });\n        }\n      });\n    }\n  }, [animation, mainBranches, recentlyMastered, firstRender]);\n\n  // Render tooltip for skills\n  const renderTooltip = () => {\n    if (!showTooltip) return null;\n    const skill = skills.find(s => s.id === showTooltip);\n    if (!skill) return null;\n\n    // Find leaf position for this skill\n    let tooltipX = 0;\n    let tooltipY = 0;\n    let found = false;\n\n    // Recursive search function\n    const findSkillInBranches = branches => {\n      for (const branch of branches) {\n        const skillIndex = branch.skills.findIndex(s => s.id === skill.id);\n        if (skillIndex >= 0) {\n          const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n          tooltipX = leaf.x;\n          tooltipY = leaf.y;\n          found = true;\n          return true;\n        }\n\n        // Check sub-branches\n        if (branch.subBranches && branch.subBranches.length > 0) {\n          if (findSkillInBranches(branch.subBranches)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    findSkillInBranches(mainBranches);\n    if (!found) return null;\n    return /*#__PURE__*/_jsxDEV(\"g\", {\n      children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n        x: tooltipX - 60,\n        y: tooltipY - 50,\n        width: \"120\",\n        height: \"36\",\n        rx: \"6\",\n        ry: \"6\",\n        fill: \"rgba(255,255,255,0.95)\",\n        stroke: theme.palette.primary.main,\n        strokeWidth: \"1\",\n        filter: \"drop-shadow(0px 2px 3px rgba(0,0,0,0.2))\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n        x: tooltipX,\n        y: tooltipY - 30,\n        textAnchor: \"middle\",\n        dominantBaseline: \"middle\",\n        fill: theme.palette.text.primary,\n        fontSize: \"10\",\n        fontFamily: \"DM Sans, sans-serif\",\n        children: skill.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 9\n      }, this), skill.mastered && /*#__PURE__*/_jsxDEV(\"text\", {\n        x: tooltipX,\n        y: tooltipY - 40,\n        textAnchor: \"middle\",\n        dominantBaseline: \"middle\",\n        fill: theme.palette.success.main,\n        fontSize: \"8\",\n        fontFamily: \"DM Sans, sans-serif\",\n        fontWeight: \"bold\",\n        children: \"MASTERED\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 699,\n        columnNumber: 11\n      }, this)]\n    }, `tooltip-${skill.id}`, true, {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(animated.div, {\n    style: treeContainerProps,\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      className: \"glass-morphism\",\n      sx: {\n        p: 4,\n        mb: 4,\n        position: 'relative',\n        overflow: 'hidden',\n        borderRadius: '8px',\n        background: 'linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(245,250,245,0.9))',\n        boxShadow: '0 8px 32px rgba(31,38,135,0.15)',\n        backdropFilter: 'blur(10px)',\n        border: '1px solid rgba(255,255,255,0.18)',\n        transition: 'all 0.5s ease'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        align: \"center\",\n        sx: {\n          fontFamily: 'DM Sans, sans-serif',\n          fontWeight: 'bold',\n          color: theme.palette.primary.main,\n          mb: 3\n        },\n        children: \"Your Bonsai Learning Tree\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 734,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          textAlign: 'center',\n          mb: 3,\n          animation: animation ? 'pulse 2s ease-in-out' : 'none'\n        },\n        children: [/*#__PURE__*/_jsxDEV(animated.div, {\n          style: {\n            display: 'inline-block',\n            fontSize: '2.5rem',\n            fontWeight: 'bold',\n            color: theme.palette.primary.main,\n            animation: animation ? 'colorShift 2s ease-in-out' : 'none'\n          },\n          children: percentageProps.number.to(n => `${Math.floor(n)}%`)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 753,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          sx: {\n            fontFamily: 'DM Sans, sans-serif'\n          },\n          children: \"Skills Mastered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 762,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 748,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          width: '100%',\n          height: 500,\n          position: 'relative',\n          borderRadius: 2,\n          overflow: 'hidden',\n          transition: 'all 0.5s ease'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'absolute',\n            bottom: 0,\n            left: 0,\n            width: '100%',\n            height: '40%',\n            background: 'linear-gradient(to top, rgba(232, 245, 233, 0.7) 0%, rgba(232, 245, 233, 0) 100%)',\n            zIndex: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 780,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'absolute',\n            top: 20,\n            right: 25,\n            width: 100,\n            height: 100,\n            borderRadius: '50%',\n            background: 'radial-gradient(circle, rgba(255,236,179,0.3) 0%, rgba(255,236,179,0) 70%)',\n            zIndex: 1,\n            animation: 'pulse 8s infinite ease-in-out',\n            '@keyframes pulse': {\n              '0%': {\n                opacity: 0.5,\n                transform: 'scale(1)'\n              },\n              '50%': {\n                opacity: 0.8,\n                transform: 'scale(1.1)'\n              },\n              '100%': {\n                opacity: 0.5,\n                transform: 'scale(1)'\n              }\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 791,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            width: '100%',\n            height: '100%',\n            position: 'relative',\n            zIndex: 2,\n            transform: `scale(${treeVitality.scale})`,\n            transition: 'transform 1s ease-in-out'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            ref: svgRef,\n            width: \"100%\",\n            height: \"100%\",\n            viewBox: \"0 0 300 500\",\n            overflow: \"visible\",\n            style: {\n              marginTop: '-40px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n              children: [/*#__PURE__*/_jsxDEV(\"radialGradient\", {\n                id: \"potGradient\",\n                cx: \"50%\",\n                cy: \"30%\",\n                r: \"70%\",\n                fx: \"50%\",\n                fy: \"30%\",\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: \"#8D6E63\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 828,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"90%\",\n                  stopColor: \"#5D4037\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 829,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 827,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                id: \"trunkGradient\",\n                x1: \"0%\",\n                y1: \"0%\",\n                x2: \"100%\",\n                y2: \"0%\",\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: treeVitality.trunkBaseColor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 833,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"50%\",\n                  stopColor: \"#6D4C41\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 834,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"100%\",\n                  stopColor: treeVitality.trunkBaseColor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 835,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 832,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"radialGradient\", {\n                id: \"shadowGradient\",\n                cx: \"50%\",\n                cy: \"50%\",\n                r: \"50%\",\n                fx: \"50%\",\n                fy: \"50%\",\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: \"rgba(0,0,0,0.2)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 840,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"100%\",\n                  stopColor: \"rgba(0,0,0,0)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 841,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 839,\n                columnNumber: 17\n              }, this), allDisplayBranches.map(branch => /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                id: branch.gradientId,\n                x1: \"0%\",\n                y1: \"0%\",\n                x2: \"100%\",\n                y2: \"0%\",\n                gradientUnits: \"userSpaceOnUse\",\n                gradientTransform: `rotate(${branch.angle * 180 / Math.PI})`,\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"0%\",\n                  stopColor: \"#6D4C41\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 856,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"100%\",\n                  stopColor: \"#8D6E63\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 857,\n                  columnNumber: 21\n                }, this)]\n              }, branch.gradientId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 846,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(\"filter\", {\n                id: \"leaf-glow\",\n                x: \"-50%\",\n                y: \"-50%\",\n                width: \"200%\",\n                height: \"200%\",\n                children: [/*#__PURE__*/_jsxDEV(\"feGaussianBlur\", {\n                  stdDeviation: \"2\",\n                  result: \"blur\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 863,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"feComposite\", {\n                  in: \"SourceGraphic\",\n                  in2: \"blur\",\n                  operator: \"over\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 864,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 862,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n                type: \"text/css\",\n                children: `\n                    @keyframes leafGrow {\n                      0% { transform: scale(0); opacity: 0; }\n                      60% { transform: scale(1.5); opacity: 1; }\n                      100% { transform: scale(1); opacity: 1; }\n                    }\n                    \n                    @keyframes branchGrow {\n                      0% { stroke-dashoffset: 1000; }\n                      100% { stroke-dashoffset: 0; }\n                    }\n                    \n                    @keyframes pulse {\n                      0% { opacity: 0.8; transform: scale(1); }\n                      50% { opacity: 1; transform: scale(1.1); }\n                      100% { opacity: 0.8; transform: scale(1); }\n                    }\n                    \n                    @keyframes float {\n                      0% { transform: translateY(0); }\n                      50% { transform: translateY(-5px); }\n                      100% { transform: translateY(0); }\n                    }\n                    \n                    @keyframes sway {\n                      0% { transform: rotate(0deg); }\n                      25% { transform: rotate(1deg); }\n                      75% { transform: rotate(-1deg); }\n                      100% { transform: rotate(0deg); }\n                    }\n                    \n                    .animate-grow {\n                      stroke-dasharray: 1000;\n                      stroke-dashoffset: 1000;\n                      animation: branchGrow 1.5s ease-in-out forwards;\n                    }\n                    \n                    .animate-leaf-grow {\n                      animation: leafGrow 0.8s ease-out forwards;\n                    }\n                    \n                    .leaf-pulse {\n                      animation: pulse 2s infinite;\n                    }\n                    \n                    .sway-slow {\n                      transform-origin: bottom;\n                      animation: sway 8s ease-in-out infinite;\n                    }\n                    \n                    .sway-medium {\n                      transform-origin: bottom;\n                      animation: sway 6s ease-in-out infinite;\n                    }\n                    \n                    .float-animation {\n                      animation: float 5s ease-in-out infinite;\n                    }\n                  `\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 868,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 825,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n              cx: \"150\",\n              cy: 385 + treeVitality.potHeight,\n              rx: treeVitality.potWidth * 0.9,\n              ry: \"8\",\n              fill: \"url(#shadowGradient)\",\n              opacity: \"0.5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 932,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n              className: \"float-animation\",\n              children: [/*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: \"385\",\n                rx: treeVitality.potWidth,\n                ry: \"15\",\n                fill: \"#A1887F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 943,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: `\n                    M${150 - treeVitality.potWidth}, 385 \n                    L${150 - treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth}, 385\n                  `,\n                fill: \"url(#potGradient)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 950,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: 385 + treeVitality.potHeight,\n                rx: treeVitality.potWidth * 0.8,\n                ry: \"6\",\n                fill: \"#5D4037\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 959,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: \"383\",\n                rx: treeVitality.potWidth * 0.85,\n                ry: \"13\",\n                fill: \"#3E2723\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 968,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n                cx: \"150\",\n                cy: \"382\",\n                rx: treeVitality.potWidth * 0.8,\n                ry: \"12\",\n                fill: \"#33691E\",\n                opacity: \"0.4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 975,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 942,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n              className: \"sway-slow\",\n              children: [/*#__PURE__*/_jsxDEV(animated.path, {\n                id: \"tree-trunk\",\n                d: `\n                    M${150 - treeVitality.trunkWidth * 0.4}, 385\n                    C${150 - treeVitality.trunkWidth * 0.5}, ${385 - treeVitality.trunkHeight * 0.3}\n                     ${150 + treeVitality.trunkWidth * 0.2}, ${385 - treeVitality.trunkHeight * 0.6}\n                     ${150 + treeVitality.trunkWidth * 0.1}, ${385 - treeVitality.trunkHeight * 0.7}\n                    S${150 + treeVitality.trunkWidth * 0.05}, ${385 - treeVitality.trunkHeight * 0.85}\n                     150, ${385 - treeVitality.trunkHeight}\n                  `,\n                fill: \"none\",\n                stroke: \"url(#trunkGradient)\",\n                strokeWidth: treeVitality.trunkWidth,\n                strokeLinecap: \"round\",\n                style: trunkProps\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 987,\n                columnNumber: 17\n              }, this), renderBranches(mainBranches)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 986,\n              columnNumber: 15\n            }, this), renderTooltip()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 817,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 809,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'absolute',\n            bottom: 15,\n            right: 15,\n            background: 'rgba(255,255,255,0.9)',\n            p: 1.5,\n            borderRadius: '8px',\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            backdropFilter: 'blur(8px)',\n            border: '1px solid rgba(255,255,255,0.5)',\n            zIndex: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            display: \"block\",\n            sx: {\n              fontWeight: 'bold',\n              mb: 0.5,\n              fontFamily: 'DM Sans, sans-serif'\n            },\n            children: \"Your Learning Growth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1028,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            display: \"block\",\n            sx: {\n              fontFamily: 'DM Sans, sans-serif'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              component: \"span\",\n              sx: {\n                display: 'inline-block',\n                width: 10,\n                height: 10,\n                borderRadius: '50%',\n                backgroundColor: theme.palette.primary.main,\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1044,\n              columnNumber: 15\n            }, this), \"Mastered Skills\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1039,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            display: \"block\",\n            sx: {\n              fontFamily: 'DM Sans, sans-serif'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              component: \"span\",\n              sx: {\n                display: 'inline-block',\n                width: 10,\n                height: 10,\n                borderRadius: '50%',\n                backgroundColor: treeVitality.leafBaseColor,\n                opacity: 0.7,\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1062,\n              columnNumber: 15\n            }, this), \"Skills In Progress\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1057,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1014,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 771,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        align: \"center\",\n        variant: \"body2\",\n        color: \"text.secondary\",\n        sx: {\n          mt: 2,\n          fontFamily: 'DM Sans, sans-serif',\n          animation: animation ? 'fadeIn 1s ease-in-out' : 'none'\n        },\n        children: [\"You've mastered \", masteredSkills.length, \" skills so far! Keep growing!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1079,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 718,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 717,\n    columnNumber: 5\n  }, this);\n};\n_s(BonsaiTree, \"dEskOE/tpJubky5OCvHzOZyGRbY=\", false, function () {\n  return [useTheme, useSpringRef, useSpringRef, useSpringRef, useSpring, useSpring, useSpring, useSpring, useChain, useSpring];\n});\n_c = BonsaiTree;\nexport default BonsaiTree;\nvar _c;\n$RefreshReg$(_c, \"BonsaiTree\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Box","Typography","Paper","useTheme","useSpring","animated","config","useSpringRef","useChain","jsxDEV","_jsxDEV","lerp","a","b","t","clamp","num","min","max","Math","randRange","random","getAllBranches","branches","all_branches","branch","push","subBranches","length","concat","BonsaiTree","skills","totalSkills","showGrowthAnimation","_s","theme","svgRef","recentlyMastered","setRecentlyMastered","showTooltip","setShowTooltip","animation","setAnimation","firstRender","setFirstRender","hoveredBranch","setHoveredBranch","prevSkillsRef","skillsByCategory","reduce","acc","skill","category","masteredSkills","filter","mastered","masteryPercentage","round","trunkSpringRef","branchSpringRef","leafSpringRef","percentageProps","number","from","tension","friction","delay","trunkProps","ref","strokeDashoffset","opacity","to","duration","branchProps","leafProps","scale","treeContainerProps","transform","gentle","treeVitality","trunkBaseColor","trunkWidth","trunkHeight","potWidth","potHeight","leafBaseColor","generateBranches","categories","Object","keys","mainBranches","trunkEndY","trunkTop","x","y","totalCategories","baseAngles","PI","i","position","angle","baseAngle","categorySkills","masteredInCategory","s","categoryMasteryRatio","minLength","maxLength","branchLength","branchDirection","cos","sin","endPoint","curveFactor","verticalBias","controlPoint1","controlPoint2","thickness","mainBranch","id","start","end","control1","control2","masteryRatio","level","gradientId","generateSubBranches","parentBranch","maxBranches","numBranches","skillsPerBranch","ceil","startIdx","endIdx","branchSkills","slice","masteredInBranch","branchMasteryRatio","sideAngle","levelFactor","newAngle","scaleFactor","p0","p1","p2","p3","t1","t1_2","t1_3","t_2","t_3","startX","startY","thicknessScale","furtherSubBranches","allDisplayBranches","renderBranches","flatMap","index","onMouseEnter","onMouseLeave","children","path","d","fill","stroke","strokeWidth","strokeLinecap","style","transformOrigin","transition","fileName","_jsxFileName","lineNumber","columnNumber","map","skillIndex","leaf","generateLeafCoordinates","width","height","overflow","isRecentlyMastered","viewBox","g","palette","primary","main","masteryLevel","className","size","tangentX","tangentY","tangentLength","sqrt","normalizedTangentX","normalizedTangentY","perpX","perpY","side","offset","baseX","baseY","baseSize","masteryBonus","hue","atan2","includes","current","svg","trunk","querySelector","classList","add","addEventListener","remove","once","forEach","branchElement","setAttribute","removeAttribute","skillId","leafElement","renderTooltip","find","tooltipX","tooltipY","found","findSkillInBranches","findIndex","rx","ry","textAnchor","dominantBaseline","text","fontSize","fontFamily","name","success","fontWeight","div","elevation","sx","p","mb","borderRadius","background","boxShadow","backdropFilter","border","variant","gutterBottom","align","color","textAlign","display","n","floor","bottom","left","zIndex","top","right","marginTop","cx","cy","r","fx","fy","stopColor","x1","y1","x2","y2","gradientUnits","gradientTransform","stdDeviation","result","in","in2","operator","type","component","backgroundColor","mr","mt","_c","$RefreshReg$"],"sources":["/Users/gerardo/Downloads/Bonsaito/src/components/BonsaiTree.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { Box, Typography, Paper, useTheme, Tooltip } from '@mui/material';\nimport { useSpring, animated, config, useSpringRef, useChain } from 'react-spring';\n\ninterface Skill {\n  id: string;\n  name: string;\n  category: string;\n  mastered: boolean;\n  masteryLevel: number;\n}\n\ninterface BonsaiTreeProps {\n  skills: Skill[];\n  totalSkills: number;\n  showGrowthAnimation?: boolean;\n}\n\n// Helper functions\nconst lerp = (a: number, b: number, t: number) => a * (1 - t) + b * t;\nconst clamp = (num: number, min: number, max: number) => Math.min(Math.max(num, min), max);\nconst randRange = (min: number, max: number) => Math.random() * (max - min) + min;\n\n// Helper function to get all branches (main and sub-branches) flattened into a single array\nconst getAllBranches = (branches: Branch[]): Branch[] => {\n  let all_branches: Branch[] = [];\n  for (const branch of branches) {\n    all_branches.push(branch);\n    if (branch.subBranches && branch.subBranches.length > 0) {\n      all_branches = all_branches.concat(getAllBranches(branch.subBranches));\n    }\n  }\n  return all_branches;\n};\n\n// Define interfaces for branch and leaf objects\ninterface BranchPoint {\n  x: number;\n  y: number;\n}\n\ninterface Branch {\n  id: string;\n  category: string;\n  start: BranchPoint;\n  end: BranchPoint;\n  control1: BranchPoint;\n  control2: BranchPoint;\n  thickness: number;\n  angle: number;\n  masteryRatio: number;\n  level: number;\n  skills: Skill[];\n  subBranches: Branch[];\n  gradientId: string;\n}\n\ninterface LeafCoordinates {\n  x: number;\n  y: number;\n  size: number;\n  angle: number;\n  isRecentlyMastered: boolean;\n  hue: number;\n}\n\nconst BonsaiTree: React.FC<BonsaiTreeProps> = ({ skills, totalSkills, showGrowthAnimation = false }) => {\n  const theme = useTheme();\n  const svgRef = useRef<SVGSVGElement>(null);\n  const [recentlyMastered, setRecentlyMastered] = useState<string[]>([]);\n  const [showTooltip, setShowTooltip] = useState<string | null>(null);\n  const [animation, setAnimation] = useState<boolean>(false);\n  const [firstRender, setFirstRender] = useState<boolean>(true);\n  const [hoveredBranch, setHoveredBranch] = useState<string | null>(null);\n  \n  // Reference to track previous skills for comparison\n  const prevSkillsRef = useRef<Skill[]>([]);\n  \n  // Group skills by category\n  const skillsByCategory = skills.reduce((acc, skill) => {\n      if (!acc[skill.category]) {\n        acc[skill.category] = [];\n      }\n      acc[skill.category].push(skill);\n      return acc;\n    }, {} as Record<string, Skill[]>);\n\n  // Calculate mastery percentage\n  const masteredSkills = skills.filter(skill => skill.mastered);\n  const masteryPercentage = Math.round((masteredSkills.length / totalSkills) * 100);\n  \n  // Spring animation refs for chaining\n  const trunkSpringRef = useSpringRef();\n  const branchSpringRef = useSpringRef();\n  const leafSpringRef = useSpringRef();\n\n  // Spring animations\n  const percentageProps = useSpring({\n    number: masteryPercentage,\n    from: { number: 0 },\n    config: { tension: 120, friction: 14 },\n    delay: 300,\n  });\n\n  const trunkProps = useSpring({\n    ref: trunkSpringRef,\n    from: { strokeDashoffset: 1000, opacity: 0.7 },\n    to: { strokeDashoffset: 0, opacity: 1 },\n    config: { tension: 80, friction: 15, duration: 1500 },\n  });\n\n  const branchProps = useSpring({\n    ref: branchSpringRef,\n    from: { strokeDashoffset: 1000, opacity: 0.5 },\n    to: { strokeDashoffset: 0, opacity: 1 },\n    config: { tension: 70, friction: 14, duration: 1200 },\n  });\n\n  const leafProps = useSpring({\n    ref: leafSpringRef,\n    from: { scale: 0, opacity: 0 },\n    to: { scale: 1, opacity: 1 },\n    config: { tension: 200, friction: 20, duration: 800 },\n  });\n\n  // Chain the animations\n  useChain(\n    firstRender \n      ? [trunkSpringRef, branchSpringRef, leafSpringRef] \n      : [], \n    firstRender \n      ? [0, 0.5, 0.8] \n      : []\n  );\n\n  const treeContainerProps = useSpring({\n    from: { opacity: 0, transform: 'translateY(30px)' },\n    to: { opacity: 1, transform: 'translateY(0px)' },\n    config: config.gentle,\n  });\n\n  // Calculate tree health/vitality based on mastery\n  const treeVitality = {\n    // Trunk color darkens as tree matures\n    trunkBaseColor: masteryPercentage < 30 \n      ? '#6d4c41' // Lighter brown for younger tree\n      : masteryPercentage < 70\n        ? '#5d4037' // Medium brown\n        : '#4e342e', // Dark rich brown for mature tree\n        \n    // Set trunk dimensions based on growth\n    trunkWidth: clamp(30 + (masteryPercentage / 4), 30, 45),\n    trunkHeight: clamp(160 + masteryPercentage, 160, 250),\n    \n    // Pot style based on growth\n    potWidth: clamp(100 + (masteryPercentage / 3), 100, 120),\n    potHeight: clamp(45 + (masteryPercentage / 10), 45, 55),\n    \n    // Leaf colors become more vibrant with mastery\n    leafBaseColor: masteryPercentage < 30 \n      ? '#88d498' // Light green for low mastery\n      : masteryPercentage < 60 \n        ? '#6bcca1' // Medium green\n        : '#4fc3a8', // Vibrant green for high mastery\n    \n    // Overall size scaling factor\n    scale: clamp(0.85 + (masteryPercentage / 100), 0.85, 1.25)\n  };\n\n  // Generate branches with a more natural, realistic pattern\n  const generateBranches = (): Branch[] => {\n    const categories = Object.keys(skillsByCategory);\n    const mainBranches: Branch[] = [];\n    \n    // If no categories, return empty array\n    if (categories.length === 0) return mainBranches;\n    \n    // Determine the main trunk end point (where it starts to curve)\n    const trunkEndY = 300 - treeVitality.trunkHeight * 0.8;\n    const trunkTop = { x: 150, y: trunkEndY };\n    \n    // Main branch distribution angles based on number of categories\n    const totalCategories = categories.length;\n    const baseAngles = [];\n    \n    if (totalCategories === 1) {\n      // Single category - branch goes mostly upward\n      baseAngles.push(-Math.PI/2);\n    } else if (totalCategories === 2) {\n      // Two categories - split left and right with asymmetry\n      baseAngles.push(-Math.PI/2 - 0.5);\n      baseAngles.push(-Math.PI/2 + 0.3);\n    } else {\n      // Distribute branches in a natural, asymmetric pattern\n      // Traditional bonsai often has branches at Golden ratio points\n      // We'll create a more natural distribution with intentional gaps\n      \n      // First create a basic distribution\n      for (let i = 0; i < totalCategories; i++) {\n        // Introduce some natural clustering rather than even distribution\n        const position = i / (totalCategories - 1);\n        // Apply non-linear transformation for more natural spacing\n        let angle;\n        if (position < 0.4) {\n          // Cluster more branches on the left side (traditional bonsai aesthetic)\n          angle = lerp(-Math.PI/2 - 0.9, -Math.PI/2 - 0.2, position / 0.4);\n        } else if (position > 0.6) {\n          // Some branches on the right\n          angle = lerp(-Math.PI/2 + 0.1, -Math.PI/2 + 0.7, (position - 0.6) / 0.4);\n        } else {\n          // Few branches directly upward\n          angle = lerp(-Math.PI/2 - 0.2, -Math.PI/2 + 0.1, (position - 0.4) / 0.2);\n        }\n        baseAngles.push(angle);\n      }\n    }\n    \n    // Create main branches\n    for (let i = 0; i < categories.length; i++) {\n      const category = categories[i];\n      const skills = skillsByCategory[category];\n      \n      // Skip empty categories\n      if (!skills || skills.length === 0) continue;\n      \n      // Calculate angle with small random variation\n      const baseAngle = baseAngles[i];\n      const angle = baseAngle + randRange(-0.15, 0.15);\n      \n      // Calculate mastery for this category\n      const categorySkills = skillsByCategory[category] || [];\n      const masteredInCategory = categorySkills.filter(s => s.mastered).length;\n      const categoryMasteryRatio = categorySkills.length > 0 \n        ? masteredInCategory / categorySkills.length \n        : 0;\n      \n      // Set branch length based on category mastery and skill count\n      const minLength = 80 + (skills.length * 3);\n      const maxLength = 120 + (skills.length * 4);\n      const branchLength = lerp(minLength, maxLength, categoryMasteryRatio);\n      \n      // Branch direction vector\n      const branchDirection = { \n        x: Math.cos(angle),\n        y: Math.sin(angle)\n      };\n      \n      // Branch end point\n      const endPoint = {\n        x: trunkTop.x + branchDirection.x * branchLength,\n        y: trunkTop.y + branchDirection.y * branchLength\n      };\n      \n      // Control points for natural curve - more variation for realistic bonsai shapes\n      // Bonsai branches often have more dramatic curves and character\n      const curveFactor = randRange(0.8, 1.2); // Variation in curve intensity\n      const verticalBias = randRange(-20, -5); // Varied vertical offset for natural curves\n      \n      const controlPoint1 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.3 * curveFactor,\n        y: trunkTop.y + branchDirection.y * branchLength * 0.2 + verticalBias\n      };\n      \n      const controlPoint2 = {\n        x: trunkTop.x + branchDirection.x * branchLength * 0.7 * curveFactor, \n        y: trunkTop.y + branchDirection.y * branchLength * 0.6 + verticalBias * 0.7\n      };\n      \n      // Thickness based on mastery and size with more taper\n      const thickness = 6 * (0.7 + (categoryMasteryRatio * 0.5));\n      \n      const mainBranch: Branch = {\n        id: `branch-${i}`,\n        category,\n        start: trunkTop,\n        end: endPoint,\n        control1: controlPoint1,\n        control2: controlPoint2,\n        thickness,\n        angle,\n        masteryRatio: categoryMasteryRatio,\n        level: 0,\n        skills: [],\n        subBranches: [],\n        gradientId: `branch-${i}-gradient`,\n      };\n      \n      // Generate sub-branches\n      const subBranches = generateSubBranches(mainBranch, skills, 3, 1);\n      mainBranch.subBranches = subBranches;\n      \n      mainBranches.push(mainBranch);\n    }\n    \n    return mainBranches;\n  };\n  \n  // Generate sub-branches recursively\n  const generateSubBranches = (parentBranch: Branch, skills: Skill[], maxBranches: number, level: number): Branch[] => {\n    if (level > 3 || skills.length === 0) return []; // Limit the recursion depth\n    \n    const branches: Branch[] = [];\n    const numBranches = Math.min(maxBranches, skills.length);\n    const skillsPerBranch = Math.ceil(skills.length / numBranches);\n    \n    for (let i = 0; i < numBranches; i++) {\n      // Get skills for this branch\n      const startIdx = i * skillsPerBranch;\n      const endIdx = Math.min(startIdx + skillsPerBranch, skills.length);\n      const branchSkills = skills.slice(startIdx, endIdx);\n      \n      if (branchSkills.length === 0) continue;\n      \n      // Calculate mastery for this set of skills\n      const masteredInBranch = branchSkills.filter(s => s.mastered).length;\n      const branchMasteryRatio = masteredInBranch / branchSkills.length;\n      \n      // Generate the sub-branch\n      const baseAngle = parentBranch.angle;\n      \n      // Alternate sides for more natural look\n      const sideAngle = i % 2 === 0 ? randRange(0.3, 0.7) : randRange(-0.7, -0.3);\n      \n      // As we go deeper, branches extend more horizontally\n      const levelFactor = level * 0.2;\n      const newAngle = baseAngle + sideAngle * (1 + levelFactor);\n      \n      // Calculate branch length (diminishing with level)\n      const scaleFactor = 1 - (level * 0.2);\n      const branchLength = (40 + (branchSkills.length * 5)) * scaleFactor;\n      \n      // Branch direction\n      const branchDirection = {\n        x: Math.cos(newAngle),\n        y: Math.sin(newAngle)\n      };\n      \n      // For sub-branches, start from a point along the parent branch\n      const t = 0.6 + (i / numBranches) * 0.4; // Start point along parent branch\n      const p0 = parentBranch.start;\n      const p1 = parentBranch.control1;\n      const p2 = parentBranch.control2;\n      const p3 = parentBranch.end;\n      \n      // Calculate position on the parent's bezier curve\n      const t1 = 1 - t;\n      const t1_2 = t1 * t1;\n      const t1_3 = t1_2 * t1;\n      const t_2 = t * t;\n      const t_3 = t_2 * t;\n      \n      const startX = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n      const startY = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n      const start = { x: startX, y: startY };\n      \n      // End point\n      const end = {\n        x: start.x + branchDirection.x * branchLength,\n        y: start.y + branchDirection.y * branchLength\n      };\n      \n      // Control points for natural curve\n      const control1 = {\n        x: start.x + branchDirection.x * branchLength * 0.3,\n        y: start.y + branchDirection.y * branchLength * 0.2 - 5\n      };\n      \n      const control2 = {\n        x: start.x + branchDirection.x * branchLength * 0.7,\n        y: start.y + branchDirection.y * branchLength * 0.6 - 8\n      };\n      \n      // Thickness diminishes with level\n      const thicknessScale = 1 - (level * 0.25);\n      const thickness = parentBranch.thickness * 0.6 * thicknessScale;\n      \n      const branch: Branch = {\n        id: `${parentBranch.id}-sub-${i}`,\n        category: parentBranch.category,\n        start,\n        end,\n        control1,\n        control2,\n        thickness,\n        angle: newAngle,\n        masteryRatio: branchMasteryRatio,\n        level,\n        skills: branchSkills,\n        subBranches: [],\n        gradientId: `${parentBranch.id}-sub-${i}-gradient`,\n      };\n      \n      // Generate further sub-branches if we haven't reached max level\n      if (level < 3 && branchSkills.length > 1) {\n        const furtherSubBranches = generateSubBranches(\n          branch, \n          branchSkills, \n          Math.max(2, branchSkills.length - 1), \n          level + 1\n        );\n        branch.subBranches = furtherSubBranches;\n      }\n      \n      branches.push(branch);\n    }\n    \n    return branches;\n  };\n  \n  // Generate main branches\n  const mainBranches = generateBranches();\n  const allDisplayBranches = getAllBranches(mainBranches);\n\n  // Function to render all branches recursively\n  const renderBranches = (branches: Branch[]) => {\n    return branches.flatMap((branch, index) => [\n      <g \n        key={branch.id} \n        onMouseEnter={() => setHoveredBranch(branch.id)}\n        onMouseLeave={() => setHoveredBranch(null)}\n      >\n        <animated.path\n          id={branch.id}\n          d={`\n            M${branch.start.x}, ${branch.start.y}\n            C${branch.control1.x}, ${branch.control1.y}\n             ${branch.control2.x}, ${branch.control2.y}\n             ${branch.end.x}, ${branch.end.y}\n          `}\n          fill=\"none\"\n          stroke={`url(#${branch.gradientId})`}\n          strokeWidth={branch.thickness}\n          strokeLinecap=\"round\"\n          style={{\n            transform: hoveredBranch === branch.id \n              ? 'scale(1.05)' \n              : 'scale(1)',\n            transformOrigin: `${branch.start.x}px ${branch.start.y}px`,\n            transition: 'transform 0.3s ease',\n            ...branchProps\n          }}\n        />\n        \n        {/* Skills as leaves */}\n        {branch.skills.map((skill, skillIndex) => {\n          const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n          return (\n            <foreignObject\n              key={`leaf-${skill.id}`}\n              id={`leaf-${skill.id}`}\n              x={leaf.x - 20}\n              y={leaf.y - 20}\n              width={40}\n              height={40}\n              style={{\n                overflow: 'visible',\n                transition: 'all 0.3s ease',\n                filter: leaf.isRecentlyMastered ? 'url(#leaf-glow)' : 'none',\n                transform: hoveredBranch === branch.id \n                  ? 'scale(1.1) rotate(5deg)' \n                  : 'scale(1) rotate(0deg)',\n              }}\n              onMouseEnter={() => setShowTooltip(skill.id)}\n              onMouseLeave={() => setShowTooltip(null)}\n            >\n              <svg \n                width=\"40\" \n                height=\"40\" \n                viewBox=\"-20 -20 40 40\"\n                style={{\n                  overflow: 'visible',\n                }}\n              >\n                <animated.g \n                  transform={`rotate(${leaf.angle * 180 / Math.PI})`}\n                  style={{\n                    ...leafProps\n                  }}\n                >\n                  <path\n                    d=\"M0,-2 C3,-10 8,-15 12,-15 C18,-15 20,-8 15,0 C10,8 5,10 0,5 C-5,10 -10,8 -15,0 C-20,-8 -18,-15 -12,-15 C-8,-15 -3,-10 0,-2 Z\"\n                    fill={skill.mastered \n                      ? theme.palette.primary.main \n                      : `hsl(${120 + (skill.masteryLevel / 5)}, ${50 + skill.masteryLevel / 2}%, ${70 - skill.masteryLevel / 3}%)`\n                    }\n                    opacity={skill.mastered ? 1 : 0.6 + (skill.masteryLevel / 250)}\n                    className={leaf.isRecentlyMastered ? 'leaf-pulse' : ''}\n                    transform={`scale(${leaf.size / 25})`}\n                  />\n                  {/* Leaf vein */}\n                  <path\n                    d=\"M0,-2 L0,5 M-8,-8 Q0,-2 8,-8\"\n                    fill=\"none\"\n                    stroke={skill.mastered \n                      ? `rgba(255,255,255,0.5)` \n                      : `rgba(255,255,255,0.3)`\n                    }\n                    strokeWidth=\"0.8\"\n                    transform={`scale(${leaf.size / 25})`}\n                    opacity={0.8}\n                  />\n                </animated.g>\n              </svg>\n            </foreignObject>\n          );\n        })}\n        \n        {/* Render sub-branches recursively */}\n        {branch.subBranches && renderBranches(branch.subBranches)}\n      </g>\n    ]);\n  };\n\n  // Generate leaf coordinates for a branch\n  const generateLeafCoordinates = (branch: Branch, skill: Skill, index: number): LeafCoordinates => {\n    const skills = branch.skills;\n    const totalSkills = skills.length;\n    \n    // Get a t-value [0-1] along the curve based on the skill index\n    // We want to distribute skills evenly\n    const t = clamp(0.3 + ((index + 1) / (totalSkills + 1)) * 0.7, 0.3, 0.95);\n\n    // Calculate point on the cubic bezier curve\n    const p0 = branch.start;\n    const p1 = branch.control1;\n    const p2 = branch.control2;\n    const p3 = branch.end;\n    \n    // Calculate position on the cubic bezier curve\n    // Formula: P = (1-t)^3 * P0 + 3(1-t)^2 * t * P1 + 3(1-t) * t^2 * P2 + t^3 * P3\n    const t1 = 1 - t;\n    const t1_2 = t1 * t1;\n    const t1_3 = t1_2 * t1;\n    const t_2 = t * t;\n    const t_3 = t_2 * t;\n    \n    const x = t1_3 * p0.x + 3 * t1_2 * t * p1.x + 3 * t1 * t_2 * p2.x + t_3 * p3.x;\n    const y = t1_3 * p0.y + 3 * t1_2 * t * p1.y + 3 * t1 * t_2 * p2.y + t_3 * p3.y;\n    \n    // Calculate the curve tangent to decide the leaf direction\n    const tangentX = -3 * t1_2 * p0.x + 3 * t1_2 * p1.x - 6 * t1 * t * p1.x + \n                 6 * t1 * t * p2.x - 3 * t_2 * p2.x + 3 * t_2 * p3.x;\n    const tangentY = -3 * t1_2 * p0.y + 3 * t1_2 * p1.y - 6 * t1 * t * p1.y + \n                 6 * t1 * t * p2.y - 3 * t_2 * p2.y + 3 * t_2 * p3.y;\n    \n    // Normalize the tangent\n    const tangentLength = Math.sqrt(tangentX * tangentX + tangentY * tangentY);\n    const normalizedTangentX = tangentX / tangentLength;\n    const normalizedTangentY = tangentY / tangentLength;\n    \n    // Calculate perpendicular vector\n    const perpX = -normalizedTangentY;\n    const perpY = normalizedTangentX;\n    \n    // Spread leaves on both sides of the branch\n    // Alternate sides for a more natural look\n    const side = index % 2 === 0 ? 1 : -1;\n    \n    // Offset from the curve\n    const offset = ((skill.masteryLevel / 100) * 5) + 5;\n    \n    // Base position on the curve\n    let baseX = x + side * perpX * offset;\n    let baseY = y + side * perpY * offset;\n    \n    // Add some random variation for a more natural look\n    baseX += randRange(-3, 3);\n    baseY += randRange(-3, 3);\n    \n    // Calculate leaf size based on mastery level\n    const baseSize = 7;\n    const masteryBonus = skill.mastered ? 4 : (skill.masteryLevel / 25);\n    const size = baseSize + masteryBonus;\n\n    // Leaf color hue varies slightly based on mastery\n    const hue = 120 + (skill.masteryLevel / 5);\n    \n    return {\n      x: baseX,\n      y: baseY,\n      size,\n      // Add angle information for leaf orientation\n      angle: Math.atan2(perpY, perpX) + (side * Math.PI / 8) + randRange(-Math.PI / 16, Math.PI / 16),\n      isRecentlyMastered: recentlyMastered.includes(skill.id) && skill.mastered,\n      hue\n    };\n  };\n  \n  // Animation update\n  useEffect(() => {\n    if (!svgRef.current || mainBranches.length === 0) return;\n    \n    // Skip animation if it's the first render\n    if (firstRender) return;\n\n    if (animation) {\n      // Add the SVG animation\n      const svg = svgRef.current;\n      \n      // Animate trunk growing\n      const trunk = svg.querySelector('#tree-trunk');\n      if (trunk) {\n        trunk.classList.add('animate-grow');\n        trunk.addEventListener('animationend', () => {\n          trunk.classList.remove('animate-grow');\n        }, { once: true });\n      }\n      \n      // Animate branches\n      mainBranches.forEach((branch, i) => {\n        const branchElement = svg.querySelector(`#${branch.id}`);\n        if (branchElement) {\n          branchElement.classList.add('animate-grow');\n          branchElement.setAttribute('style', `animation-delay: ${i * 0.2}s`);\n          branchElement.addEventListener('animationend', () => {\n            branchElement.classList.remove('animate-grow');\n            branchElement.removeAttribute('style');\n          }, { once: true });\n        }\n      });\n      \n      // Animate leaves\n      recentlyMastered.forEach(skillId => {\n        const leafElement = svg.querySelector(`#leaf-${skillId}`);\n        if (leafElement) {\n          leafElement.classList.add('animate-leaf-grow');\n          leafElement.addEventListener('animationend', () => {\n            leafElement.classList.remove('animate-leaf-grow');\n          }, { once: true });\n        }\n      });\n    }\n  }, [animation, mainBranches, recentlyMastered, firstRender]);\n\n  // Render tooltip for skills\n  const renderTooltip = () => {\n    if (!showTooltip) return null;\n    \n    const skill = skills.find(s => s.id === showTooltip);\n    if (!skill) return null;\n    \n    // Find leaf position for this skill\n    let tooltipX = 0;\n    let tooltipY = 0;\n    let found = false;\n    \n    // Recursive search function\n    const findSkillInBranches = (branches: Branch[]) => {\n      for (const branch of branches) {\n        const skillIndex = branch.skills.findIndex(s => s.id === skill.id);\n        if (skillIndex >= 0) {\n          const leaf = generateLeafCoordinates(branch, skill, skillIndex);\n          tooltipX = leaf.x;\n          tooltipY = leaf.y;\n          found = true;\n          return true;\n        }\n        \n        // Check sub-branches\n        if (branch.subBranches && branch.subBranches.length > 0) {\n          if (findSkillInBranches(branch.subBranches)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    \n    findSkillInBranches(mainBranches);\n    \n    if (!found) return null;\n    \n    return (\n      <g key={`tooltip-${skill.id}`}>\n        <rect\n          x={tooltipX - 60}\n          y={tooltipY - 50}\n          width=\"120\"\n          height=\"36\"\n          rx=\"6\"\n          ry=\"6\"\n          fill=\"rgba(255,255,255,0.95)\"\n          stroke={theme.palette.primary.main}\n          strokeWidth=\"1\"\n          filter=\"drop-shadow(0px 2px 3px rgba(0,0,0,0.2))\"\n        />\n        <text\n          x={tooltipX}\n          y={tooltipY - 30}\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n          fill={theme.palette.text.primary}\n          fontSize=\"10\"\n          fontFamily=\"DM Sans, sans-serif\"\n        >\n          {skill.name}\n        </text>\n        {skill.mastered && (\n          <text\n            x={tooltipX}\n            y={tooltipY - 40}\n            textAnchor=\"middle\"\n            dominantBaseline=\"middle\"\n            fill={theme.palette.success.main}\n            fontSize=\"8\"\n            fontFamily=\"DM Sans, sans-serif\"\n            fontWeight=\"bold\"\n          >\n            MASTERED\n          </text>\n        )}\n      </g>\n    );\n  };\n\n  return (\n    <animated.div style={treeContainerProps}>\n      <Paper \n        elevation={3} \n        className=\"glass-morphism\"\n        sx={{ \n          p: 4, \n          mb: 4, \n          position: 'relative',\n          overflow: 'hidden',\n          borderRadius: '8px',\n          background: 'linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(245,250,245,0.9))',\n          boxShadow: '0 8px 32px rgba(31,38,135,0.15)',\n          backdropFilter: 'blur(10px)',\n          border: '1px solid rgba(255,255,255,0.18)',\n          transition: 'all 0.5s ease',\n        }}\n      >\n        <Typography \n          variant=\"h5\" \n          gutterBottom \n          align=\"center\" \n          sx={{ \n            fontFamily: 'DM Sans, sans-serif',\n            fontWeight: 'bold', \n            color: theme.palette.primary.main,\n            mb: 3\n          }}\n        >\n          Your Bonsai Learning Tree\n        </Typography>\n      \n        <Box sx={{ \n          textAlign: 'center', \n          mb: 3,\n          animation: animation ? 'pulse 2s ease-in-out' : 'none',\n        }}>\n          <animated.div style={{\n            display: 'inline-block',\n            fontSize: '2.5rem',\n            fontWeight: 'bold',\n            color: theme.palette.primary.main,\n            animation: animation ? 'colorShift 2s ease-in-out' : 'none',\n          }}>\n            {percentageProps.number.to(n => `${Math.floor(n)}%`)}\n          </animated.div>\n          <Typography \n            variant=\"body2\" \n            color=\"text.secondary\"\n            sx={{ fontFamily: 'DM Sans, sans-serif' }}\n          >\n            Skills Mastered\n          </Typography>\n        </Box>\n      \n        <Box sx={{ \n          width: '100%', \n          height: 500,\n          position: 'relative',\n          borderRadius: 2,\n          overflow: 'hidden',\n          transition: 'all 0.5s ease',\n        }}>\n          {/* Background gradient */}\n          <Box sx={{\n            position: 'absolute',\n            bottom: 0,\n            left: 0,\n            width: '100%',\n            height: '40%',\n            background: 'linear-gradient(to top, rgba(232, 245, 233, 0.7) 0%, rgba(232, 245, 233, 0) 100%)',\n            zIndex: 1\n          }} />\n          \n          {/* Sun/light effect */}\n          <Box sx={{\n            position: 'absolute',\n            top: 20,\n            right: 25,\n            width: 100,\n            height: 100,\n            borderRadius: '50%',\n            background: 'radial-gradient(circle, rgba(255,236,179,0.3) 0%, rgba(255,236,179,0) 70%)',\n            zIndex: 1,\n            animation: 'pulse 8s infinite ease-in-out',\n            '@keyframes pulse': {\n              '0%': { opacity: 0.5, transform: 'scale(1)' },\n              '50%': { opacity: 0.8, transform: 'scale(1.1)' },\n              '100%': { opacity: 0.5, transform: 'scale(1)' }\n            }\n          }} />\n          \n          {/* Tree SVG */}\n          <Box sx={{\n            width: '100%',\n            height: '100%',\n            position: 'relative',\n            zIndex: 2,\n            transform: `scale(${treeVitality.scale})`,\n            transition: 'transform 1s ease-in-out',\n          }}>\n            <svg \n              ref={svgRef}\n              width=\"100%\" \n              height=\"100%\" \n              viewBox=\"0 0 300 500\" \n              overflow=\"visible\"\n              style={{ marginTop: '-40px' }}\n            >\n              <defs>\n                {/* Gradients for tree elements */}\n                <radialGradient id=\"potGradient\" cx=\"50%\" cy=\"30%\" r=\"70%\" fx=\"50%\" fy=\"30%\">\n                  <stop offset=\"0%\" stopColor=\"#8D6E63\" />\n                  <stop offset=\"90%\" stopColor=\"#5D4037\" />\n                </radialGradient>\n                \n                <linearGradient id=\"trunkGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                  <stop offset=\"0%\" stopColor={treeVitality.trunkBaseColor} />\n                  <stop offset=\"50%\" stopColor=\"#6D4C41\" />\n                  <stop offset=\"100%\" stopColor={treeVitality.trunkBaseColor} />\n                </linearGradient>\n                \n                {/* Shadow gradient */}\n                <radialGradient id=\"shadowGradient\" cx=\"50%\" cy=\"50%\" r=\"50%\" fx=\"50%\" fy=\"50%\">\n                  <stop offset=\"0%\" stopColor=\"rgba(0,0,0,0.2)\" />\n                  <stop offset=\"100%\" stopColor=\"rgba(0,0,0,0)\" />\n                </radialGradient>\n                \n                {/* Gradients for each branch */}\n                {allDisplayBranches.map((branch) => (\n                  <linearGradient \n                    key={branch.gradientId}\n                    id={branch.gradientId}\n                    x1=\"0%\" \n                    y1=\"0%\" \n                    x2=\"100%\" \n                    y2=\"0%\" \n                    gradientUnits=\"userSpaceOnUse\"\n                    gradientTransform={`rotate(${branch.angle * 180 / Math.PI})`}\n                  >\n                    <stop offset=\"0%\" stopColor=\"#6D4C41\" />\n                    <stop offset=\"100%\" stopColor=\"#8D6E63\" />\n                  </linearGradient>\n                ))}\n                \n                {/* Leaf filter for glow effect */}\n                <filter id=\"leaf-glow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n                  <feGaussianBlur stdDeviation=\"2\" result=\"blur\" />\n                  <feComposite in=\"SourceGraphic\" in2=\"blur\" operator=\"over\" />\n                </filter>\n                \n                {/* Animation keyframes */}\n                <style type=\"text/css\">\n                  {`\n                    @keyframes leafGrow {\n                      0% { transform: scale(0); opacity: 0; }\n                      60% { transform: scale(1.5); opacity: 1; }\n                      100% { transform: scale(1); opacity: 1; }\n                    }\n                    \n                    @keyframes branchGrow {\n                      0% { stroke-dashoffset: 1000; }\n                      100% { stroke-dashoffset: 0; }\n                    }\n                    \n                    @keyframes pulse {\n                      0% { opacity: 0.8; transform: scale(1); }\n                      50% { opacity: 1; transform: scale(1.1); }\n                      100% { opacity: 0.8; transform: scale(1); }\n                    }\n                    \n                    @keyframes float {\n                      0% { transform: translateY(0); }\n                      50% { transform: translateY(-5px); }\n                      100% { transform: translateY(0); }\n                    }\n                    \n                    @keyframes sway {\n                      0% { transform: rotate(0deg); }\n                      25% { transform: rotate(1deg); }\n                      75% { transform: rotate(-1deg); }\n                      100% { transform: rotate(0deg); }\n                    }\n                    \n                    .animate-grow {\n                      stroke-dasharray: 1000;\n                      stroke-dashoffset: 1000;\n                      animation: branchGrow 1.5s ease-in-out forwards;\n                    }\n                    \n                    .animate-leaf-grow {\n                      animation: leafGrow 0.8s ease-out forwards;\n                    }\n                    \n                    .leaf-pulse {\n                      animation: pulse 2s infinite;\n                    }\n                    \n                    .sway-slow {\n                      transform-origin: bottom;\n                      animation: sway 8s ease-in-out infinite;\n                    }\n                    \n                    .sway-medium {\n                      transform-origin: bottom;\n                      animation: sway 6s ease-in-out infinite;\n                    }\n                    \n                    .float-animation {\n                      animation: float 5s ease-in-out infinite;\n                    }\n                  `}\n                </style>\n              </defs>\n              \n              {/* Shadow beneath the pot */}\n              <ellipse \n                cx=\"150\" \n                cy={385 + treeVitality.potHeight} \n                rx={treeVitality.potWidth * 0.9} \n                ry=\"8\" \n                fill=\"url(#shadowGradient)\"\n                opacity=\"0.5\"\n              />\n              \n              {/* Pot/Base */}\n              <g className=\"float-animation\">\n                <ellipse \n                  cx=\"150\" \n                  cy=\"385\" \n                  rx={treeVitality.potWidth} \n                  ry=\"15\" \n                  fill=\"#A1887F\" \n                />\n                <path \n                  d={`\n                    M${150 - treeVitality.potWidth}, 385 \n                    L${150 - treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth * 0.8}, ${385 + treeVitality.potHeight}\n                    L${150 + treeVitality.potWidth}, 385\n                  `}\n                  fill=\"url(#potGradient)\"\n                />\n                <ellipse \n                  cx=\"150\" \n                  cy={385 + treeVitality.potHeight} \n                  rx={treeVitality.potWidth * 0.8} \n                  ry=\"6\" \n                  fill=\"#5D4037\" \n                />\n                \n                {/* Soil/moss in pot */}\n                <ellipse \n                  cx=\"150\" \n                  cy=\"383\" \n                  rx={treeVitality.potWidth * 0.85} \n                  ry=\"13\" \n                  fill=\"#3E2723\" \n                />\n                <ellipse \n                  cx=\"150\" \n                  cy=\"382\" \n                  rx={treeVitality.potWidth * 0.8} \n                  ry=\"12\" \n                  fill=\"#33691E\" \n                  opacity=\"0.4\"\n                />\n              </g>\n              \n              {/* Trunk */}\n              <g className=\"sway-slow\">\n                <animated.path\n                  id=\"tree-trunk\"\n                  d={`\n                    M${150 - treeVitality.trunkWidth * 0.4}, 385\n                    C${150 - treeVitality.trunkWidth * 0.5}, ${385 - treeVitality.trunkHeight * 0.3}\n                     ${150 + treeVitality.trunkWidth * 0.2}, ${385 - treeVitality.trunkHeight * 0.6}\n                     ${150 + treeVitality.trunkWidth * 0.1}, ${385 - treeVitality.trunkHeight * 0.7}\n                    S${150 + treeVitality.trunkWidth * 0.05}, ${385 - treeVitality.trunkHeight * 0.85}\n                     150, ${385 - treeVitality.trunkHeight}\n                  `}\n                  fill=\"none\"\n                  stroke=\"url(#trunkGradient)\"\n                  strokeWidth={treeVitality.trunkWidth}\n                  strokeLinecap=\"round\"\n                  style={trunkProps}\n                />\n                \n                {/* Branches */}\n                {renderBranches(mainBranches)}\n              </g>\n              \n              {/* Skill name tooltips */}\n              {renderTooltip()}\n            </svg>\n          </Box>\n          \n          {/* Tree legend */}\n          <Box \n            sx={{ \n              position: 'absolute', \n              bottom: 15, \n              right: 15,\n              background: 'rgba(255,255,255,0.9)', \n              p: 1.5,\n              borderRadius: '8px',\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n              backdropFilter: 'blur(8px)',\n              border: '1px solid rgba(255,255,255,0.5)',\n              zIndex: 10\n            }}\n          >\n            <Typography \n              variant=\"caption\" \n              display=\"block\" \n              sx={{ \n                fontWeight: 'bold', \n                mb: 0.5, \n                fontFamily: 'DM Sans, sans-serif'\n              }}\n            >\n              Your Learning Growth\n            </Typography>\n            <Typography \n              variant=\"caption\" \n              display=\"block\"\n              sx={{ fontFamily: 'DM Sans, sans-serif' }}\n            >\n              <Box \n                component=\"span\" \n                sx={{ \n                  display: 'inline-block', \n                  width: 10, \n                  height: 10, \n                  borderRadius: '50%', \n                  backgroundColor: theme.palette.primary.main,\n                  mr: 1\n                }}\n              />\n              Mastered Skills\n            </Typography>\n            <Typography \n              variant=\"caption\" \n              display=\"block\"\n              sx={{ fontFamily: 'DM Sans, sans-serif' }}\n            >\n              <Box \n                component=\"span\" \n                sx={{ \n                  display: 'inline-block', \n                  width: 10, \n                  height: 10, \n                  borderRadius: '50%', \n                  backgroundColor: treeVitality.leafBaseColor,\n                  opacity: 0.7,\n                  mr: 1\n                }}\n              />\n              Skills In Progress\n            </Typography>\n          </Box>\n        </Box>\n        \n        <Typography \n          align=\"center\" \n          variant=\"body2\" \n          color=\"text.secondary\" \n          sx={{ \n            mt: 2,\n            fontFamily: 'DM Sans, sans-serif',\n            animation: animation ? 'fadeIn 1s ease-in-out' : 'none'\n          }}\n        >\n          You've mastered {masteredSkills.length} skills so far! Keep growing!\n        </Typography>\n      </Paper>\n    </animated.div>\n  );\n};\n\nexport default BonsaiTree;\n\n "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}